/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var oe=["require","exports","vs/base/common/platform","vs/base/common/strings","vs/base/common/path","vs/base/common/extpath","vs/base/common/uri","vs/base/common/resources","vs/base/common/async","vs/base/common/glob","vs/base/common/symbols","vs/base/common/network","vs/base/common/errors","vs/base/common/cancellation","vs/workbench/services/search/common/getFileResults","vs/workbench/services/search/common/ignoreFile","vs/base/common/types","vs/base/common/event","vs/base/common/lifecycle","vs/base/common/lazy","vs/base/common/arrays","vs/base/common/map","vs/editor/common/core/range","vs/workbench/services/search/worker/localFileSearch"],he=function(le){for(var e=[],O=0,M=le.length;O<M;O++)e[O]=oe[le[O]];return e};define(oe[10],he([0,1]),function(le,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Td=void 0,e.$Td=Symbol("MicrotaskDelay")}),define(oe[5],he([0,1,4,2,3,16]),function(le,e,O,M,L,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$eg=e.$dg=e.$cg=e.$bg=e.$ag=e.$_f=e.$$f=e.$0f=e.$9f=e.$8f=e.$7f=e.$6f=e.$5f=e.$4f=e.$3f=e.$2f=void 0;function $(s){return s===47||s===92}e.$2f=$;function D(s){return s.replace(/[\\/]/g,O.$gc.sep)}e.$3f=D;function U(s){return s.indexOf("/")===-1&&(s=D(s)),/^[a-zA-Z]:(\/|$)/.test(s)&&(s="/"+s),s}e.$4f=U;function V(s,o=O.$gc.sep){if(!s)return"";const A=s.length,B=s.charCodeAt(0);if($(B)){if($(s.charCodeAt(1))&&!$(s.charCodeAt(2))){let N=3;const Y=N;for(;N<A&&!$(s.charCodeAt(N));N++);if(Y!==N&&!$(s.charCodeAt(N+1))){for(N+=1;N<A;N++)if($(s.charCodeAt(N)))return s.slice(0,N+1).replace(/[\\/]/g,o)}}return o}else if(j(B)&&s.charCodeAt(1)===58)return $(s.charCodeAt(2))?s.slice(0,2)+o:s.slice(0,2);let K=s.indexOf("://");if(K!==-1){for(K+=3;K<A;K++)if($(s.charCodeAt(K)))return s.slice(0,K+1)}return""}e.$5f=V;function F(s){if(!M.$i||!s||s.length<5)return!1;let o=s.charCodeAt(0);if(o!==92||(o=s.charCodeAt(1),o!==92))return!1;let A=2;const B=A;for(;A<s.length&&(o=s.charCodeAt(A),o!==92);A++);return!(B===A||(o=s.charCodeAt(A+1),isNaN(o)||o===92))}e.$6f=F;const G=/[\\/:\*\?"<>\|]/g,b=/[\\/]/g,h=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function n(s,o=M.$i){const A=o?G:b;return!(!s||s.length===0||/^\s+$/.test(s)||(A.lastIndex=0,A.test(s))||o&&h.test(s)||s==="."||s===".."||o&&s[s.length-1]==="."||o&&s.length!==s.trim().length||s.length>255)}e.$7f=n;function a(s,o,A){const B=s===o;return!A||B?B:!s||!o?!1:(0,L.$af)(s,o)}e.$8f=a;function m(s,o,A,B=O.sep){if(s===o)return!0;if(!s||!o||o.length>s.length)return!1;if(A){if(!(0,L.$bf)(s,o))return!1;if(o.length===s.length)return!0;let N=o.length;return o.charAt(o.length-1)===B&&N--,s.charAt(N)===B}return o.charAt(o.length-1)!==B&&(o+=B),s.indexOf(o)===0}e.$9f=m;function j(s){return s>=65&&s<=90||s>=97&&s<=122}e.$0f=j;function S(s,o){return M.$i&&s.endsWith(":")&&(s+=O.sep),(0,O.$ic)(s)||(s=(0,O.$jc)(o,s)),s=(0,O.$hc)(s),M.$i?(s=(0,L.$Ve)(s,O.sep),s.endsWith(":")&&(s+=O.sep)):(s=(0,L.$Ve)(s,O.sep),s||(s=O.sep)),s}e.$$f=S;function w(s){const o=(0,O.$hc)(s);return M.$i?s.length>3?!1:z(o)&&(s.length===2||o.charCodeAt(2)===92):o===O.$gc.sep}e.$_f=w;function z(s,o=M.$i){return o?j(s.charCodeAt(0))&&s.charCodeAt(1)===58:!1}e.$ag=z;function ne(s,o=M.$i){return z(s,o)?s[0]:void 0}e.$bg=ne;function P(s,o,A){return o.length>s.length?-1:s===o?0:(A&&(s=s.toLowerCase(),o=o.toLowerCase()),s.indexOf(o))}e.$cg=P;function q(s){const o=s.split(":");let A,B,K;for(const N of o){const Y=Number(N);(0,v.$Nf)(Y)?B===void 0?B=Y:K===void 0&&(K=Y):A=A?[A,N].join(":"):N}if(!A)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:A,line:B!==void 0?B:void 0,column:K!==void 0?K:B!==void 0?1:void 0}}e.$dg=q;const C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",X="BDEFGHIJKMOQRSTUVWXYZbdefghijkmoqrstuvwxyz0123456789";function _(s,o,A=8){let B="";for(let N=0;N<A;N++){let Y;N===0&&M.$i&&!o&&(A===3||A===4)?Y=X:Y=C,B+=Y.charAt(Math.floor(Math.random()*Y.length))}let K;return o?K=`${o}-${B}`:K=B,s?(0,O.$jc)(s,K):K}e.$eg=_}),define(oe[11],he([0,1,12,2,3,6]),function(le,e,O,M,L,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COI=e.$pg=e.$og=e.$ng=e.$mg=e.$lg=e.$kg=e.$jg=e.$ig=e.$hg=e.$gg=e.$fg=e.Schemas=void 0;var $;(function(b){b.inMemory="inmemory",b.vscode="vscode",b.internal="private",b.walkThrough="walkThrough",b.walkThroughSnippet="walkThroughSnippet",b.http="http",b.https="https",b.file="file",b.mailto="mailto",b.untitled="untitled",b.data="data",b.command="command",b.vscodeRemote="vscode-remote",b.vscodeRemoteResource="vscode-remote-resource",b.vscodeManagedRemoteResource="vscode-managed-remote-resource",b.vscodeUserData="vscode-userdata",b.vscodeCustomEditor="vscode-custom-editor",b.vscodeNotebookCell="vscode-notebook-cell",b.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",b.vscodeNotebookCellOutput="vscode-notebook-cell-output",b.vscodeInteractiveInput="vscode-interactive-input",b.vscodeSettings="vscode-settings",b.vscodeWorkspaceTrust="vscode-workspace-trust",b.vscodeTerminal="vscode-terminal",b.vscodeChatSesssion="vscode-chat-editor",b.webviewPanel="webview-panel",b.vscodeWebview="vscode-webview",b.extension="extension",b.vscodeFileResource="vscode-file",b.tmp="tmp",b.vsls="vsls",b.vscodeSourceControl="vscode-scm"})($||(e.Schemas=$={}));function D(b,h){return v.URI.isUri(b)?(0,L.$af)(b.scheme,h):(0,L.$bf)(b,h+":")}e.$fg=D;function U(b,...h){return h.some(n=>D(b,n))}e.$gg=U,e.$hg="vscode-tkn",e.$ig="tkn";class V{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f=`/${$.vscodeRemoteResource}`}setPreferredWebSchema(h){this.d=h}setDelegate(h){this.e=h}setServerRootPath(h){this.f=`${h}/${$.vscodeRemoteResource}`}set(h,n,a){this.a[h]=n,this.b[h]=a}setConnectionToken(h,n){this.c[h]=n}getPreferredWebSchema(){return this.d}rewrite(h){if(this.e)try{return this.e(h)}catch(w){return O.$1(w),h}const n=h.authority;let a=this.a[n];a&&a.indexOf(":")!==-1&&a.indexOf("[")===-1&&(a=`[${a}]`);const m=this.b[n],j=this.c[n];let S=`path=${encodeURIComponent(h.path)}`;return typeof j=="string"&&(S+=`&${e.$ig}=${encodeURIComponent(j)}`),v.URI.from({scheme:M.$o?this.d:$.vscodeRemoteResource,authority:`${a}:${m}`,path:this.f,query:S})}}e.$jg=new V,e.$kg="vs/../../extensions",e.$lg="vs/../../node_modules",e.$mg="vs/../../node_modules.asar",e.$ng="vs/../../node_modules.asar.unpacked",e.$og="vscode-app";class F{static{this.a=e.$og}asBrowserUri(h){const n=this.b(h,le);return this.uriToBrowserUri(n)}uriToBrowserUri(h){return h.scheme===$.vscodeRemote?e.$jg.rewrite(h):h.scheme===$.file&&(M.$m||M.$q===`${$.vscodeFileResource}://${F.a}`)?h.with({scheme:$.vscodeFileResource,authority:h.authority||F.a,query:null,fragment:null}):h}asFileUri(h){const n=this.b(h,le);return this.uriToFileUri(n)}uriToFileUri(h){return h.scheme===$.vscodeFileResource?h.with({scheme:$.file,authority:h.authority!==F.a?h.authority:null,query:null,fragment:null}):h}b(h,n){return v.URI.isUri(h)?h:v.URI.parse(n.toUrl(h))}}e.$pg=new F;var G;(function(b){const h=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);b.CoopAndCoep=Object.freeze(h.get("3"));const n="vscode-coi";function a(j){let S;typeof j=="string"?S=new URL(j).searchParams:j instanceof URL?S=j.searchParams:v.URI.isUri(j)&&(S=new URL(j.toString(!0)).searchParams);const w=S?.get(n);if(w)return h.get(w)}b.getHeadersFromQuery=a;function m(j,S,w){if(!globalThis.crossOriginIsolated)return;const z=S&&w?"3":w?"2":"1";j instanceof URLSearchParams?j.set(n,z):j[n]=z}b.addSearchParam=m})(G||(e.COI=G={}))}),define(oe[7],he([0,1,5,11,4,2,3,6]),function(le,e,O,M,L,v,$,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Sg=e.DataUri=e.$Rg=e.$Qg=e.$Pg=e.$Og=e.$Ng=e.$Mg=e.$Lg=e.$Kg=e.$Jg=e.$Ig=e.$Hg=e.$Gg=e.$Fg=e.$Eg=e.$Dg=e.$Cg=e.$Bg=e.$Ag=e.$zg=e.$yg=e.$xg=e.$wg=void 0;function U(h){return(0,D.$wc)(h,!0)}e.$wg=U;class V{constructor(n){this.a=n}compare(n,a,m=!1){return n===a?0:(0,$.$6e)(this.getComparisonKey(n,m),this.getComparisonKey(a,m))}isEqual(n,a,m=!1){return n===a?!0:!n||!a?!1:this.getComparisonKey(n,m)===this.getComparisonKey(a,m)}getComparisonKey(n,a=!1){return n.with({path:this.a(n)?n.path.toLowerCase():void 0,fragment:a?null:void 0}).toString()}ignorePathCasing(n){return this.a(n)}isEqualOrParent(n,a,m=!1){if(n.scheme===a.scheme){if(n.scheme===M.Schemas.file)return O.$9f(U(n),U(a),this.a(n))&&n.query===a.query&&(m||n.fragment===a.fragment);if((0,e.$Ng)(n.authority,a.authority))return O.$9f(n.path,a.path,this.a(n),"/")&&n.query===a.query&&(m||n.fragment===a.fragment)}return!1}joinPath(n,...a){return D.URI.joinPath(n,...a)}basenameOrAuthority(n){return(0,e.$Fg)(n)||n.authority}basename(n){return L.$gc.basename(n.path)}extname(n){return L.$gc.extname(n.path)}dirname(n){if(n.path.length===0)return n;let a;return n.scheme===M.Schemas.file?a=D.URI.file(L.$mc(U(n))).path:(a=L.$gc.dirname(n.path),n.authority&&a.length&&a.charCodeAt(0)!==47&&(console.error(`dirname("${n.toString})) resulted in a relative path`),a="/")),n.with({path:a})}normalizePath(n){if(!n.path.length)return n;let a;return n.scheme===M.Schemas.file?a=D.URI.file(L.$hc(U(n))).path:a=L.$gc.normalize(n.path),n.with({path:a})}relativePath(n,a){if(n.scheme!==a.scheme||!(0,e.$Ng)(n.authority,a.authority))return;if(n.scheme===M.Schemas.file){const S=L.$lc(U(n),U(a));return v.$i?O.$3f(S):S}let m=n.path||"/";const j=a.path||"/";if(this.a(n)){let S=0;for(const w=Math.min(m.length,j.length);S<w&&!(m.charCodeAt(S)!==j.charCodeAt(S)&&m.charAt(S).toLowerCase()!==j.charAt(S).toLowerCase());S++);m=j.substr(0,S)+m.substr(S)}return L.$gc.relative(m,j)}resolvePath(n,a){if(n.scheme===M.Schemas.file){const m=D.URI.file(L.$kc(U(n),a));return n.with({authority:m.authority,path:m.path})}return a=O.$4f(a),n.with({path:L.$gc.resolve(n.path,a)})}isAbsolutePath(n){return!!n.path&&n.path[0]==="/"}isEqualAuthority(n,a){return n===a||n!==void 0&&a!==void 0&&(0,$.$af)(n,a)}hasTrailingPathSeparator(n,a=L.sep){if(n.scheme===M.Schemas.file){const m=U(n);return m.length>O.$5f(m).length&&m[m.length-1]===a}else{const m=n.path;return m.length>1&&m.charCodeAt(m.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(n.fsPath)}}removeTrailingPathSeparator(n,a=L.sep){return(0,e.$Og)(n,a)?n.with({path:n.path.substr(0,n.path.length-1)}):n}addTrailingPathSeparator(n,a=L.sep){let m=!1;if(n.scheme===M.Schemas.file){const j=U(n);m=j!==void 0&&j.length===O.$5f(j).length&&j[j.length-1]===a}else{a="/";const j=n.path;m=j.length===1&&j.charCodeAt(j.length-1)===47}return!m&&!(0,e.$Og)(n,a)?n.with({path:n.path+"/"}):n}}e.$xg=V,e.$yg=new V(()=>!1),e.$zg=new V(h=>h.scheme===M.Schemas.file?!v.$k:!0),e.$Ag=new V(h=>!0),e.$Bg=e.$yg.isEqual.bind(e.$yg),e.$Cg=e.$yg.isEqualOrParent.bind(e.$yg),e.$Dg=e.$yg.getComparisonKey.bind(e.$yg),e.$Eg=e.$yg.basenameOrAuthority.bind(e.$yg),e.$Fg=e.$yg.basename.bind(e.$yg),e.$Gg=e.$yg.extname.bind(e.$yg),e.$Hg=e.$yg.dirname.bind(e.$yg),e.$Ig=e.$yg.joinPath.bind(e.$yg),e.$Jg=e.$yg.normalizePath.bind(e.$yg),e.$Kg=e.$yg.relativePath.bind(e.$yg),e.$Lg=e.$yg.resolvePath.bind(e.$yg),e.$Mg=e.$yg.isAbsolutePath.bind(e.$yg),e.$Ng=e.$yg.isEqualAuthority.bind(e.$yg),e.$Og=e.$yg.hasTrailingPathSeparator.bind(e.$yg),e.$Pg=e.$yg.removeTrailingPathSeparator.bind(e.$yg),e.$Qg=e.$yg.addTrailingPathSeparator.bind(e.$yg);function F(h,n){const a=[];for(let m=0;m<h.length;m++){const j=n(h[m]);h.some((S,w)=>w===m?!1:(0,e.$Cg)(j,n(S)))||a.push(h[m])}return a}e.$Rg=F;var G;(function(h){h.META_DATA_LABEL="label",h.META_DATA_DESCRIPTION="description",h.META_DATA_SIZE="size",h.META_DATA_MIME="mime";function n(a){const m=new Map;a.path.substring(a.path.indexOf(";")+1,a.path.lastIndexOf(";")).split(";").forEach(w=>{const[z,ne]=w.split(":");z&&ne&&m.set(z,ne)});const S=a.path.substring(0,a.path.indexOf(";"));return S&&m.set(h.META_DATA_MIME,S),m}h.parseMetaData=n})(G||(e.DataUri=G={}));function b(h,n,a){if(n){let m=h.path;return m&&m[0]!==L.$gc.sep&&(m=L.$gc.sep+m),h.with({scheme:a,authority:n,path:m})}return h.with({scheme:a})}e.$Sg=b}),define(oe[8],he([0,1,13,12,17,18,7,2,10,19]),function(le,e,O,M,L,v,$,D,U,V){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$xh=e.$wh=e.$vh=e.$uh=e.$th=e.$sh=e.Promises=e.$rh=e.$qh=e.$ph=e.$oh=e.$nh=e.$mh=e.$lh=e.$kh=e.$jh=e.$ih=e.$hh=e.$gh=e.$fh=e.$eh=e.$dh=e.$ch=e.$bh=e.$ah=e.$_g=e.$$g=e.$0g=e.$9g=e.$8g=e.$7g=e.$6g=e.$5g=e.$4g=e.$3g=e.$2g=e.$1g=e.$Zg=e.$Yg=e.$Xg=e.$Wg=e.$Vg=e.$Ug=e.$Tg=void 0;function F(l){return!!l&&typeof l.then=="function"}e.$Tg=F;function G(l){const t=new O.$7d,i=l(t.token),r=new Promise((f,E)=>{const p=t.token.onCancellationRequested(()=>{p.dispose(),E(new M.$5)});Promise.resolve(i).then(te=>{p.dispose(),t.dispose(),f(te)},te=>{p.dispose(),t.dispose(),E(te)})});return new class{cancel(){t.cancel(),t.dispose()}then(f,E){return r.then(f,E)}catch(f){return this.then(void 0,f)}finally(f){return r.finally(f)}}}e.$Ug=G;function b(l,t,i){return new Promise((r,f)=>{const E=t.onCancellationRequested(()=>{E.dispose(),r(i)});l.then(r,f).finally(()=>E.dispose())})}e.$Vg=b;function h(l,t){return new Promise((i,r)=>{const f=t.onCancellationRequested(()=>{f.dispose(),r(new M.$5)});l.then(i,r).finally(()=>f.dispose())})}e.$Wg=h;async function n(l){let t=-1;const i=l.map((r,f)=>r.then(E=>(t=f,E)));try{return await Promise.race(i)}finally{l.forEach((r,f)=>{f!==t&&r.cancel()})}}e.$Xg=n;function a(l,t,i){let r;const f=setTimeout(()=>{r?.(void 0),i?.()},t);return Promise.race([l.finally(()=>clearTimeout(f)),new Promise(E=>r=E)])}e.$Yg=a;function m(l){return new Promise((t,i)=>{const r=l();F(r)?r.then(t,i):t(r)})}e.$Zg=m;class j{constructor(){this.f=!1,this.a=null,this.b=null,this.d=null}queue(t){if(this.f)return Promise.reject(new Error("Throttler is disposed"));if(this.a){if(this.d=t,!this.b){const i=()=>{if(this.b=null,this.f)return;const r=this.queue(this.d);return this.d=null,r};this.b=new Promise(r=>{this.a.then(i,i).then(r)})}return new Promise((i,r)=>{this.b.then(i,r)})}return this.a=t(),new Promise((i,r)=>{this.a.then(f=>{this.a=null,i(f)},f=>{this.a=null,r(f)})})}dispose(){this.f=!0}}e.$1g=j;class S{constructor(){this.a=Promise.resolve(null)}queue(t){return this.a=this.a.then(()=>t(),()=>t())}}e.$2g=S;class w{constructor(){this.a=new Map}queue(t,i){const f=(this.a.get(t)??Promise.resolve()).catch(()=>{}).then(i).finally(()=>{this.a.get(t)===f&&this.a.delete(t)});return this.a.set(t,f),f}}e.$3g=w;const z=(l,t)=>{let i=!0;const r=setTimeout(()=>{i=!1,t()},l);return{isTriggered:()=>i,dispose:()=>{clearTimeout(r),i=!1}}},ne=l=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,l())}),{isTriggered:()=>t,dispose:()=>{t=!1}}};class P{constructor(t){this.defaultDelay=t,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(t,i=this.defaultDelay){this.g=t,this.h(),this.b||(this.b=new Promise((f,E)=>{this.d=f,this.f=E}).then(()=>{if(this.b=null,this.d=null,this.g){const f=this.g;return this.g=null,f()}}));const r=()=>{this.a=null,this.d?.(null)};return this.a=i===U.$Td?ne(r):z(i,r),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new M.$5),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}}e.$4g=P;class q{constructor(t){this.a=new P(t),this.b=new j}trigger(t,i){return this.a.trigger(()=>this.b.queue(t),i)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose(),this.b.dispose()}}e.$5g=q;class C{constructor(){this.a=!1,this.b=new Promise((t,i)=>{this.d=t})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}}e.$6g=C;class X extends C{constructor(t){super(),this.f=setTimeout(()=>this.open(),t)}open(){clearTimeout(this.f),super.open()}}e.$7g=X;function _(l,t){return t?new Promise((i,r)=>{const f=setTimeout(()=>{E.dispose(),i()},l),E=t.onCancellationRequested(()=>{clearTimeout(f),E.dispose(),r(new M.$5)})}):G(i=>_(l,i))}e.$8g=_;function s(l,t=0,i){const r=setTimeout(()=>{l(),i&&f.dispose()},t),f=(0,v.$Rc)(()=>{clearTimeout(r),i?.deleteAndLeak(f)});return i?.add(f),f}e.$9g=s;function o(l){const t=[];let i=0;const r=l.length;function f(){return i<r?l[i++]():null}function E(p){p!=null&&t.push(p);const te=f();return te?te.then(E):Promise.resolve(t)}return Promise.resolve(null).then(E)}e.$0g=o;function A(l,t=r=>!!r,i=null){let r=0;const f=l.length,E=()=>{if(r>=f)return Promise.resolve(i);const p=l[r++];return Promise.resolve(p()).then(fe=>t(fe)?Promise.resolve(fe):E())};return E()}e.$$g=A;function B(l,t=r=>!!r,i=null){if(l.length===0)return Promise.resolve(i);let r=l.length;const f=()=>{r=-1;for(const E of l)E.cancel?.()};return new Promise((E,p)=>{for(const te of l)te.then(fe=>{--r>=0&&t(fe)?(f(),E(fe)):r===0&&E(i)}).catch(fe=>{--r>=0&&(f(),p(fe))})})}e.$_g=B;class K{constructor(t){this.a=0,this.b=!1,this.f=t,this.g=[],this.d=0,this.h=new L.$Wd}whenIdle(){return this.size>0?L.Event.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this.h.event}get size(){return this.a}queue(t){if(this.b)throw new Error("Object has been disposed");return this.a++,new Promise((i,r)=>{this.g.push({factory:t,c:i,e:r}),this.j()})}j(){for(;this.g.length&&this.d<this.f;){const t=this.g.shift();this.d++;const i=t.factory();i.then(t.c,t.e),i.then(()=>this.k(),()=>this.k())}}k(){this.b||(this.d--,--this.a===0&&this.h.fire(),this.g.length>0&&this.j())}clear(){if(this.b)throw new Error("Object has been disposed");this.g.length=0,this.a=this.d}dispose(){this.b=!0,this.g.length=0,this.a=0,this.h.dispose()}}e.$ah=K;class N extends K{constructor(){super(1)}}e.$bh=N;class Y{constructor(){this.a=new c,this.b=0}queue(t){return this.a.isRunning()?this.a.queue(()=>this.a.run(this.b++,t())):this.a.run(this.b++,t())}}e.$ch=Y;class ae{constructor(){this.a=new Map,this.b=new Set,this.d=void 0,this.f=0}async whenDrained(){if(this.g())return;const t=new T;return this.b.add(t),t.p}g(){for(const[,t]of this.a)if(t.size>0)return!1;return!0}queueSize(t,i=$.$yg){const r=i.getComparisonKey(t);return this.a.get(r)?.size??0}queueFor(t,i,r=$.$yg){const f=r.getComparisonKey(t);let E=this.a.get(f);if(!E){E=new N;const p=this.f++,te=L.Event.once(E.onDrained)(()=>{E?.dispose(),this.a.delete(f),this.h(),this.d?.deleteAndDispose(p),this.d?.size===0&&(this.d.dispose(),this.d=void 0)});this.d||(this.d=new v.$3c),this.d.set(p,te),this.a.set(f,E)}return E.queue(i)}h(){this.g()&&this.j()}j(){for(const t of this.b)t.complete();this.b.clear()}dispose(){for(const[,t]of this.a)t.dispose();this.a.clear(),this.j(),this.d?.dispose()}}e.$dh=ae;class ce{constructor(t,i){this.a=-1,typeof t=="function"&&typeof i=="number"&&this.setIfNotSet(t,i)}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearTimeout(this.a),this.a=-1)}cancelAndSet(t,i){this.cancel(),this.a=setTimeout(()=>{this.a=-1,t()},i)}setIfNotSet(t,i){this.a===-1&&(this.a=setTimeout(()=>{this.a=-1,t()},i))}}e.$eh=ce;class ie{constructor(){this.d=void 0}cancel(){this.d?.dispose(),this.d=void 0}cancelAndSet(t,i,r=globalThis){this.cancel();const f=r.setInterval(()=>{t()},i);this.d=(0,v.$Rc)(()=>{r.clearInterval(f),this.d=void 0})}dispose(){this.cancel()}}e.$fh=ie;class ue{constructor(t,i){this.b=-1,this.a=t,this.d=i,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(t=this.d){this.cancel(),this.b=setTimeout(this.f,t)}get delay(){return this.d}set delay(t){this.d=t}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}}e.$gh=ue;class H{constructor(t,i){i%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${i}ms is not a multiple of 1000ms.`),this.a=t,this.b=i,this.d=0,this.f=-1,this.g=this.h.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearInterval(this.f),this.f=-1)}schedule(t=this.b){t%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${t}ms is not a multiple of 1000ms.`),this.cancel(),this.d=Math.ceil(t/1e3),this.f=setInterval(this.g,1e3)}isScheduled(){return this.f!==-1}h(){this.d--,!(this.d>0)&&(clearInterval(this.f),this.f=-1,this.a?.())}}e.$hh=H;class x extends ue{constructor(t,i){super(t,i),this.j=[]}work(t){this.j.push(t),this.isScheduled()||this.schedule()}h(){const t=this.j;this.j=[],this.a?.(t)}dispose(){this.j=[],super.dispose()}}e.$ih=x;class Z extends v.$Tc{constructor(t,i){super(),this.g=t,this.h=i,this.a=[],this.b=this.B(new v.$Uc),this.f=!1}get pending(){return this.a.length}work(t){if(this.f)return!1;if(typeof this.g.maxBufferedWork=="number"){if(this.b.value){if(this.pending+t.length>this.g.maxBufferedWork)return!1}else if(this.pending+t.length-this.g.maxWorkChunkSize>this.g.maxBufferedWork)return!1}for(const i of t)this.a.push(i);return this.b.value||this.j(),!0}j(){this.h(this.a.splice(0,this.g.maxWorkChunkSize)),this.a.length>0&&(this.b.value=new ue(()=>{this.b.clear(),this.j()},this.g.throttleDelay),this.b.value.schedule())}dispose(){super.dispose(),this.f=!0}}e.$jh=Z,function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?e.$lh=(l,t)=>{(0,D.$B)(()=>{if(i)return;const r=Date.now()+15;t(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,r-Date.now())}}))});let i=!1;return{dispose(){i||(i=!0)}}}:e.$lh=(l,t,i)=>{const r=l.requestIdleCallback(t,typeof i=="number"?{timeout:i}:void 0);let f=!1;return{dispose(){f||(f=!0,l.cancelIdleCallback(r))}}},e.$kh=l=>(0,e.$lh)(globalThis,l)}();class se{constructor(t,i){this.g=!1,this.d=()=>{try{this.j=i()}catch(r){this.l=r}finally{this.g=!0}},this.f=(0,e.$lh)(t,()=>this.d())}dispose(){this.f.dispose()}get value(){if(this.g||(this.f.dispose(),this.d()),this.l)throw this.l;return this.j}get isInitialized(){return this.g}}e.$mh=se;class u extends se{constructor(t){super(globalThis,t)}}e.$nh=u;async function d(l,t,i){let r;for(let f=0;f<i;f++)try{return await l()}catch(E){r=E,await _(t)}throw r}e.$oh=d;class c{isRunning(t){return typeof t=="number"?this.a?.taskId===t:!!this.a}get running(){return this.a?.promise}cancelRunning(){this.a?.cancel()}run(t,i,r){return this.a={taskId:t,cancel:()=>r?.(),promise:i},i.then(()=>this.d(t),()=>this.d(t)),i}d(t){this.a&&t===this.a.taskId&&(this.a=void 0,this.f())}f(){if(this.b){const t=this.b;this.b=void 0,t.run().then(t.promiseResolve,t.promiseReject)}}queue(t){if(this.b)this.b.run=t;else{let i,r;const f=new Promise((E,p)=>{i=E,r=p});this.b={run:t,promise:f,promiseResolve:i,promiseReject:r}}return this.b.promise}hasQueued(){return!!this.b}async join(){return this.b?.promise??this.a?.promise}}e.$ph=c;class R{constructor(t,i=()=>Date.now()){this.d=t,this.f=i,this.a=0,this.b=0}increment(){const t=this.f();return t-this.a>this.d&&(this.a=t,this.b=0),this.b++,this.b}}e.$qh=R;var y;(function(l){l[l.Resolved=0]="Resolved",l[l.Rejected=1]="Rejected"})(y||(y={}));class T{get isRejected(){return this.d?.outcome===1}get isResolved(){return this.d?.outcome===0}get isSettled(){return!!this.d}get value(){return this.d?.outcome===0?this.d?.value:void 0}constructor(){this.p=new Promise((t,i)=>{this.a=t,this.b=i})}complete(t){return new Promise(i=>{this.a(t),this.d={outcome:0,value:t},i()})}error(t){return new Promise(i=>{this.b(t),this.d={outcome:1,value:t},i()})}cancel(){return this.error(new M.$5)}}e.$rh=T;var Q;(function(l){async function t(r){let f;const E=await Promise.all(r.map(p=>p.then(te=>te,te=>{f||(f=te)})));if(typeof f<"u")throw f;return E}l.settled=t;function i(r){return new Promise(async(f,E)=>{try{await r(f,E)}catch(p){E(p)}})}l.withAsyncBody=i})(Q||(e.Promises=Q={}));class g{get value(){return this.a}get error(){return this.b}get isResolved(){return this.d}constructor(t){this.a=void 0,this.b=void 0,this.d=!1,this.promise=t.then(i=>(this.a=i,this.d=!0,i),i=>{throw this.b=i,this.d=!0,i})}requireValue(){if(!this.d)throw new M.$cb("Promise is not resolved yet");if(this.b)throw this.b;return this.a}}e.$sh=g;class I{constructor(t){this.b=t,this.a=new V.$V(()=>new g(this.b()))}requireValue(){return this.a.value.requireValue()}getPromise(){return this.a.value.promise}get currentValue(){return this.a.rawValue?.value}}e.$th=I;var W;(function(l){l[l.Initial=0]="Initial",l[l.DoneOK=1]="DoneOK",l[l.DoneError=2]="DoneError"})(W||(W={}));class k{static fromArray(t){return new k(i=>{i.emitMany(t)})}static fromPromise(t){return new k(async i=>{i.emitMany(await t)})}static fromPromises(t){return new k(async i=>{await Promise.all(t.map(async r=>i.emitOne(await r)))})}static merge(t){return new k(async i=>{await Promise.all(t.map(async r=>{for await(const f of r)i.emitOne(f)}))})}static{this.EMPTY=k.fromArray([])}constructor(t){this.a=0,this.b=[],this.d=null,this.f=new L.$Wd,queueMicrotask(async()=>{const i={emitOne:r=>this.g(r),emitMany:r=>this.h(r),reject:r=>this.k(r)};try{await Promise.resolve(t(i)),this.j()}catch(r){this.k(r)}finally{i.emitOne=void 0,i.emitMany=void 0,i.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(t<this.b.length)return{done:!1,value:this.b[t++]};if(this.a===1)return{done:!0,value:void 0};await L.Event.toPromise(this.f.event)}while(!0)}}}static map(t,i){return new k(async r=>{for await(const f of t)r.emitOne(i(f))})}map(t){return k.map(this,t)}static filter(t,i){return new k(async r=>{for await(const f of t)i(f)&&r.emitOne(f)})}filter(t){return k.filter(this,t)}static coalesce(t){return k.filter(t,i=>!!i)}coalesce(){return k.coalesce(this)}static async toPromise(t){const i=[];for await(const r of t)i.push(r);return i}toPromise(){return k.toPromise(this)}g(t){this.a===0&&(this.b.push(t),this.f.fire())}h(t){this.a===0&&(this.b=this.b.concat(t),this.f.fire())}j(){this.a===0&&(this.a=1,this.f.fire())}k(t){this.a===0&&(this.a=2,this.d=t,this.f.fire())}}e.$uh=k;class J extends k{constructor(t,i){super(i),this.l=t}cancel(){this.l.cancel()}}e.$vh=J;function ee(l){const t=new O.$7d,i=l(t.token);return new J(t,async r=>{const f=t.token.onCancellationRequested(()=>{f.dispose(),t.dispose(),r.reject(new M.$5)});try{for await(const E of i){if(t.token.isCancellationRequested)return;r.emitOne(E)}f.dispose(),t.dispose()}catch(E){f.dispose(),t.dispose(),r.reject(E)}})}e.$wh=ee;class re{constructor(){this.a=new T,this.b=new k(r=>{if(t){r.reject(t);return}return i&&r.emitMany(i),this.d=f=>r.reject(f),this.f=f=>r.emitOne(f),this.a.p});let t,i;this.f=r=>{i||(i=[]),i.push(r)},this.d=r=>{t||(t=r)}}get asyncIterable(){return this.b}resolve(){this.a.complete()}reject(t){this.d(t),this.a.complete()}emitOne(t){this.f(t)}}e.$xh=re}),define(oe[9],he([0,1,20,8,5,21,4,2,3]),function(le,e,O,M,L,v,$,D,U){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$Rj=e.$Qj=e.$Pj=e.$Oj=e.$Nj=e.$Mj=e.$Lj=e.$Kj=e.$Jj=e.$Ij=void 0;function V(){return Object.create(null)}e.$Ij=V,e.$Jj="**",e.$Kj="/";const F="[/\\\\]",G="[^/\\\\]",b=/\//g;function h(u,d){switch(u){case 0:return"";case 1:return`${G}*?`;default:return`(?:${F}|${G}+${F}${d?`|${F}${G}+`:""})*?`}}function n(u,d){if(!u)return[];const c=[];let R=!1,y=!1,T="";for(const Q of u){switch(Q){case d:if(!R&&!y){c.push(T),T="";continue}break;case"{":R=!0;break;case"}":R=!1;break;case"[":y=!0;break;case"]":y=!1;break}T+=Q}return T&&c.push(T),c}e.$Lj=n;function a(u){if(!u)return"";let d="";const c=n(u,e.$Kj);if(c.every(R=>R===e.$Jj))d=".*";else{let R=!1;c.forEach((y,T)=>{if(y===e.$Jj){if(R)return;d+=h(2,T===c.length-1)}else{let Q=!1,g="",I=!1,W="";for(const k of y){if(k!=="}"&&Q){g+=k;continue}if(I&&(k!=="]"||!W)){let J;k==="-"?J=k:(k==="^"||k==="!")&&!W?J="^":k===e.$Kj?J="":J=(0,U.$Pe)(k),W+=J;continue}switch(k){case"{":Q=!0;continue;case"[":I=!0;continue;case"}":{const ee=`(?:${n(g,",").map(re=>a(re)).join("|")})`;d+=ee,Q=!1,g="";break}case"]":{d+="["+W+"]",I=!1,W="";break}case"?":d+=G;continue;case"*":d+=h(1);continue;default:d+=(0,U.$Pe)(k)}}T<c.length-1&&(c[T+1]!==e.$Jj||T+2<c.length)&&(d+=F)}R=y===e.$Jj})}return d}const m=/^\*\*\/\*\.[\w\.-]+$/,j=/^\*\*\/([\w\.-]+)\/?$/,S=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,w=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,z=/^\*\*((\/[\w\.-]+)+)\/?$/,ne=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,P=new v.$Dc(1e4),q=function(){return!1},C=function(){return null};function X(u,d){if(!u)return C;let c;typeof u!="string"?c=u.pattern:c=u,c=c.trim();const R=`${c}_${!!d.trimForExclusions}`;let y=P.get(R);if(y)return _(y,u);let T;return m.test(c)?y=o(c.substr(4),c):(T=j.exec(s(c,d)))?y=A(T[1],c):(d.trimForExclusions?w:S).test(c)?y=B(c,d):(T=z.exec(s(c,d)))?y=K(T[1].substr(1),c,!0):(T=ne.exec(s(c,d)))?y=K(T[1],c,!1):y=N(c),P.set(R,y),_(y,u)}function _(u,d){if(typeof d=="string")return u;const c=function(R,y){return(0,L.$9f)(R,d.base,!D.$k)?u((0,U.$Ue)(R.substr(d.base.length),$.sep),y):null};return c.allBasenames=u.allBasenames,c.allPaths=u.allPaths,c.basenames=u.basenames,c.patterns=u.patterns,c}function s(u,d){return d.trimForExclusions&&u.endsWith("/**")?u.substr(0,u.length-2):u}function o(u,d){return function(c,R){return typeof c=="string"&&c.endsWith(u)?d:null}}function A(u,d){const c=`/${u}`,R=`\\${u}`,y=function(Q,g){return typeof Q!="string"?null:g?g===u?d:null:Q===u||Q.endsWith(c)||Q.endsWith(R)?d:null},T=[u];return y.basenames=T,y.patterns=[d],y.allBasenames=T,y}function B(u,d){const c=Z(u.slice(1,-1).split(",").map(g=>X(g,d)).filter(g=>g!==C),u),R=c.length;if(!R)return C;if(R===1)return c[0];const y=function(g,I){for(let W=0,k=c.length;W<k;W++)if(c[W](g,I))return u;return null},T=c.find(g=>!!g.allBasenames);T&&(y.allBasenames=T.allBasenames);const Q=c.reduce((g,I)=>I.allPaths?g.concat(I.allPaths):g,[]);return Q.length&&(y.allPaths=Q),y}function K(u,d,c){const R=$.sep===$.$gc.sep,y=R?u:u.replace(b,$.sep),T=$.sep+y,Q=$.$gc.sep+u;let g;return c?g=function(I,W){return typeof I=="string"&&(I===y||I.endsWith(T)||!R&&(I===u||I.endsWith(Q)))?d:null}:g=function(I,W){return typeof I=="string"&&(I===y||!R&&I===u)?d:null},g.allPaths=[(c?"*/":"./")+u],g}function N(u){try{const d=new RegExp(`^${a(u)}$`);return function(c){return d.lastIndex=0,typeof c=="string"&&d.test(c)?u:null}}catch{return C}}function Y(u,d,c){return!u||typeof d!="string"?!1:ae(u)(d,void 0,c)}e.$Mj=Y;function ae(u,d={}){if(!u)return q;if(typeof u=="string"||ce(u)){const c=X(u,d);if(c===C)return q;const R=function(y,T){return!!c(y,T)};return c.allBasenames&&(R.allBasenames=c.allBasenames),c.allPaths&&(R.allPaths=c.allPaths),R}return H(u,d)}e.$Nj=ae;function ce(u){const d=u;return d?typeof d.base=="string"&&typeof d.pattern=="string":!1}e.$Oj=ce;function ie(u){return u.allBasenames||[]}e.$Pj=ie;function ue(u){return u.allPaths||[]}e.$Qj=ue;function H(u,d){const c=Z(Object.getOwnPropertyNames(u).map(g=>x(g,u[g],d)).filter(g=>g!==C)),R=c.length;if(!R)return C;if(!c.some(g=>!!g.requiresSiblings)){if(R===1)return c[0];const g=function(k,J){let ee;for(let re=0,l=c.length;re<l;re++){const t=c[re](k,J);if(typeof t=="string")return t;(0,M.$Tg)(t)&&(ee||(ee=[]),ee.push(t))}return ee?(async()=>{for(const re of ee){const l=await re;if(typeof l=="string")return l}return null})():null},I=c.find(k=>!!k.allBasenames);I&&(g.allBasenames=I.allBasenames);const W=c.reduce((k,J)=>J.allPaths?k.concat(J.allPaths):k,[]);return W.length&&(g.allPaths=W),g}const y=function(g,I,W){let k,J;for(let ee=0,re=c.length;ee<re;ee++){const l=c[ee];l.requiresSiblings&&W&&(I||(I=(0,$.$nc)(g)),k||(k=I.substr(0,I.length-(0,$.$oc)(g).length)));const t=l(g,I,k,W);if(typeof t=="string")return t;(0,M.$Tg)(t)&&(J||(J=[]),J.push(t))}return J?(async()=>{for(const ee of J){const re=await ee;if(typeof re=="string")return re}return null})():null},T=c.find(g=>!!g.allBasenames);T&&(y.allBasenames=T.allBasenames);const Q=c.reduce((g,I)=>I.allPaths?g.concat(I.allPaths):g,[]);return Q.length&&(y.allPaths=Q),y}function x(u,d,c){if(d===!1)return C;const R=X(u,c);if(R===C)return C;if(typeof d=="boolean")return R;if(d){const y=d.when;if(typeof y=="string"){const T=(Q,g,I,W)=>{if(!W||!R(Q,g))return null;const k=y.replace("$(basename)",()=>I),J=W(k);return(0,M.$Tg)(J)?J.then(ee=>ee?u:null):J?u:null};return T.requiresSiblings=!0,T}}return R}function Z(u,d){const c=u.filter(g=>!!g.basenames);if(c.length<2)return u;const R=c.reduce((g,I)=>{const W=I.basenames;return W?g.concat(W):g},[]);let y;if(d){y=[];for(let g=0,I=R.length;g<I;g++)y.push(d)}else y=c.reduce((g,I)=>{const W=I.patterns;return W?g.concat(W):g},[]);const T=function(g,I){if(typeof g!="string")return null;if(!I){let k;for(k=g.length;k>0;k--){const J=g.charCodeAt(k-1);if(J===47||J===92)break}I=g.substr(k)}const W=R.indexOf(I);return W!==-1?y[W]:null};T.basenames=R,T.patterns=y,T.allBasenames=R;const Q=u.filter(g=>!g.basenames);return Q.push(T),Q}function se(u,d){return(0,O.$ub)(u,d,(c,R)=>typeof c=="string"&&typeof R=="string"?c===R:typeof c!="string"&&typeof R!="string"?c.base===R.base&&c.pattern===R.pattern:!1)}e.$Rj=se}),define(oe[14],he([0,1,22]),function(le,e,O){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$6lc=void 0;const M=(L,v,$)=>{let D;if(L[0]===255&&L[1]===254)D=new TextDecoder("utf-16le").decode(L);else if(L[0]===254&&L[1]===255)D=new TextDecoder("utf-16be").decode(L);else if(D=new TextDecoder("utf8").decode(L),D.slice(0,1e3).includes("\uFFFD")&&L.includes(0))return[];const U=[],V=[];let F=null,G=$.remainingResultQuota;for(;G>=0&&(F=v.exec(D));)V.push({matchStartIndex:F.index,matchedText:F[0]}),G--;if(V.length){const b=new Set,h=new Set,n=[],a=z=>D.slice(n[z].start,n[z].end);let m=0,j=null;const S=/\r?\n/g;for(;j=S.exec(D);)n.push({start:m,end:j.index}),m=j.index+j[0].length;m<D.length&&n.push({start:m,end:D.length});let w=0;for(const{matchStartIndex:z,matchedText:ne}of V){if(G<0)break;for(;n[w+1]&&z>n[w].end;)w++;let P=w;for(;n[P+1]&&z+ne.length>n[P].end;)P++;if($.beforeContext)for(let o=Math.max(0,w-$.beforeContext);o<w;o++)b.add(o);let q="",C=0;for(let o=w;o<=P;o++){let A=a(o);$.previewOptions?.charsPerLine&&A.length>$.previewOptions.charsPerLine&&(C=Math.max(z-n[w].start-20,0),A=A.substr(C,$.previewOptions.charsPerLine)),q+=`${A}
`,h.add(o)}const X=new O.$Vs(w,z-n[w].start,P,z+ne.length-n[P].start),_=new O.$Vs(0,z-n[w].start-C,P-w,z+ne.length-n[P].start-(P===w?C:0)),s={ranges:X,preview:{text:q,matches:_}};if(U.push(s),$.afterContext)for(let o=P+1;o<=Math.min(P+$.afterContext,n.length-1);o++)b.add(o)}for(const z of b)h.has(z)||U.push({text:a(z),lineNumber:z+1})}return U};e.$6lc=M}),define(oe[15],he([0,1,9]),function(le,e,O){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.$akb=void 0;class M{constructor(v,$,D){if(this.b=$,this.c=D,$[$.length-1]==="\\")throw Error("Unexpected path format, do not use trailing backslashes");$[$.length-1]!=="/"&&($+="/"),this.a=this.e(v,this.b,this.c)}updateContents(v){this.a=this.e(v,this.b,this.c)}isPathIncludedInTraversal(v,$){if(v[0]!=="/"||v[v.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+v);return!this.a(v,$)}isArbitraryPathIgnored(v,$){if(v[0]!=="/"||v[v.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+v);const D=v.split("/").filter(F=>F);let U=!1,V="";for(let F=0;F<D.length;F++){const G=F===D.length-1,b=D[F];if(V=V+"/"+b,!this.isPathIncludedInTraversal(V,G?$:!0)){U=!0;break}}return U}d(v,$,D){const U=v.map(F=>this.f(F,$)),V=Object.create(null);for(const F of U)V[F]=!0;return O.$Nj(V,{trimForExclusions:D})}e(v,$,D){const U=v.split(`
`).map(w=>w.trim()).filter(w=>w&&w[0]!=="#"),V=U.filter(w=>!w.endsWith("/")),F=V.filter(w=>!w.includes("!")),G=this.d(F,$,!0),b=V.filter(w=>w.includes("!")).map(w=>w.replace(/!/g,"")),h=this.d(b,$,!1),n=U.filter(w=>!w.includes("!")),a=this.d(n,$,!0),m=U.filter(w=>w.includes("!")).map(w=>w.replace(/!/g,"")),j=this.d(m,$,!1);return(w,z)=>w.startsWith($)?z&&a(w)&&!j(w)||G(w)&&!h(w)?!0:D?D.a(w,z):!1:!1}f(v,$){const D=v.indexOf("/");return D===-1||D===v.length-1?v="**/"+v:(D===0?$.slice(-1)==="/"&&(v=v.slice(1)):$.slice(-1)!=="/"&&(v="/"+v),v=$+v),v}}e.$akb=M}),define(oe[23],he([0,1,9,6,4,13,14,15,3,8,7]),function(le,e,O,M,L,v,$,D,U,V,F){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LocalFileSearchSimpleWorker=e.create=void 0;const G=!1,b=+new Date,h={},n=async(P,q)=>{if(!G)return q();const C=Date.now(),X=(h[P]??0)+1;console.info(P,X,"starting",Math.round((C-b)*10)/1e4),h[P]=X;const _=await q(),s=Date.now();return console.info(P,X,"took",s-C),_};function a(P){return new m(P)}e.create=a;class m{constructor(q){this.d=q,this.cancellationTokens=new Map}cancelQuery(q){this.cancellationTokens.get(q)?.cancel()}g(q){const C=new v.$7d;return this.cancellationTokens.set(q,C),C}async listDirectory(q,C,X,_,s){const o=S(X),A=new F.$xg(()=>_),B=this.g(s),K=[];let N=!1,Y=0;const ae=C.maxResults||512,ce=C.filePattern?ie=>C.filePattern.split("").every(ue=>ie.includes(ue)):ie=>!0;return await n("listDirectory",()=>this.h(q,w(C),o,A,ie=>{if(ce(ie.name))return Y++,ae&&Y>ae&&(N=!0,B.cancel()),K.push(ie.path)},B.token)),{results:K,limitHit:N}}async searchDirectory(q,C,X,_,s){const o=S(X),A=new F.$xg(()=>_);return n("searchInFiles",async()=>{const B=this.g(s),K=[],N=j(C.contentPattern),Y=[];let ae=0,ce=0;const ie=!1,ue=async H=>{if(B.token.isCancellationRequested)return;ae++;const x=await H.resolve();if(B.token.isCancellationRequested)return;const Z=new Uint8Array(x),se=(0,$.$6lc)(Z,N,{afterContext:C.afterContext??0,beforeContext:C.beforeContext??0,previewOptions:C.previewOptions,remainingResultQuota:C.maxResults?C.maxResults-ce:1e4});if(se.length){ce+=se.length,C.maxResults&&ce>C.maxResults&&B.cancel();const u={resource:M.URI.joinPath(o.folder,H.path),results:se};this.d.sendTextSearchMatch(u,s),K.push(u)}};return await n("walkFolderToResolve",()=>this.h(q,w(C),o,A,async H=>Y.push(ue(H)),B.token)),await n("resolveOngoingProcesses",()=>Promise.all(Y)),G&&console.log("Searched in",ae,"files"),{results:K,limitHit:ie}})}async h(q,C,X,_,s,o){const A=O.$Nj(X.excludePattern??{},{trimForExclusions:!0}),B=(H,x,Z)=>(H=H.slice(1),!!(A(H,x,Z)||z(C,H))),K=(H,x,Z)=>(H=H.slice(1),!(A(H,x,Z)||!ne(C,H,_))),N=(H,x)=>({type:"file",name:H.name,path:x,resolve:()=>H.getFile().then(se=>se.arrayBuffer())}),Y=H=>H.kind==="directory",ae=H=>H.kind==="file",ce=async(H,x,Z)=>{if(!X.disregardIgnoreFiles){const u=await Promise.all([H.getFileHandle(".gitignore").catch(d=>{}),H.getFileHandle(".ignore").catch(d=>{})]);await Promise.all(u.map(async d=>{if(!d)return;const c=new TextDecoder("utf8").decode(new Uint8Array(await(await d.getFile()).arrayBuffer()));Z=new D.$akb(c,x,Z)}))}const se=V.Promises.withAsyncBody(async u=>{const d=[],c=[],R=[],y=new Set;for await(const T of H.entries())R.push(T),y.add(T[0]);for(const[T,Q]of R){if(o.isCancellationRequested)break;const g=x+T;if(Z&&!Z.isPathIncludedInTraversal(g,Q.kind==="directory"))continue;const I=W=>y.has(W);Y(Q)&&!B(g,T,I)?c.push(ce(Q,g+"/",Z)):ae(Q)&&K(g,T,I)&&d.push(N(Q,g))}u([...await Promise.all(c),...d])});return{type:"dir",name:H.name,entries:se}},ie=async(H,x)=>{o.isCancellationRequested||await Promise.all((await H.entries).sort((Z,se)=>-(Z.type==="dir"?0:1)+(se.type==="dir"?0:1)).map(async Z=>Z.type==="dir"?ie(Z,x):x(Z)))},ue=await n("process",()=>ce(q,"/"));await n("resolve",()=>ie(ue,s))}}e.LocalFileSearchSimpleWorker=m;function j(P){return(0,U.$Ye)(P.pattern,!!P.isRegExp,{wholeWord:P.isWordMatch,global:!0,matchCase:P.isCaseSensitive,multiline:!0,unicode:!0})}function S(P){return{...P,folder:M.URI.revive(P.folder)}}function w(P){return{...P,extraFileResources:P.extraFileResources?.map(q=>M.URI.revive(q)),folderQueries:P.folderQueries.map(q=>S(q))}}function z(P,q){return!!(P.excludePattern&&O.$Mj(P.excludePattern,q))}function ne(P,q,C){return P.excludePattern&&O.$Mj(P.excludePattern,q)?!1:P.includePattern||P.usingSearchPaths?P.includePattern&&O.$Mj(P.includePattern,q)?!0:P.usingSearchPaths?!!P.folderQueries&&P.folderQueries.some(X=>{const _=X.folder,s=M.URI.file(q);if(C.isEqualOrParent(s,_)){const o=L.$lc(_.path,s.path);return!X.includePattern||!!O.$Mj(X.includePattern,o)}else return!1}):!1:!0}})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/903b1e9d8990623e3d7da1df3d33db3e42d80eda/core/vs/workbench/services/search/worker/localFileSearch.js.map
