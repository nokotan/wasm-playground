/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var te=["require","exports","vs/base/common/platform","vs/base/common/strings","vs/base/common/path","vs/base/common/errors","vs/base/common/buffer","vs/base/common/lifecycle","vs/base/common/extpath","vs/base/common/network","vs/base/common/uri","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeBase","vs/editor/common/core/range","vs/base/common/map","vs/base/common/stream","vs/base/common/symbols","vs/editor/common/core/eolCounter","vs/editor/common/model/pieceTreeTextBuffer/rbTreeBase","vs/base/common/mime","vs/base/common/resources","vs/base/common/async","vs/base/common/event","vs/base/common/glob","vs/editor/common/core/stringBuilder","vs/editor/common/core/textChange","vs/editor/common/model","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBuffer","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBufferBuilder","vs/platform/contextkey/common/scanner","vs/platform/instantiation/common/instantiation","vs/platform/contextkey/common/contextkey","vs/workbench/contrib/notebook/common/notebookCommon","vs/base/common/types","vs/base/common/cancellation","vs/base/common/arrays","vs/editor/common/core/position","vs/editor/common/model/textModelSearch","vs/base/common/iterator","vs/workbench/contrib/notebook/common/services/notebookSimpleWorker","vs/base/common/diff/diff","vs/base/common/hash"],ne=function(ee){for(var t=[],B=0,$=ee.length;B<$;B++)t[B]=te[ee[B]];return t};define(te[13],ne([0,1]),function(ee,t){"use strict";var B,$,U;Object.defineProperty(t,"__esModule",{value:!0}),t.LRUCache=t.LinkedMap=t.Touch=t.ResourceSet=t.ResourceMap=t.setToString=t.mapToString=t.getOrSet=void 0;function L(f,s,r){let o=f.get(s);return o===void 0&&(o=r,f.set(s,o)),o}t.getOrSet=L;function C(f){const s=[];return f.forEach((r,o)=>{s.push(`${o} => ${r}`)}),`Map(${f.size}) {${s.join(", ")}}`}t.mapToString=C;function q(f){const s=[];return f.forEach(r=>{s.push(r)}),`Set(${f.size}) {${s.join(", ")}}`}t.setToString=q;class F{constructor(s,r){this.uri=s,this.value=r}}class m{constructor(s,r){this[B]="ResourceMap",s instanceof m?(this.b=new Map(s.b),this.c=r??m.a):(this.b=new Map,this.c=s??m.a)}set(s,r){return this.b.set(this.c(s),new F(s,r)),this}get(s){return this.b.get(this.c(s))?.value}has(s){return this.b.has(this.c(s))}get size(){return this.b.size}clear(){this.b.clear()}delete(s){return this.b.delete(this.c(s))}forEach(s,r){typeof r<"u"&&(s=s.bind(r));for(const[o,n]of this.b)s(n.value,n.uri,this)}*values(){for(const s of this.b.values())yield s.value}*keys(){for(const s of this.b.values())yield s.uri}*entries(){for(const s of this.b.values())yield[s.uri,s.value]}*[(B=Symbol.toStringTag,Symbol.iterator)](){for(const[,s]of this.b)yield[s.uri,s.value]}}m.a=f=>f.toString(),t.ResourceMap=m;class S{constructor(s,r){this[$]="ResourceSet",!s||typeof s=="function"?this.a=new m(s):(this.a=new m(r),s.forEach(this.add,this))}get size(){return this.a.size}add(s){return this.a.set(s,s),this}clear(){this.a.clear()}delete(s){return this.a.delete(s)}forEach(s,r){this.a.forEach((o,n)=>s.call(r,n,n,this))}has(s){return this.a.has(s)}entries(){return this.a.entries()}keys(){return this.a.keys()}values(){return this.a.keys()}[($=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}t.ResourceSet=S;var D;(function(f){f[f.None=0]="None",f[f.AsOld=1]="AsOld",f[f.AsNew=2]="AsNew"})(D=t.Touch||(t.Touch={}));class w{constructor(){this[U]="LinkedMap",this.a=new Map,this.b=void 0,this.c=void 0,this.d=0,this.e=0}clear(){this.a.clear(),this.b=void 0,this.c=void 0,this.d=0,this.e++}isEmpty(){return!this.b&&!this.c}get size(){return this.d}get first(){return this.b?.value}get last(){return this.c?.value}has(s){return this.a.has(s)}get(s,r=0){const o=this.a.get(s);if(!!o)return r!==0&&this.j(o,r),o.value}set(s,r,o=0){let n=this.a.get(s);if(n)n.value=r,o!==0&&this.j(n,o);else{switch(n={key:s,value:r,next:void 0,previous:void 0},o){case 0:this.h(n);break;case 1:this.g(n);break;case 2:this.h(n);break;default:this.h(n);break}this.a.set(s,n),this.d++}return this}delete(s){return!!this.remove(s)}remove(s){const r=this.a.get(s);if(!!r)return this.a.delete(s),this.i(r),this.d--,r.value}shift(){if(!this.b&&!this.c)return;if(!this.b||!this.c)throw new Error("Invalid list");const s=this.b;return this.a.delete(s.key),this.i(s),this.d--,s.value}forEach(s,r){const o=this.e;let n=this.b;for(;n;){if(r?s.bind(r)(n.value,n.key,this):s(n.value,n.key,this),this.e!==o)throw new Error("LinkedMap got modified during iteration.");n=n.next}}keys(){const s=this,r=this.e;let o=this.b;const n={[Symbol.iterator](){return n},next(){if(s.e!==r)throw new Error("LinkedMap got modified during iteration.");if(o){const a={value:o.key,done:!1};return o=o.next,a}else return{value:void 0,done:!0}}};return n}values(){const s=this,r=this.e;let o=this.b;const n={[Symbol.iterator](){return n},next(){if(s.e!==r)throw new Error("LinkedMap got modified during iteration.");if(o){const a={value:o.value,done:!1};return o=o.next,a}else return{value:void 0,done:!0}}};return n}entries(){const s=this,r=this.e;let o=this.b;const n={[Symbol.iterator](){return n},next(){if(s.e!==r)throw new Error("LinkedMap got modified during iteration.");if(o){const a={value:[o.key,o.value],done:!1};return o=o.next,a}else return{value:void 0,done:!0}}};return n}[(U=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}f(s){if(s>=this.size)return;if(s===0){this.clear();return}let r=this.b,o=this.size;for(;r&&o>s;)this.a.delete(r.key),r=r.next,o--;this.b=r,this.d=o,r&&(r.previous=void 0),this.e++}g(s){if(!this.b&&!this.c)this.c=s;else if(this.b)s.next=this.b,this.b.previous=s;else throw new Error("Invalid list");this.b=s,this.e++}h(s){if(!this.b&&!this.c)this.b=s;else if(this.c)s.previous=this.c,this.c.next=s;else throw new Error("Invalid list");this.c=s,this.e++}i(s){if(s===this.b&&s===this.c)this.b=void 0,this.c=void 0;else if(s===this.b){if(!s.next)throw new Error("Invalid list");s.next.previous=void 0,this.b=s.next}else if(s===this.c){if(!s.previous)throw new Error("Invalid list");s.previous.next=void 0,this.c=s.previous}else{const r=s.next,o=s.previous;if(!r||!o)throw new Error("Invalid list");r.previous=o,o.next=r}s.next=void 0,s.previous=void 0,this.e++}j(s,r){if(!this.b||!this.c)throw new Error("Invalid list");if(!(r!==1&&r!==2)){if(r===1){if(s===this.b)return;const o=s.next,n=s.previous;s===this.c?(n.next=void 0,this.c=n):(o.previous=n,n.next=o),s.previous=void 0,s.next=this.b,this.b.previous=s,this.b=s,this.e++}else if(r===2){if(s===this.c)return;const o=s.next,n=s.previous;s===this.b?(o.previous=void 0,this.b=o):(o.previous=n,n.next=o),s.next=void 0,s.previous=this.c,this.c.next=s,this.c=s,this.e++}}}toJSON(){const s=[];return this.forEach((r,o)=>{s.push([o,r])}),s}fromJSON(s){this.clear();for(const[r,o]of s)this.set(r,o)}}t.LinkedMap=w;class M extends w{constructor(s,r=1){super(),this.k=s,this.l=Math.min(Math.max(0,r),1)}get limit(){return this.k}set limit(s){this.k=s,this.m()}get ratio(){return this.l}set ratio(s){this.l=Math.min(Math.max(0,s),1),this.m()}get(s,r=2){return super.get(s,r)}peek(s){return super.get(s,0)}set(s,r){return super.set(s,r,2),this.m(),this}m(){this.size>this.k&&this.f(Math.round(this.k*this.l))}}t.LRUCache=M}),define(te[14],ne([0,1,5,7]),function(ee,t,B,$){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prefixedStream=t.prefixedReadable=t.transform=t.toReadable=t.emptyStream=t.toStream=t.peekStream=t.listenStream=t.consumeStream=t.peekReadable=t.consumeReadable=t.newWriteableStream=t.isReadableBufferedStream=t.isReadableStream=t.isReadable=void 0;function U(i){const l=i;return l?typeof l.read=="function":!1}t.isReadable=U;function L(i){const l=i;return l?[l.on,l.pause,l.resume,l.destroy].every(h=>typeof h=="function"):!1}t.isReadableStream=L;function C(i){const l=i;return l?L(l.stream)&&Array.isArray(l.buffer)&&typeof l.ended=="boolean":!1}t.isReadableBufferedStream=C;function q(i,l){return new F(i,l)}t.newWriteableStream=q;class F{constructor(l,h){this.e=l,this.f=h,this.a={flowing:!1,ended:!1,destroyed:!1},this.b={data:[],error:[]},this.c={data:[],error:[],end:[]},this.d=[]}pause(){this.a.destroyed||(this.a.flowing=!1)}resume(){this.a.destroyed||this.a.flowing||(this.a.flowing=!0,this.j(),this.k(),this.l())}write(l){if(!this.a.destroyed){if(this.a.flowing)this.g(l);else if(this.b.data.push(l),typeof this.f?.highWaterMark=="number"&&this.b.data.length>this.f.highWaterMark)return new Promise(h=>this.d.push(h))}}error(l){this.a.destroyed||(this.a.flowing?this.h(l):this.b.error.push(l))}end(l){this.a.destroyed||(typeof l<"u"&&this.write(l),this.a.flowing?(this.i(),this.destroy()):this.a.ended=!0)}g(l){this.c.data.slice(0).forEach(h=>h(l))}h(l){this.c.error.length===0?(0,B.onUnexpectedError)(l):this.c.error.slice(0).forEach(h=>h(l))}i(){this.c.end.slice(0).forEach(l=>l())}on(l,h){if(!this.a.destroyed)switch(l){case"data":this.c.data.push(h),this.resume();break;case"end":this.c.end.push(h),this.a.flowing&&this.l()&&this.destroy();break;case"error":this.c.error.push(h),this.a.flowing&&this.k();break}}removeListener(l,h){if(this.a.destroyed)return;let p;switch(l){case"data":p=this.c.data;break;case"end":p=this.c.end;break;case"error":p=this.c.error;break}if(p){const O=p.indexOf(h);O>=0&&p.splice(O,1)}}j(){if(this.b.data.length>0){const l=this.e(this.b.data);this.g(l),this.b.data.length=0;const h=[...this.d];this.d.length=0,h.forEach(p=>p())}}k(){if(this.c.error.length>0){for(const l of this.b.error)this.h(l);this.b.error.length=0}}l(){return this.a.ended?(this.i(),this.c.end.length>0):!1}destroy(){this.a.destroyed||(this.a.destroyed=!0,this.a.ended=!0,this.b.data.length=0,this.b.error.length=0,this.c.data.length=0,this.c.error.length=0,this.c.end.length=0,this.d.length=0)}}function m(i,l){const h=[];let p;for(;(p=i.read())!==null;)h.push(p);return l(h)}t.consumeReadable=m;function S(i,l,h){const p=[];let O;for(;(O=i.read())!==null&&p.length<h;)p.push(O);return O===null&&p.length>0?l(p):{read:()=>{if(p.length>0)return p.shift();if(typeof O<"u"){const R=O;return O=void 0,R}return i.read()}}}t.peekReadable=S;function D(i,l){return new Promise((h,p)=>{const O=[];w(i,{onData:R=>{l&&O.push(R)},onError:R=>{l?p(R):h(void 0)},onEnd:()=>{h(l?l(O):void 0)}})})}t.consumeStream=D;function w(i,l){let h=!1;return i.on("error",p=>{h||l.onError(p)}),i.on("end",()=>{h||l.onEnd()}),i.on("data",p=>{h||l.onData(p)}),(0,$.toDisposable)(()=>h=!0)}t.listenStream=w;function M(i,l){return new Promise((h,p)=>{const O=new $.DisposableStore,R=[],g=d=>{if(R.push(d),R.length>l)return O.dispose(),i.pause(),h({stream:i,buffer:R,ended:!1})},I=d=>p(d),E=()=>h({stream:i,buffer:R,ended:!0});O.add((0,$.toDisposable)(()=>i.removeListener("error",I))),i.on("error",I),O.add((0,$.toDisposable)(()=>i.removeListener("end",E))),i.on("end",E),O.add((0,$.toDisposable)(()=>i.removeListener("data",g))),i.on("data",g)})}t.peekStream=M;function f(i,l){const h=q(l);return h.end(i),h}t.toStream=f;function s(){const i=q(()=>{throw new Error("not supported")});return i.end(),i}t.emptyStream=s;function r(i){let l=!1;return{read:()=>l?null:(l=!0,i)}}t.toReadable=r;function o(i,l,h){const p=q(h);return w(i,{onData:O=>p.write(l.data(O)),onError:O=>p.error(l.error?l.error(O):O),onEnd:()=>p.end()}),p}t.transform=o;function n(i,l,h){let p=!1;return{read:()=>{const O=l.read();return p?O:(p=!0,O!==null?h([i,O]):i)}}}t.prefixedReadable=n;function a(i,l,h){let p=!1;const O=q(h);return w(l,{onData:R=>p?O.write(R):(p=!0,O.write(h([i,R]))),onError:R=>O.error(R),onEnd:()=>{p||(p=!0,O.write(i)),O.end()}}),O}t.prefixedStream=a}),define(te[6],ne([0,1,14]),function(ee,t,B){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeBase64=t.decodeBase64=t.prefixedBufferStream=t.prefixedBufferReadable=t.newWriteableBufferStream=t.streamToBufferReadableStream=t.bufferToStream=t.bufferedStreamToBuffer=t.streamToBuffer=t.bufferToReadable=t.readableToBuffer=t.writeUInt8=t.readUInt8=t.writeUInt32LE=t.readUInt32LE=t.writeUInt32BE=t.readUInt32BE=t.writeUInt16LE=t.readUInt16LE=t.VSBuffer=void 0;const $=typeof Buffer<"u";let U,L;class C{static alloc(d){return $?new C(Buffer.allocUnsafe(d)):new C(new Uint8Array(d))}static wrap(d){return $&&!Buffer.isBuffer(d)&&(d=Buffer.from(d.buffer,d.byteOffset,d.byteLength)),new C(d)}static fromString(d,P){return!(P?.dontUseNodeBuffer||!1)&&$?new C(Buffer.from(d)):(U||(U=new TextEncoder),new C(U.encode(d)))}static fromByteArray(d){const P=C.alloc(d.length);for(let V=0,K=d.length;V<K;V++)P.buffer[V]=d[V];return P}static concat(d,P){if(typeof P>"u"){P=0;for(let Q=0,X=d.length;Q<X;Q++)P+=d[Q].byteLength}const V=C.alloc(P);let K=0;for(let Q=0,X=d.length;Q<X;Q++){const Y=d[Q];V.set(Y,K),K+=Y.byteLength}return V}constructor(d){this.buffer=d,this.byteLength=this.buffer.byteLength}clone(){const d=C.alloc(this.byteLength);return d.set(this),d}toString(){return $?this.buffer.toString():(L||(L=new TextDecoder),L.decode(this.buffer))}slice(d,P){return new C(this.buffer.subarray(d,P))}set(d,P){if(d instanceof C)this.buffer.set(d.buffer,P);else if(d instanceof Uint8Array)this.buffer.set(d,P);else if(d instanceof ArrayBuffer)this.buffer.set(new Uint8Array(d),P);else if(ArrayBuffer.isView(d))this.buffer.set(new Uint8Array(d.buffer,d.byteOffset,d.byteLength),P);else throw new Error("Unknown argument 'array'")}readUInt32BE(d){return m(this.buffer,d)}writeUInt32BE(d,P){S(this.buffer,d,P)}readUInt32LE(d){return D(this.buffer,d)}writeUInt32LE(d,P){w(this.buffer,d,P)}readUInt8(d){return M(this.buffer,d)}writeUInt8(d,P){f(this.buffer,d,P)}}t.VSBuffer=C;function q(E,d){return E[d+0]<<0>>>0|E[d+1]<<8>>>0}t.readUInt16LE=q;function F(E,d,P){E[P+0]=d&255,d=d>>>8,E[P+1]=d&255}t.writeUInt16LE=F;function m(E,d){return E[d]*2**24+E[d+1]*2**16+E[d+2]*2**8+E[d+3]}t.readUInt32BE=m;function S(E,d,P){E[P+3]=d,d=d>>>8,E[P+2]=d,d=d>>>8,E[P+1]=d,d=d>>>8,E[P]=d}t.writeUInt32BE=S;function D(E,d){return E[d+0]<<0>>>0|E[d+1]<<8>>>0|E[d+2]<<16>>>0|E[d+3]<<24>>>0}t.readUInt32LE=D;function w(E,d,P){E[P+0]=d&255,d=d>>>8,E[P+1]=d&255,d=d>>>8,E[P+2]=d&255,d=d>>>8,E[P+3]=d&255}t.writeUInt32LE=w;function M(E,d){return E[d]}t.readUInt8=M;function f(E,d,P){E[P]=d}t.writeUInt8=f;function s(E){return B.consumeReadable(E,d=>C.concat(d))}t.readableToBuffer=s;function r(E){return B.toReadable(E)}t.bufferToReadable=r;function o(E){return B.consumeStream(E,d=>C.concat(d))}t.streamToBuffer=o;async function n(E){return E.ended?C.concat(E.buffer):C.concat([...E.buffer,await o(E.stream)])}t.bufferedStreamToBuffer=n;function a(E){return B.toStream(E,d=>C.concat(d))}t.bufferToStream=a;function i(E){return B.transform(E,{data:d=>typeof d=="string"?C.fromString(d):C.wrap(d)},d=>C.concat(d))}t.streamToBufferReadableStream=i;function l(E){return B.newWriteableStream(d=>C.concat(d),E)}t.newWriteableBufferStream=l;function h(E,d){return B.prefixedReadable(E,d,P=>C.concat(P))}t.prefixedBufferReadable=h;function p(E,d){return B.prefixedStream(E,d,P=>C.concat(P))}t.prefixedBufferStream=p;function O(E){let d=0,P=0,V=0;const K=new Uint8Array(Math.floor(E.length/4*3)),Q=Y=>{switch(P){case 3:K[V++]=d|Y,P=0;break;case 2:K[V++]=d|Y>>>2,d=Y<<6,P=3;break;case 1:K[V++]=d|Y>>>4,d=Y<<4,P=2;break;default:d=Y<<2,P=1}};for(let Y=0;Y<E.length;Y++){const Z=E.charCodeAt(Y);if(Z>=65&&Z<=90)Q(Z-65);else if(Z>=97&&Z<=122)Q(Z-97+26);else if(Z>=48&&Z<=57)Q(Z-48+52);else if(Z===43||Z===45)Q(62);else if(Z===47||Z===95)Q(63);else{if(Z===61)break;throw new SyntaxError(`Unexpected base64 character ${E[Y]}`)}}const X=V;for(;P>0;)Q(0);return C.wrap(K).slice(0,X)}t.decodeBase64=O;const R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function I({buffer:E},d=!0,P=!1){const V=P?g:R;let K="";const Q=E.byteLength%3;let X=0;for(;X<E.byteLength-Q;X+=3){const Y=E[X+0],Z=E[X+1],se=E[X+2];K+=V[Y>>>2],K+=V[(Y<<4|Z>>>4)&63],K+=V[(Z<<2|se>>>6)&63],K+=V[se&63]}if(Q===1){const Y=E[X+0];K+=V[Y>>>2],K+=V[Y<<4&63],d&&(K+="==")}else if(Q===2){const Y=E[X+0],Z=E[X+1];K+=V[Y>>>2],K+=V[(Y<<4|Z>>>4)&63],K+=V[Z<<2&63],d&&(K+="=")}return K}t.encodeBase64=I}),define(te[15],ne([0,1]),function(ee,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MicrotaskDelay=void 0,t.MicrotaskDelay=Symbol("MicrotaskDelay")}),define(te[16],ne([0,1]),function(ee,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.countEOL=t.StringEOL=void 0;var B;(function(U){U[U.Unknown=0]="Unknown",U[U.Invalid=3]="Invalid",U[U.LF=1]="LF",U[U.CRLF=2]="CRLF"})(B=t.StringEOL||(t.StringEOL={}));function $(U){let L=0,C=0,q=0,F=0;for(let m=0,S=U.length;m<S;m++){const D=U.charCodeAt(m);D===13?(L===0&&(C=m),L++,m+1<S&&U.charCodeAt(m+1)===10?(F|=2,m++):F|=3,q=m+1):D===10&&(F|=1,L===0&&(C=m),L++,q=m+1)}return L===0&&(C=U.length),[L,C,U.length-q,F]}t.countEOL=$}),define(te[17],ne([0,1]),function(ee,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recomputeTreeMetadata=t.updateTreeMetadata=t.fixInsert=t.rbDelete=t.rightRotate=t.leftRotate=t.righttest=t.leftest=t.SENTINEL=t.NodeColor=t.TreeNode=void 0;class B{constructor(r,o){this.piece=r,this.color=o,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==t.SENTINEL)return U(this.right);let r=this;for(;r.parent!==t.SENTINEL&&r.parent.left!==r;)r=r.parent;return r.parent===t.SENTINEL?t.SENTINEL:r.parent}prev(){if(this.left!==t.SENTINEL)return L(this.left);let r=this;for(;r.parent!==t.SENTINEL&&r.parent.right!==r;)r=r.parent;return r.parent===t.SENTINEL?t.SENTINEL:r.parent}detach(){this.parent=null,this.left=null,this.right=null}}t.TreeNode=B;var $;(function(s){s[s.Black=0]="Black",s[s.Red=1]="Red"})($=t.NodeColor||(t.NodeColor={})),t.SENTINEL=new B(null,0),t.SENTINEL.parent=t.SENTINEL,t.SENTINEL.left=t.SENTINEL,t.SENTINEL.right=t.SENTINEL,t.SENTINEL.color=0;function U(s){for(;s.left!==t.SENTINEL;)s=s.left;return s}t.leftest=U;function L(s){for(;s.right!==t.SENTINEL;)s=s.right;return s}t.righttest=L;function C(s){return s===t.SENTINEL?0:s.size_left+s.piece.length+C(s.right)}function q(s){return s===t.SENTINEL?0:s.lf_left+s.piece.lineFeedCnt+q(s.right)}function F(){t.SENTINEL.parent=t.SENTINEL}function m(s,r){const o=r.right;o.size_left+=r.size_left+(r.piece?r.piece.length:0),o.lf_left+=r.lf_left+(r.piece?r.piece.lineFeedCnt:0),r.right=o.left,o.left!==t.SENTINEL&&(o.left.parent=r),o.parent=r.parent,r.parent===t.SENTINEL?s.root=o:r.parent.left===r?r.parent.left=o:r.parent.right=o,o.left=r,r.parent=o}t.leftRotate=m;function S(s,r){const o=r.left;r.left=o.right,o.right!==t.SENTINEL&&(o.right.parent=r),o.parent=r.parent,r.size_left-=o.size_left+(o.piece?o.piece.length:0),r.lf_left-=o.lf_left+(o.piece?o.piece.lineFeedCnt:0),r.parent===t.SENTINEL?s.root=o:r===r.parent.right?r.parent.right=o:r.parent.left=o,o.right=r,r.parent=o}t.rightRotate=S;function D(s,r){let o,n;if(r.left===t.SENTINEL?(n=r,o=n.right):r.right===t.SENTINEL?(n=r,o=n.left):(n=U(r.right),o=n.right),n===s.root){s.root=o,o.color=0,r.detach(),F(),s.root.parent=t.SENTINEL;return}const a=n.color===1;if(n===n.parent.left?n.parent.left=o:n.parent.right=o,n===r?(o.parent=n.parent,f(s,o)):(n.parent===r?o.parent=n:o.parent=n.parent,f(s,o),n.left=r.left,n.right=r.right,n.parent=r.parent,n.color=r.color,r===s.root?s.root=n:r===r.parent.left?r.parent.left=n:r.parent.right=n,n.left!==t.SENTINEL&&(n.left.parent=n),n.right!==t.SENTINEL&&(n.right.parent=n),n.size_left=r.size_left,n.lf_left=r.lf_left,f(s,n)),r.detach(),o.parent.left===o){const l=C(o),h=q(o);if(l!==o.parent.size_left||h!==o.parent.lf_left){const p=l-o.parent.size_left,O=h-o.parent.lf_left;o.parent.size_left=l,o.parent.lf_left=h,M(s,o.parent,p,O)}}if(f(s,o.parent),a){F();return}let i;for(;o!==s.root&&o.color===0;)o===o.parent.left?(i=o.parent.right,i.color===1&&(i.color=0,o.parent.color=1,m(s,o.parent),i=o.parent.right),i.left.color===0&&i.right.color===0?(i.color=1,o=o.parent):(i.right.color===0&&(i.left.color=0,i.color=1,S(s,i),i=o.parent.right),i.color=o.parent.color,o.parent.color=0,i.right.color=0,m(s,o.parent),o=s.root)):(i=o.parent.left,i.color===1&&(i.color=0,o.parent.color=1,S(s,o.parent),i=o.parent.left),i.left.color===0&&i.right.color===0?(i.color=1,o=o.parent):(i.left.color===0&&(i.right.color=0,i.color=1,m(s,i),i=o.parent.left),i.color=o.parent.color,o.parent.color=0,i.left.color=0,S(s,o.parent),o=s.root));o.color=0,F()}t.rbDelete=D;function w(s,r){for(f(s,r);r!==s.root&&r.parent.color===1;)if(r.parent===r.parent.parent.left){const o=r.parent.parent.right;o.color===1?(r.parent.color=0,o.color=0,r.parent.parent.color=1,r=r.parent.parent):(r===r.parent.right&&(r=r.parent,m(s,r)),r.parent.color=0,r.parent.parent.color=1,S(s,r.parent.parent))}else{const o=r.parent.parent.left;o.color===1?(r.parent.color=0,o.color=0,r.parent.parent.color=1,r=r.parent.parent):(r===r.parent.left&&(r=r.parent,S(s,r)),r.parent.color=0,r.parent.parent.color=1,m(s,r.parent.parent))}s.root.color=0}t.fixInsert=w;function M(s,r,o,n){for(;r!==s.root&&r!==t.SENTINEL;)r.parent.left===r&&(r.parent.size_left+=o,r.parent.lf_left+=n),r=r.parent}t.updateTreeMetadata=M;function f(s,r){let o=0,n=0;if(r!==s.root){for(;r!==s.root&&r===r.parent.right;)r=r.parent;if(r!==s.root)for(r=r.parent,o=C(r.left)-r.size_left,n=q(r.left)-r.lf_left,r.size_left+=o,r.lf_left+=n;r!==s.root&&(o!==0||n!==0);)r.parent.left===r&&(r.parent.size_left+=o,r.parent.lf_left+=n),r=r.parent}}t.recomputeTreeMetadata=f}),define(te[18],ne([0,1,4]),function(ee,t,B){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeMimeType=t.getExtensionForMimeType=t.getMediaMime=t.getMediaOrTextMime=t.Mimes=void 0,t.Mimes=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"});const $={".css":"text/css",".csv":"text/csv",".htm":"text/html",".html":"text/html",".ics":"text/calendar",".js":"text/javascript",".mjs":"text/javascript",".txt":"text/plain",".xml":"text/xml"},U={".aac":"audio/x-aac",".avi":"video/x-msvideo",".bmp":"image/bmp",".flv":"video/x-flv",".gif":"image/gif",".ico":"image/x-icon",".jpe":"image/jpg",".jpeg":"image/jpg",".jpg":"image/jpg",".m1v":"video/mpeg",".m2a":"audio/mpeg",".m2v":"video/mpeg",".m3a":"audio/mpeg",".mid":"audio/midi",".midi":"audio/midi",".mk3d":"video/x-matroska",".mks":"video/x-matroska",".mkv":"video/x-matroska",".mov":"video/quicktime",".movie":"video/x-sgi-movie",".mp2":"audio/mpeg",".mp2a":"audio/mpeg",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4a":"audio/mp4",".mp4v":"video/mp4",".mpe":"video/mpeg",".mpeg":"video/mpeg",".mpg":"video/mpeg",".mpg4":"video/mp4",".mpga":"audio/mpeg",".oga":"audio/ogg",".ogg":"audio/ogg",".opus":"audio/opus",".ogv":"video/ogg",".png":"image/png",".psd":"image/vnd.adobe.photoshop",".qt":"video/quicktime",".spx":"audio/ogg",".svg":"image/svg+xml",".tga":"image/x-tga",".tif":"image/tiff",".tiff":"image/tiff",".wav":"audio/x-wav",".webm":"video/webm",".webp":"image/webp",".wma":"audio/x-ms-wma",".wmv":"video/x-ms-wmv",".woff":"application/font-woff"};function L(S){const D=(0,B.extname)(S),w=$[D.toLowerCase()];return w!==void 0?w:C(S)}t.getMediaOrTextMime=L;function C(S){const D=(0,B.extname)(S);return U[D.toLowerCase()]}t.getMediaMime=C;function q(S){for(const D in U)if(U[D]===S)return D}t.getExtensionForMimeType=q;const F=/^(.+)\/(.+?)(;.+)?$/;function m(S,D){const w=F.exec(S);return w?`${w[1].toLowerCase()}/${w[2].toLowerCase()}${w[3]??""}`:D?void 0:S}t.normalizeMimeType=m}),define(te[8],ne([0,1,4,2,3,32]),function(ee,t,B,$,U,L){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomPath=t.parseLineAndColumnAware=t.indexOfPath=t.getDriveLetter=t.hasDriveLetter=t.isRootOrDriveLetter=t.sanitizeFilePath=t.isWindowsDriveLetter=t.isEqualOrParent=t.isEqual=t.isValidBasename=t.isUNC=t.getRoot=t.toPosixPath=t.toSlashes=t.isPathSeparator=void 0;function C(g){return g===47||g===92}t.isPathSeparator=C;function q(g){return g.replace(/[\\/]/g,B.posix.sep)}t.toSlashes=q;function F(g){return g.indexOf("/")===-1&&(g=q(g)),/^[a-zA-Z]:(\/|$)/.test(g)&&(g="/"+g),g}t.toPosixPath=F;function m(g,I=B.posix.sep){if(!g)return"";const E=g.length,d=g.charCodeAt(0);if(C(d)){if(C(g.charCodeAt(1))&&!C(g.charCodeAt(2))){let V=3;const K=V;for(;V<E&&!C(g.charCodeAt(V));V++);if(K!==V&&!C(g.charCodeAt(V+1))){for(V+=1;V<E;V++)if(C(g.charCodeAt(V)))return g.slice(0,V+1).replace(/[\\/]/g,I)}}return I}else if(o(d)&&g.charCodeAt(1)===58)return C(g.charCodeAt(2))?g.slice(0,2)+I:g.slice(0,2);let P=g.indexOf("://");if(P!==-1){for(P+=3;P<E;P++)if(C(g.charCodeAt(P)))return g.slice(0,P+1)}return""}t.getRoot=m;function S(g){if(!$.isWindows||!g||g.length<5)return!1;let I=g.charCodeAt(0);if(I!==92||(I=g.charCodeAt(1),I!==92))return!1;let E=2;const d=E;for(;E<g.length&&(I=g.charCodeAt(E),I!==92);E++);return!(d===E||(I=g.charCodeAt(E+1),isNaN(I)||I===92))}t.isUNC=S;const D=/[\\/:\*\?"<>\|]/g,w=/[\\/]/g,M=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function f(g,I=$.isWindows){const E=I?D:w;return!(!g||g.length===0||/^\s+$/.test(g)||(E.lastIndex=0,E.test(g))||I&&M.test(g)||g==="."||g===".."||I&&g[g.length-1]==="."||I&&g.length!==g.trim().length||g.length>255)}t.isValidBasename=f;function s(g,I,E){const d=g===I;return!E||d?d:!g||!I?!1:(0,U.equalsIgnoreCase)(g,I)}t.isEqual=s;function r(g,I,E,d=B.sep){if(g===I)return!0;if(!g||!I||I.length>g.length)return!1;if(E){if(!(0,U.startsWithIgnoreCase)(g,I))return!1;if(I.length===g.length)return!0;let V=I.length;return I.charAt(I.length-1)===d&&V--,g.charAt(V)===d}return I.charAt(I.length-1)!==d&&(I+=d),g.indexOf(I)===0}t.isEqualOrParent=r;function o(g){return g>=65&&g<=90||g>=97&&g<=122}t.isWindowsDriveLetter=o;function n(g,I){return $.isWindows&&g.endsWith(":")&&(g+=B.sep),(0,B.isAbsolute)(g)||(g=(0,B.join)(I,g)),g=(0,B.normalize)(g),$.isWindows?(g=(0,U.rtrim)(g,B.sep),g.endsWith(":")&&(g+=B.sep)):(g=(0,U.rtrim)(g,B.sep),g||(g=B.sep)),g}t.sanitizeFilePath=n;function a(g){const I=(0,B.normalize)(g);return $.isWindows?g.length>3?!1:i(I)&&(g.length===2||I.charCodeAt(2)===92):I===B.posix.sep}t.isRootOrDriveLetter=a;function i(g,I=$.isWindows){return I?o(g.charCodeAt(0))&&g.charCodeAt(1)===58:!1}t.hasDriveLetter=i;function l(g){return i(g)?g[0]:void 0}t.getDriveLetter=l;function h(g,I,E){return I.length>g.length?-1:g===I?0:(E&&(g=g.toLowerCase(),I=I.toLowerCase()),g.indexOf(I))}t.indexOfPath=h;function p(g){const I=g.split(":");let E,d,P;for(const V of I){const K=Number(V);(0,L.isNumber)(K)?d===void 0?d=K:P===void 0&&(P=K):E=E?[E,V].join(":"):V}if(!E)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:E,line:d!==void 0?d:void 0,column:P!==void 0?P:d!==void 0?1:void 0}}t.parseLineAndColumnAware=p;const O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function R(g,I,E=8){let d="";for(let V=0;V<E;V++)d+=O.charAt(Math.floor(Math.random()*O.length));let P;return I?P=`${I}-${d}`:P=d,g?(0,B.join)(g,P):P}t.randomPath=R}),define(te[9],ne([0,1,5,2,10]),function(ee,t,B,$,U){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COI=t.FileAccess=t.nodeModulesAsarUnpackedPath=t.nodeModulesAsarPath=t.nodeModulesPath=t.builtinExtensionsPath=t.RemoteAuthorities=t.connectionTokenQueryName=t.connectionTokenCookieName=t.Schemas=void 0;var L;(function(m){m.inMemory="inmemory",m.vscode="vscode",m.internal="private",m.walkThrough="walkThrough",m.walkThroughSnippet="walkThroughSnippet",m.http="http",m.https="https",m.file="file",m.mailto="mailto",m.untitled="untitled",m.data="data",m.command="command",m.vscodeRemote="vscode-remote",m.vscodeRemoteResource="vscode-remote-resource",m.vscodeUserData="vscode-userdata",m.vscodeCustomEditor="vscode-custom-editor",m.vscodeNotebookCell="vscode-notebook-cell",m.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",m.vscodeNotebookCellOutput="vscode-notebook-cell-output",m.vscodeInteractive="vscode-interactive",m.vscodeInteractiveInput="vscode-interactive-input",m.vscodeSettings="vscode-settings",m.vscodeWorkspaceTrust="vscode-workspace-trust",m.vscodeTerminal="vscode-terminal",m.webviewPanel="webview-panel",m.vscodeWebview="vscode-webview",m.extension="extension",m.vscodeFileResource="vscode-file",m.tmp="tmp",m.vsls="vsls",m.vscodeSourceControl="vscode-scm"})(L=t.Schemas||(t.Schemas={})),t.connectionTokenCookieName="vscode-tkn",t.connectionTokenQueryName="tkn";class C{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f=`/${L.vscodeRemoteResource}`}setPreferredWebSchema(S){this.d=S}setDelegate(S){this.e=S}setServerRootPath(S){this.f=`${S}/${L.vscodeRemoteResource}`}set(S,D,w){this.a[S]=D,this.b[S]=w}setConnectionToken(S,D){this.c[S]=D}getPreferredWebSchema(){return this.d}rewrite(S){if(this.e)try{return this.e(S)}catch(r){return B.onUnexpectedError(r),S}const D=S.authority;let w=this.a[D];w&&w.indexOf(":")!==-1&&w.indexOf("[")===-1&&(w=`[${w}]`);const M=this.b[D],f=this.c[D];let s=`path=${encodeURIComponent(S.path)}`;return typeof f=="string"&&(s+=`&${t.connectionTokenQueryName}=${encodeURIComponent(f)}`),U.URI.from({scheme:$.isWeb?this.d:L.vscodeRemoteResource,authority:`${w}:${M}`,path:this.f,query:s})}}t.RemoteAuthorities=new C,t.builtinExtensionsPath="vs/../../extensions",t.nodeModulesPath="vs/../../node_modules",t.nodeModulesAsarPath="vs/../../node_modules.asar",t.nodeModulesAsarUnpackedPath="vs/../../node_modules.asar.unpacked";class q{asBrowserUri(S){const D=this.b(S,ee);return this.uriToBrowserUri(D)}uriToBrowserUri(S){return S.scheme===L.vscodeRemote?t.RemoteAuthorities.rewrite(S):S.scheme===L.file&&($.isNative||$.isWebWorker&&$.globals.origin===`${L.vscodeFileResource}://${q.a}`)?S.with({scheme:L.vscodeFileResource,authority:S.authority||q.a,query:null,fragment:null}):S}asFileUri(S){const D=this.b(S,ee);return this.uriToFileUri(D)}uriToFileUri(S){return S.scheme===L.vscodeFileResource?S.with({scheme:L.file,authority:S.authority!==q.a?S.authority:null,query:null,fragment:null}):S}b(S,D){return U.URI.isUri(S)?S:U.URI.parse(D.toUrl(S))}}q.a="vscode-app",t.FileAccess=new q;var F;(function(m){const S=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);m.CoopAndCoep=Object.freeze(S.get("3"));const D="vscode-coi";function w(f){let s;typeof f=="string"?s=new URL(f).searchParams:f instanceof URL?s=f.searchParams:U.URI.isUri(f)&&(s=new URL(f.toString(!0)).searchParams);const r=s?.get(D);if(!!r)return S.get(r)}m.getHeadersFromQuery=w;function M(f,s,r){if(!globalThis.crossOriginIsolated)return;const o=s&&r?"3":r?"2":"1";f instanceof URLSearchParams?f.set(D,o):f[D]=o}m.addSearchParam=M})(F=t.COI||(t.COI={}))}),define(te[19],ne([0,1,8,9,4,2,3,10]),function(ee,t,B,$,U,L,C,q){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toLocalResource=t.DataUri=t.distinctParents=t.addTrailingPathSeparator=t.removeTrailingPathSeparator=t.hasTrailingPathSeparator=t.isEqualAuthority=t.isAbsolutePath=t.resolvePath=t.relativePath=t.normalizePath=t.joinPath=t.dirname=t.extname=t.basename=t.basenameOrAuthority=t.getComparisonKey=t.isEqualOrParent=t.isEqual=t.extUriIgnorePathCase=t.extUriBiasedIgnorePathCase=t.extUri=t.ExtUri=t.originalFSPath=void 0;function F(M){return(0,q.uriToFsPath)(M,!0)}t.originalFSPath=F;class m{constructor(f){this.a=f}compare(f,s,r=!1){return f===s?0:(0,C.compare)(this.getComparisonKey(f,r),this.getComparisonKey(s,r))}isEqual(f,s,r=!1){return f===s?!0:!f||!s?!1:this.getComparisonKey(f,r)===this.getComparisonKey(s,r)}getComparisonKey(f,s=!1){return f.with({path:this.a(f)?f.path.toLowerCase():void 0,fragment:s?null:void 0}).toString()}ignorePathCasing(f){return this.a(f)}isEqualOrParent(f,s,r=!1){if(f.scheme===s.scheme){if(f.scheme===$.Schemas.file)return B.isEqualOrParent(F(f),F(s),this.a(f))&&f.query===s.query&&(r||f.fragment===s.fragment);if((0,t.isEqualAuthority)(f.authority,s.authority))return B.isEqualOrParent(f.path,s.path,this.a(f),"/")&&f.query===s.query&&(r||f.fragment===s.fragment)}return!1}joinPath(f,...s){return q.URI.joinPath(f,...s)}basenameOrAuthority(f){return(0,t.basename)(f)||f.authority}basename(f){return U.posix.basename(f.path)}extname(f){return U.posix.extname(f.path)}dirname(f){if(f.path.length===0)return f;let s;return f.scheme===$.Schemas.file?s=q.URI.file(U.dirname(F(f))).path:(s=U.posix.dirname(f.path),f.authority&&s.length&&s.charCodeAt(0)!==47&&(console.error(`dirname("${f.toString})) resulted in a relative path`),s="/")),f.with({path:s})}normalizePath(f){if(!f.path.length)return f;let s;return f.scheme===$.Schemas.file?s=q.URI.file(U.normalize(F(f))).path:s=U.posix.normalize(f.path),f.with({path:s})}relativePath(f,s){if(f.scheme!==s.scheme||!(0,t.isEqualAuthority)(f.authority,s.authority))return;if(f.scheme===$.Schemas.file){const n=U.relative(F(f),F(s));return L.isWindows?B.toSlashes(n):n}let r=f.path||"/";const o=s.path||"/";if(this.a(f)){let n=0;for(const a=Math.min(r.length,o.length);n<a&&!(r.charCodeAt(n)!==o.charCodeAt(n)&&r.charAt(n).toLowerCase()!==o.charAt(n).toLowerCase());n++);r=o.substr(0,n)+r.substr(n)}return U.posix.relative(r,o)}resolvePath(f,s){if(f.scheme===$.Schemas.file){const r=q.URI.file(U.resolve(F(f),s));return f.with({authority:r.authority,path:r.path})}return s=B.toPosixPath(s),f.with({path:U.posix.resolve(f.path,s)})}isAbsolutePath(f){return!!f.path&&f.path[0]==="/"}isEqualAuthority(f,s){return f===s||f!==void 0&&s!==void 0&&(0,C.equalsIgnoreCase)(f,s)}hasTrailingPathSeparator(f,s=U.sep){if(f.scheme===$.Schemas.file){const r=F(f);return r.length>B.getRoot(r).length&&r[r.length-1]===s}else{const r=f.path;return r.length>1&&r.charCodeAt(r.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(f.fsPath)}}removeTrailingPathSeparator(f,s=U.sep){return(0,t.hasTrailingPathSeparator)(f,s)?f.with({path:f.path.substr(0,f.path.length-1)}):f}addTrailingPathSeparator(f,s=U.sep){let r=!1;if(f.scheme===$.Schemas.file){const o=F(f);r=o!==void 0&&o.length===B.getRoot(o).length&&o[o.length-1]===s}else{s="/";const o=f.path;r=o.length===1&&o.charCodeAt(o.length-1)===47}return!r&&!(0,t.hasTrailingPathSeparator)(f,s)?f.with({path:f.path+"/"}):f}}t.ExtUri=m,t.extUri=new m(()=>!1),t.extUriBiasedIgnorePathCase=new m(M=>M.scheme===$.Schemas.file?!L.isLinux:!0),t.extUriIgnorePathCase=new m(M=>!0),t.isEqual=t.extUri.isEqual.bind(t.extUri),t.isEqualOrParent=t.extUri.isEqualOrParent.bind(t.extUri),t.getComparisonKey=t.extUri.getComparisonKey.bind(t.extUri),t.basenameOrAuthority=t.extUri.basenameOrAuthority.bind(t.extUri),t.basename=t.extUri.basename.bind(t.extUri),t.extname=t.extUri.extname.bind(t.extUri),t.dirname=t.extUri.dirname.bind(t.extUri),t.joinPath=t.extUri.joinPath.bind(t.extUri),t.normalizePath=t.extUri.normalizePath.bind(t.extUri),t.relativePath=t.extUri.relativePath.bind(t.extUri),t.resolvePath=t.extUri.resolvePath.bind(t.extUri),t.isAbsolutePath=t.extUri.isAbsolutePath.bind(t.extUri),t.isEqualAuthority=t.extUri.isEqualAuthority.bind(t.extUri),t.hasTrailingPathSeparator=t.extUri.hasTrailingPathSeparator.bind(t.extUri),t.removeTrailingPathSeparator=t.extUri.removeTrailingPathSeparator.bind(t.extUri),t.addTrailingPathSeparator=t.extUri.addTrailingPathSeparator.bind(t.extUri);function S(M,f){const s=[];for(let r=0;r<M.length;r++){const o=f(M[r]);M.some((n,a)=>a===r?!1:(0,t.isEqualOrParent)(o,f(n)))||s.push(M[r])}return s}t.distinctParents=S;var D;(function(M){M.META_DATA_LABEL="label",M.META_DATA_DESCRIPTION="description",M.META_DATA_SIZE="size",M.META_DATA_MIME="mime";function f(s){const r=new Map;s.path.substring(s.path.indexOf(";")+1,s.path.lastIndexOf(";")).split(";").forEach(a=>{const[i,l]=a.split(":");i&&l&&r.set(i,l)});const n=s.path.substring(0,s.path.indexOf(";"));return n&&r.set(M.META_DATA_MIME,n),r}M.parseMetaData=f})(D=t.DataUri||(t.DataUri={}));function w(M,f,s){if(f){let r=M.path;return r&&r[0]!==U.posix.sep&&(r=U.posix.sep+r),M.with({scheme:s,authority:f,path:r})}return M.with({scheme:s})}t.toLocalResource=w}),define(te[20],ne([0,1,33,5,21,7,19,2,15]),function(ee,t,B,$,U,L,C,q,F){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCancelableAsyncIterable=t.CancelableAsyncIterableObject=t.AsyncIterableObject=t.Promises=t.DeferredPromise=t.IntervalCounter=t.TaskSequentializer=t.retry=t.IdleValue=t.runWhenIdle=t.ThrottledWorker=t.RunOnceWorker=t.ProcessTimeRunOnceScheduler=t.RunOnceScheduler=t.IntervalTimer=t.TimeoutTimer=t.ResourceQueue=t.Queue=t.Limiter=t.firstParallel=t.first=t.sequence=t.disposableTimeout=t.timeout=t.AutoOpenBarrier=t.Barrier=t.ThrottledDelayer=t.Delayer=t.SequencerByKey=t.Sequencer=t.Throttler=t.asPromise=t.raceTimeout=t.raceCancellablePromises=t.raceCancellationError=t.raceCancellation=t.createCancelablePromise=t.isThenable=void 0;function m(y){return!!y&&typeof y.then=="function"}t.isThenable=m;function S(y){const c=new B.CancellationTokenSource,v=y(c.token),A=new Promise((W,H)=>{const _=c.token.onCancellationRequested(()=>{_.dispose(),c.dispose(),H(new $.CancellationError)});Promise.resolve(v).then(ie=>{_.dispose(),c.dispose(),W(ie)},ie=>{_.dispose(),c.dispose(),H(ie)})});return new class{cancel(){c.cancel()}then(W,H){return A.then(W,H)}catch(W){return this.then(void 0,W)}finally(W){return A.finally(W)}}}t.createCancelablePromise=S;function D(y,c,v){return new Promise((A,W)=>{const H=c.onCancellationRequested(()=>{H.dispose(),A(v)});y.then(A,W).finally(()=>H.dispose())})}t.raceCancellation=D;function w(y,c){return new Promise((v,A)=>{const W=c.onCancellationRequested(()=>{W.dispose(),A(new $.CancellationError)});y.then(v,A).finally(()=>W.dispose())})}t.raceCancellationError=w;async function M(y){let c=-1;const v=y.map((W,H)=>W.then(_=>(c=H,_))),A=await Promise.race(v);return y.forEach((W,H)=>{H!==c&&W.cancel()}),A}t.raceCancellablePromises=M;function f(y,c,v){let A;const W=setTimeout(()=>{A?.(void 0),v?.()},c);return Promise.race([y.finally(()=>clearTimeout(W)),new Promise(H=>A=H)])}t.raceTimeout=f;function s(y){return new Promise((c,v)=>{const A=y();m(A)?A.then(c,v):c(A)})}t.asPromise=s;class r{constructor(){this.a=null,this.b=null,this.d=null}queue(c){if(this.a){if(this.d=c,!this.b){const v=()=>{this.b=null;const A=this.queue(this.d);return this.d=null,A};this.b=new Promise(A=>{this.a.then(v,v).then(A)})}return new Promise((v,A)=>{this.b.then(v,A)})}return this.a=c(),new Promise((v,A)=>{this.a.then(W=>{this.a=null,v(W)},W=>{this.a=null,A(W)})})}}t.Throttler=r;class o{constructor(){this.a=Promise.resolve(null)}queue(c){return this.a=this.a.then(()=>c(),()=>c())}}t.Sequencer=o;class n{constructor(){this.a=new Map}queue(c,v){const W=(this.a.get(c)??Promise.resolve()).catch(()=>{}).then(v).finally(()=>{this.a.get(c)===W&&this.a.delete(c)});return this.a.set(c,W),W}}t.SequencerByKey=n;const a=(y,c)=>{let v=!0;const A=setTimeout(()=>{v=!1,c()},y);return{isTriggered:()=>v,dispose:()=>{clearTimeout(A),v=!1}}},i=y=>{let c=!0;return queueMicrotask(()=>{c&&(c=!1,y())}),{isTriggered:()=>c,dispose:()=>{c=!1}}};class l{constructor(c){this.defaultDelay=c,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(c,v=this.defaultDelay){this.g=c,this.h(),this.b||(this.b=new Promise((W,H)=>{this.d=W,this.f=H}).then(()=>{if(this.b=null,this.d=null,this.g){const W=this.g;return this.g=null,W()}}));const A=()=>{this.a=null,this.d?.(null)};return this.a=v===F.MicrotaskDelay?i(A):a(v,A),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new $.CancellationError),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}}t.Delayer=l;class h{constructor(c){this.a=new l(c),this.b=new r}trigger(c,v){return this.a.trigger(()=>this.b.queue(c),v)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose()}}t.ThrottledDelayer=h;class p{constructor(){this.a=!1,this.b=new Promise((c,v)=>{this.d=c})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}}t.Barrier=p;class O extends p{constructor(c){super(),this.f=setTimeout(()=>this.open(),c)}open(){clearTimeout(this.f),super.open()}}t.AutoOpenBarrier=O;function R(y,c){return c?new Promise((v,A)=>{const W=setTimeout(()=>{H.dispose(),v()},y),H=c.onCancellationRequested(()=>{clearTimeout(W),H.dispose(),A(new $.CancellationError)})}):S(v=>R(y,v))}t.timeout=R;function g(y,c=0){const v=setTimeout(y,c);return(0,L.toDisposable)(()=>clearTimeout(v))}t.disposableTimeout=g;function I(y){const c=[];let v=0;const A=y.length;function W(){return v<A?y[v++]():null}function H(_){_!=null&&c.push(_);const ie=W();return ie?ie.then(H):Promise.resolve(c)}return Promise.resolve(null).then(H)}t.sequence=I;function E(y,c=A=>!!A,v=null){let A=0;const W=y.length,H=()=>{if(A>=W)return Promise.resolve(v);const _=y[A++];return Promise.resolve(_()).then(re=>c(re)?Promise.resolve(re):H())};return H()}t.first=E;function d(y,c=A=>!!A,v=null){if(y.length===0)return Promise.resolve(v);let A=y.length;const W=()=>{A=-1;for(const H of y)H.cancel?.()};return new Promise((H,_)=>{for(const ie of y)ie.then(re=>{--A>=0&&c(re)?(W(),H(re)):A===0&&H(v)}).catch(re=>{--A>=0&&(W(),_(re))})})}t.firstParallel=d;class P{constructor(c){this.a=0,this.d=c,this.f=[],this.b=0,this.g=new U.Emitter}get onDrained(){return this.g.event}get size(){return this.a}queue(c){return this.a++,new Promise((v,A)=>{this.f.push({factory:c,c:v,e:A}),this.h()})}h(){for(;this.f.length&&this.b<this.d;){const c=this.f.shift();this.b++;const v=c.factory();v.then(c.c,c.e),v.then(()=>this.j(),()=>this.j())}}j(){this.a--,this.b--,this.f.length>0?this.h():this.g.fire()}dispose(){this.g.dispose()}}t.Limiter=P;class V extends P{constructor(){super(1)}}t.Queue=V;class K{constructor(){this.a=new Map,this.b=new Set}async whenDrained(){if(this.d())return;const c=new k;return this.b.add(c),c.p}d(){for(const[,c]of this.a)if(c.size>0)return!1;return!0}queueFor(c,v=C.extUri){const A=v.getComparisonKey(c);let W=this.a.get(A);return W||(W=new V,U.Event.once(W.onDrained)(()=>{W?.dispose(),this.a.delete(A),this.f()}),this.a.set(A,W)),W}f(){!this.d()||this.g()}g(){for(const c of this.b)c.complete();this.b.clear()}dispose(){for(const[,c]of this.a)c.dispose();this.a.clear(),this.g()}}t.ResourceQueue=K;class Q{constructor(c,v){this.a=-1,typeof c=="function"&&typeof v=="number"&&this.setIfNotSet(c,v)}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearTimeout(this.a),this.a=-1)}cancelAndSet(c,v){this.cancel(),this.a=setTimeout(()=>{this.a=-1,c()},v)}setIfNotSet(c,v){this.a===-1&&(this.a=setTimeout(()=>{this.a=-1,c()},v))}}t.TimeoutTimer=Q;class X{constructor(){this.a=-1}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearInterval(this.a),this.a=-1)}cancelAndSet(c,v){this.cancel(),this.a=setInterval(()=>{c()},v)}}t.IntervalTimer=X;class Y{constructor(c,v){this.b=-1,this.a=c,this.d=v,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(c=this.d){this.cancel(),this.b=setTimeout(this.f,c)}get delay(){return this.d}set delay(c){this.d=c}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}}t.RunOnceScheduler=Y;class Z{constructor(c,v){v%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${v}ms is not a multiple of 1000ms.`),this.a=c,this.b=v,this.d=0,this.f=-1,this.g=this.h.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearInterval(this.f),this.f=-1)}schedule(c=this.b){c%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${c}ms is not a multiple of 1000ms.`),this.cancel(),this.d=Math.ceil(c/1e3),this.f=setInterval(this.g,1e3)}isScheduled(){return this.f!==-1}h(){this.d--,!(this.d>0)&&(clearInterval(this.f),this.f=-1,this.a?.())}}t.ProcessTimeRunOnceScheduler=Z;class se extends Y{constructor(c,v){super(c,v),this.j=[]}work(c){this.j.push(c),this.isScheduled()||this.schedule()}h(){const c=this.j;this.j=[],this.a?.(c)}dispose(){this.j=[],super.dispose()}}t.RunOnceWorker=se;class G extends L.Disposable{constructor(c,v){super(),this.g=c,this.h=v,this.a=[],this.b=this.B(new L.MutableDisposable),this.f=!1}get pending(){return this.a.length}work(c){if(this.f)return!1;if(typeof this.g.maxBufferedWork=="number"){if(this.b.value){if(this.pending+c.length>this.g.maxBufferedWork)return!1}else if(this.pending+c.length-this.g.maxWorkChunkSize>this.g.maxBufferedWork)return!1}for(const v of c)this.a.push(v);return this.b.value||this.j(),!0}j(){this.h(this.a.splice(0,this.g.maxWorkChunkSize)),this.a.length>0&&(this.b.value=new Y(()=>{this.b.clear(),this.j()},this.g.throttleDelay),this.b.value.schedule())}dispose(){super.dispose(),this.f=!0}}t.ThrottledWorker=G,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?t.runWhenIdle=y=>{(0,q.setTimeout0)(()=>{if(c)return;const v=Date.now()+15;y(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,v-Date.now())}}))});let c=!1;return{dispose(){c||(c=!0)}}}:t.runWhenIdle=(y,c)=>{const v=requestIdleCallback(y,typeof c=="number"?{timeout:c}:void 0);let A=!1;return{dispose(){A||(A=!0,cancelIdleCallback(v))}}}}();class e{constructor(c){this.d=!1,this.a=()=>{try{this.f=c()}catch(v){this.g=v}finally{this.d=!0}},this.b=(0,t.runWhenIdle)(()=>this.a())}dispose(){this.b.dispose()}get value(){if(this.d||(this.b.dispose(),this.a()),this.g)throw this.g;return this.f}get isInitialized(){return this.d}}t.IdleValue=e;async function u(y,c,v){let A;for(let W=0;W<v;W++)try{return await y()}catch(H){A=H,await R(c)}throw A}t.retry=u;class T{hasPending(c){return this.a?typeof c=="number"?this.a.taskId===c:!!this.a:!1}get pending(){return this.a?.promise}cancelPending(){this.a?.cancel()}setPending(c,v,A){return this.a={taskId:c,cancel:()=>A?.(),promise:v},v.then(()=>this.d(c),()=>this.d(c)),v}d(c){this.a&&c===this.a.taskId&&(this.a=void 0,this.f())}f(){if(this.b){const c=this.b;this.b=void 0,c.run().then(c.promiseResolve,c.promiseReject)}}setNext(c){if(this.b)this.b.run=c;else{let v,A;const W=new Promise((H,_)=>{v=H,A=_});this.b={run:c,promise:W,promiseResolve:v,promiseReject:A}}return this.b.promise}hasNext(){return!!this.b}async join(){return this.b?.promise??this.a?.promise}}t.TaskSequentializer=T;class b{constructor(c,v=()=>Date.now()){this.d=c,this.f=v,this.a=0,this.b=0}increment(){const c=this.f();return c-this.a>this.d&&(this.a=c,this.b=0),this.b++,this.b}}t.IntervalCounter=b;class k{get isRejected(){return this.d}get isResolved(){return this.f}get isSettled(){return this.d||this.f}constructor(){this.d=!1,this.f=!1,this.p=new Promise((c,v)=>{this.a=c,this.b=v})}complete(c){return new Promise(v=>{this.a(c),this.f=!0,v()})}error(c){return new Promise(v=>{this.b(c),this.d=!0,v()})}cancel(){new Promise(c=>{this.b(new $.CancellationError),this.d=!0,c()})}}t.DeferredPromise=k;var N;(function(y){async function c(A){let W;const H=await Promise.all(A.map(_=>_.then(ie=>ie,ie=>{W||(W=ie)})));if(typeof W<"u")throw W;return H}y.settled=c;function v(A){return new Promise(async(W,H)=>{try{await A(W,H)}catch(_){H(_)}})}y.withAsyncBody=v})(N=t.Promises||(t.Promises={}));var j;(function(y){y[y.Initial=0]="Initial",y[y.DoneOK=1]="DoneOK",y[y.DoneError=2]="DoneError"})(j||(j={}));class z{static fromArray(c){return new z(v=>{v.emitMany(c)})}static fromPromise(c){return new z(async v=>{v.emitMany(await c)})}static fromPromises(c){return new z(async v=>{await Promise.all(c.map(async A=>v.emitOne(await A)))})}static merge(c){return new z(async v=>{await Promise.all(c.map(async A=>{for await(const W of A)v.emitOne(W)}))})}constructor(c){this.a=0,this.b=[],this.d=null,this.f=new U.Emitter,queueMicrotask(async()=>{const v={emitOne:A=>this.g(A),emitMany:A=>this.h(A),reject:A=>this.k(A)};try{await Promise.resolve(c(v)),this.j()}catch(A){this.k(A)}finally{v.emitOne=void 0,v.emitMany=void 0,v.reject=void 0}})}[Symbol.asyncIterator](){let c=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(c<this.b.length)return{done:!1,value:this.b[c++]};if(this.a===1)return{done:!0,value:void 0};await U.Event.toPromise(this.f.event)}while(!0)}}}static map(c,v){return new z(async A=>{for await(const W of c)A.emitOne(v(W))})}map(c){return z.map(this,c)}static filter(c,v){return new z(async A=>{for await(const W of c)v(W)&&A.emitOne(W)})}filter(c){return z.filter(this,c)}static coalesce(c){return z.filter(c,v=>!!v)}coalesce(){return z.coalesce(this)}static async toPromise(c){const v=[];for await(const A of c)v.push(A);return v}toPromise(){return z.toPromise(this)}g(c){this.a===0&&(this.b.push(c),this.f.fire())}h(c){this.a===0&&(this.b=this.b.concat(c),this.f.fire())}j(){this.a===0&&(this.a=1,this.f.fire())}k(c){this.a===0&&(this.a=2,this.d=c,this.f.fire())}}z.EMPTY=z.fromArray([]),t.AsyncIterableObject=z;class x extends z{constructor(c,v){super(v),this.l=c}cancel(){this.l.cancel()}}t.CancelableAsyncIterableObject=x;function J(y){const c=new B.CancellationTokenSource,v=y(c.token);return new x(c,async A=>{const W=c.token.onCancellationRequested(()=>{W.dispose(),c.dispose(),A.reject(new $.CancellationError)});try{for await(const H of v){if(c.token.isCancellationRequested)return;A.emitOne(H)}W.dispose(),c.dispose()}catch(H){W.dispose(),c.dispose(),A.reject(H)}})}t.createCancelableAsyncIterable=J}),define(te[22],ne([0,1,34,20,8,13,4,2,3]),function(ee,t,B,$,U,L,C,q,F){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.patternsEquals=t.getPathTerms=t.getBasenameTerms=t.isRelativePattern=t.parse=t.match=t.splitGlobAware=t.GLOB_SPLIT=t.GLOBSTAR=t.getEmptyExpression=void 0;function m(){return Object.create(null)}t.getEmptyExpression=m,t.GLOBSTAR="**",t.GLOB_SPLIT="/";const S="[/\\\\]",D="[^/\\\\]",w=/\//g;function M(b,k){switch(b){case 0:return"";case 1:return`${D}*?`;default:return`(?:${S}|${D}+${S}${k?`|${S}${D}+`:""})*?`}}function f(b,k){if(!b)return[];const N=[];let j=!1,z=!1,x="";for(const J of b){switch(J){case k:if(!j&&!z){N.push(x),x="";continue}break;case"{":j=!0;break;case"}":j=!1;break;case"[":z=!0;break;case"]":z=!1;break}x+=J}return x&&N.push(x),N}t.splitGlobAware=f;function s(b){if(!b)return"";let k="";const N=f(b,t.GLOB_SPLIT);if(N.every(j=>j===t.GLOBSTAR))k=".*";else{let j=!1;N.forEach((z,x)=>{if(z===t.GLOBSTAR){if(j)return;k+=M(2,x===N.length-1)}else{let J=!1,y="",c=!1,v="";for(const A of z){if(A!=="}"&&J){y+=A;continue}if(c&&(A!=="]"||!v)){let W;A==="-"?W=A:(A==="^"||A==="!")&&!v?W="^":A===t.GLOB_SPLIT?W="":W=(0,F.escapeRegExpCharacters)(A),v+=W;continue}switch(A){case"{":J=!0;continue;case"[":c=!0;continue;case"}":{k+=`(?:${f(y,",").map(_=>s(_)).join("|")})`,J=!1,y="";break}case"]":{k+="["+v+"]",c=!1,v="";break}case"?":k+=D;continue;case"*":k+=M(1);continue;default:k+=(0,F.escapeRegExpCharacters)(A)}}x<N.length-1&&(N[x+1]!==t.GLOBSTAR||x+2<N.length)&&(k+=S)}j=z===t.GLOBSTAR})}return k}const r=/^\*\*\/\*\.[\w\.-]+$/,o=/^\*\*\/([\w\.-]+)\/?$/,n=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,a=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,i=/^\*\*((\/[\w\.-]+)+)\/?$/,l=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,h=new L.LRUCache(1e4),p=function(){return!1},O=function(){return null};function R(b,k){if(!b)return O;let N;typeof b!="string"?N=b.pattern:N=b,N=N.trim();const j=`${N}_${!!k.trimForExclusions}`;let z=h.get(j);if(z)return g(z,b);let x;return r.test(N)?z=E(N.substr(4),N):(x=o.exec(I(N,k)))?z=d(x[1],N):(k.trimForExclusions?a:n).test(N)?z=P(N,k):(x=i.exec(I(N,k)))?z=V(x[1].substr(1),N,!0):(x=l.exec(I(N,k)))?z=V(x[1],N,!1):z=K(N),h.set(j,z),g(z,b)}function g(b,k){if(typeof k=="string")return b;const N=function(j,z){return(0,U.isEqualOrParent)(j,k.base,!q.isLinux)?b((0,F.ltrim)(j.substr(k.base.length),C.sep),z):null};return N.allBasenames=b.allBasenames,N.allPaths=b.allPaths,N.basenames=b.basenames,N.patterns=b.patterns,N}function I(b,k){return k.trimForExclusions&&b.endsWith("/**")?b.substr(0,b.length-2):b}function E(b,k){return function(N,j){return typeof N=="string"&&N.endsWith(b)?k:null}}function d(b,k){const N=`/${b}`,j=`\\${b}`,z=function(J,y){return typeof J!="string"?null:y?y===b?k:null:J===b||J.endsWith(N)||J.endsWith(j)?k:null},x=[b];return z.basenames=x,z.patterns=[k],z.allBasenames=x,z}function P(b,k){const N=u(b.slice(1,-1).split(",").map(y=>R(y,k)).filter(y=>y!==O),b),j=N.length;if(!j)return O;if(j===1)return N[0];const z=function(y,c){for(let v=0,A=N.length;v<A;v++)if(N[v](y,c))return b;return null},x=N.find(y=>!!y.allBasenames);x&&(z.allBasenames=x.allBasenames);const J=N.reduce((y,c)=>c.allPaths?y.concat(c.allPaths):y,[]);return J.length&&(z.allPaths=J),z}function V(b,k,N){const j=C.sep===C.posix.sep,z=j?b:b.replace(w,C.sep),x=C.sep+z,J=C.posix.sep+b;let y;return N?y=function(c,v){return typeof c=="string"&&(c===z||c.endsWith(x)||!j&&(c===b||c.endsWith(J)))?k:null}:y=function(c,v){return typeof c=="string"&&(c===z||!j&&c===b)?k:null},y.allPaths=[(N?"*/":"./")+b],y}function K(b){try{const k=new RegExp(`^${s(b)}$`);return function(N){return k.lastIndex=0,typeof N=="string"&&k.test(N)?b:null}}catch{return O}}function Q(b,k,N){return!b||typeof k!="string"?!1:X(b)(k,void 0,N)}t.match=Q;function X(b,k={}){if(!b)return p;if(typeof b=="string"||Y(b)){const N=R(b,k);if(N===O)return p;const j=function(z,x){return!!N(z,x)};return N.allBasenames&&(j.allBasenames=N.allBasenames),N.allPaths&&(j.allPaths=N.allPaths),j}return G(b,k)}t.parse=X;function Y(b){const k=b;return k?typeof k.base=="string"&&typeof k.pattern=="string":!1}t.isRelativePattern=Y;function Z(b){return b.allBasenames||[]}t.getBasenameTerms=Z;function se(b){return b.allPaths||[]}t.getPathTerms=se;function G(b,k){const N=u(Object.getOwnPropertyNames(b).map(y=>e(y,b[y],k)).filter(y=>y!==O)),j=N.length;if(!j)return O;if(!N.some(y=>!!y.requiresSiblings)){if(j===1)return N[0];const y=function(A,W){let H;for(let _=0,ie=N.length;_<ie;_++){const re=N[_](A,W);if(typeof re=="string")return re;(0,$.isThenable)(re)&&(H||(H=[]),H.push(re))}return H?(async()=>{for(const _ of H){const ie=await _;if(typeof ie=="string")return ie}return null})():null},c=N.find(A=>!!A.allBasenames);c&&(y.allBasenames=c.allBasenames);const v=N.reduce((A,W)=>W.allPaths?A.concat(W.allPaths):A,[]);return v.length&&(y.allPaths=v),y}const z=function(y,c,v){let A,W;for(let H=0,_=N.length;H<_;H++){const ie=N[H];ie.requiresSiblings&&v&&(c||(c=(0,C.basename)(y)),A||(A=c.substr(0,c.length-(0,C.extname)(y).length)));const re=ie(y,c,A,v);if(typeof re=="string")return re;(0,$.isThenable)(re)&&(W||(W=[]),W.push(re))}return W?(async()=>{for(const H of W){const _=await H;if(typeof _=="string")return _}return null})():null},x=N.find(y=>!!y.allBasenames);x&&(z.allBasenames=x.allBasenames);const J=N.reduce((y,c)=>c.allPaths?y.concat(c.allPaths):y,[]);return J.length&&(z.allPaths=J),z}function e(b,k,N){if(k===!1)return O;const j=R(b,N);if(j===O)return O;if(typeof k=="boolean")return j;if(k){const z=k.when;if(typeof z=="string"){const x=(J,y,c,v)=>{if(!v||!j(J,y))return null;const A=z.replace("$(basename)",()=>c),W=v(A);return(0,$.isThenable)(W)?W.then(H=>H?b:null):W?b:null};return x.requiresSiblings=!0,x}}return j}function u(b,k){const N=b.filter(y=>!!y.basenames);if(N.length<2)return b;const j=N.reduce((y,c)=>{const v=c.basenames;return v?y.concat(v):y},[]);let z;if(k){z=[];for(let y=0,c=j.length;y<c;y++)z.push(k)}else z=N.reduce((y,c)=>{const v=c.patterns;return v?y.concat(v):y},[]);const x=function(y,c){if(typeof y!="string")return null;if(!c){let A;for(A=y.length;A>0;A--){const W=y.charCodeAt(A-1);if(W===47||W===92)break}c=y.substr(A)}const v=j.indexOf(c);return v!==-1?z[v]:null};x.basenames=j,x.patterns=z,x.allBasenames=j;const J=b.filter(y=>!y.basenames);return J.push(x),J}function T(b,k){return(0,B.equals)(b,k,(N,j)=>typeof N=="string"&&typeof j=="string"?N===j:typeof N!="string"&&typeof j!="string"?N.base===j.base&&N.pattern===j.pattern:!1)}t.patternsEquals=T}),define(te[23],ne([0,1,3,2,6]),function(ee,t,B,$,U){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StringBuilder=t.decodeUTF16LE=t.getPlatformTextDecoder=void 0;let L;function C(){return L||(L=new TextDecoder("UTF-16LE")),L}let q;function F(){return q||(q=new TextDecoder("UTF-16BE")),q}let m;function S(){return m||(m=$.isLittleEndian()?C():F()),m}t.getPlatformTextDecoder=S;function D(f,s,r){const o=new Uint16Array(f.buffer,s,r);return r>0&&(o[0]===65279||o[0]===65534)?w(f,s,r):C().decode(o)}t.decodeUTF16LE=D;function w(f,s,r){const o=[];let n=0;for(let a=0;a<r;a++){const i=U.readUInt16LE(f,s);s+=2,o[n++]=String.fromCharCode(i)}return o.join("")}class M{constructor(s){this.a=s|0,this.b=new Uint16Array(this.a),this.c=null,this.d=0}reset(){this.c=null,this.d=0}build(){return this.c!==null?(this.f(),this.c.join("")):this.e()}e(){if(this.d===0)return"";const s=new Uint16Array(this.b.buffer,0,this.d);return S().decode(s)}f(){const s=this.e();this.d=0,this.c===null?this.c=[s]:this.c[this.c.length]=s}appendCharCode(s){const r=this.a-this.d;r<=1&&(r===0||B.isHighSurrogate(s))&&this.f(),this.b[this.d++]=s}appendASCIICharCode(s){this.d===this.a&&this.f(),this.b[this.d++]=s}appendString(s){const r=s.length;if(this.d+r>=this.a){this.f(),this.c[this.c.length]=s;return}for(let o=0;o<r;o++)this.b[this.d++]=s.charCodeAt(o)}}t.StringBuilder=M}),define(te[24],ne([0,1,6,23]),function(ee,t,B,$){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compressConsecutiveTextChanges=t.TextChange=void 0;function U(F){return F.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class L{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(m,S,D,w){this.oldPosition=m,this.oldText=S,this.newPosition=D,this.newText=w}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${U(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${U(this.oldText)}")`:`(replace@${this.oldPosition} "${U(this.oldText)}" with "${U(this.newText)}")`}static a(m){return 4+2*m.length}static c(m,S,D){const w=S.length;B.writeUInt32BE(m,w,D),D+=4;for(let M=0;M<w;M++)B.writeUInt16LE(m,S.charCodeAt(M),D),D+=2;return D}static d(m,S){const D=B.readUInt32BE(m,S);return S+=4,(0,$.decodeUTF16LE)(m,S,D)}writeSize(){return 4+4+L.a(this.oldText)+L.a(this.newText)}write(m,S){return B.writeUInt32BE(m,this.oldPosition,S),S+=4,B.writeUInt32BE(m,this.newPosition,S),S+=4,S=L.c(m,this.oldText,S),S=L.c(m,this.newText,S),S}static read(m,S,D){const w=B.readUInt32BE(m,S);S+=4;const M=B.readUInt32BE(m,S);S+=4;const f=L.d(m,S);S+=L.a(f);const s=L.d(m,S);return S+=L.a(s),D.push(new L(w,f,M,s)),S}}t.TextChange=L;function C(F,m){return F===null||F.length===0?m:new q(F,m).compress()}t.compressConsecutiveTextChanges=C;class q{constructor(m,S){this.a=m,this.c=S,this.d=[],this.e=0,this.f=this.a.length,this.g=0,this.h=this.c.length,this.j=0}compress(){let m=0,S=0,D=this.n(m),w=this.l(S);for(;m<this.f||S<this.h;){if(D===null){this.k(w),w=this.l(++S);continue}if(w===null){this.m(D),D=this.n(++m);continue}if(w.oldEnd<=D.newPosition){this.k(w),w=this.l(++S);continue}if(D.newEnd<=w.oldPosition){this.m(D),D=this.n(++m);continue}if(w.oldPosition<D.newPosition){const[o,n]=q.r(w,D.newPosition-w.oldPosition);this.k(o),w=n;continue}if(D.newPosition<w.oldPosition){const[o,n]=q.q(D,w.oldPosition-D.newPosition);this.m(o),D=n;continue}let s,r;if(w.oldEnd===D.newEnd)s=D,r=w,D=this.n(++m),w=this.l(++S);else if(w.oldEnd<D.newEnd){const[o,n]=q.q(D,w.oldLength);s=o,r=w,D=n,w=this.l(++S)}else{const[o,n]=q.r(w,D.newLength);s=D,r=o,D=this.n(++m),w=n}this.d[this.e++]=new L(s.oldPosition,s.oldText,r.newPosition,r.newText),this.g+=s.newLength-s.oldLength,this.j+=r.newLength-r.oldLength}const M=q.s(this.d);return q.t(M)}k(m){this.d[this.e++]=q.o(this.g,m),this.j+=m.newLength-m.oldLength}l(m){return m<this.h?this.c[m]:null}m(m){this.d[this.e++]=q.p(this.j,m),this.g+=m.newLength-m.oldLength}n(m){return m<this.f?this.a[m]:null}static o(m,S){return new L(S.oldPosition-m,S.oldText,S.newPosition,S.newText)}static p(m,S){return new L(S.oldPosition,S.oldText,S.newPosition+m,S.newText)}static q(m,S){const D=m.newText.substr(0,S),w=m.newText.substr(S);return[new L(m.oldPosition,m.oldText,m.newPosition,D),new L(m.oldEnd,"",m.newPosition+S,w)]}static r(m,S){const D=m.oldText.substr(0,S),w=m.oldText.substr(S);return[new L(m.oldPosition,D,m.newPosition,m.newText),new L(m.oldPosition+S,w,m.newEnd,"")]}static s(m){if(m.length===0)return m;const S=[];let D=0,w=m[0];for(let M=1;M<m.length;M++){const f=m[M];w.oldEnd===f.oldPosition?w=new L(w.oldPosition,w.oldText+f.oldText,w.newPosition,w.newText+f.newText):(S[D++]=w,w=f)}return S[D++]=w,S}static t(m){if(m.length===0)return m;const S=[];let D=0;for(let w=0;w<m.length;w++){const M=m[w];M.oldText!==M.newText&&(S[D++]=M)}return S}}}),define(te[11],ne([0,1,35,12,25,17,36]),function(ee,t,B,$,U,L,C){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PieceTreeBase=t.StringBuffer=t.Piece=t.createLineStarts=t.createLineStartsFast=void 0;const q=65535;function F(o){let n;return o[o.length-1]<65536?n=new Uint16Array(o.length):n=new Uint32Array(o.length),n.set(o,0),n}class m{constructor(n,a,i,l,h){this.lineStarts=n,this.cr=a,this.lf=i,this.crlf=l,this.isBasicASCII=h}}function S(o,n=!0){const a=[0];let i=1;for(let l=0,h=o.length;l<h;l++){const p=o.charCodeAt(l);p===13?l+1<h&&o.charCodeAt(l+1)===10?(a[i++]=l+2,l++):a[i++]=l+1:p===10&&(a[i++]=l+1)}return n?F(a):a}t.createLineStartsFast=S;function D(o,n){o.length=0,o[0]=0;let a=1,i=0,l=0,h=0,p=!0;for(let R=0,g=n.length;R<g;R++){const I=n.charCodeAt(R);I===13?R+1<g&&n.charCodeAt(R+1)===10?(h++,o[a++]=R+2,R++):(i++,o[a++]=R+1):I===10?(l++,o[a++]=R+1):p&&I!==9&&(I<32||I>126)&&(p=!1)}const O=new m(F(o),i,l,h,p);return o.length=0,O}t.createLineStarts=D;class w{constructor(n,a,i,l,h){this.bufferIndex=n,this.start=a,this.end=i,this.lineFeedCnt=l,this.length=h}}t.Piece=w;class M{constructor(n,a){this.buffer=n,this.lineStarts=a}}t.StringBuffer=M;class f{constructor(n,a){this.a=[],this.c=n,this.d=a,this.b=0,n.root!==L.SENTINEL&&n.iterate(n.root,i=>(i!==L.SENTINEL&&this.a.push(i.piece),!0))}read(){return this.a.length===0?this.b===0?(this.b++,this.d):null:this.b>this.a.length-1?null:this.b===0?this.d+this.c.getPieceContent(this.a[this.b++]):this.c.getPieceContent(this.a[this.b++])}}class s{constructor(n){this.a=n,this.b=[]}get(n){for(let a=this.b.length-1;a>=0;a--){const i=this.b[a];if(i.nodeStartOffset<=n&&i.nodeStartOffset+i.node.piece.length>=n)return i}return null}get2(n){for(let a=this.b.length-1;a>=0;a--){const i=this.b[a];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<n&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=n)return i}return null}set(n){this.b.length>=this.a&&this.b.shift(),this.b.push(n)}validate(n){let a=!1;const i=this.b;for(let l=0;l<i.length;l++){const h=i[l];if(h.node.parent===null||h.nodeStartOffset>=n){i[l]=null,a=!0;continue}}if(a){const l=[];for(const h of i)h!==null&&l.push(h);this.b=l}}}class r{constructor(n,a,i){this.create(n,a,i)}create(n,a,i){this.a=[new M("",[0])],this.g={line:0,column:0},this.root=L.SENTINEL,this.b=1,this.c=0,this.d=a,this.e=a.length,this.f=i;let l=null;for(let h=0,p=n.length;h<p;h++)if(n[h].buffer.length>0){n[h].lineStarts||(n[h].lineStarts=S(n[h].buffer));const O=new w(h+1,{line:0,column:0},{line:n[h].lineStarts.length-1,column:n[h].buffer.length-n[h].lineStarts[n[h].lineStarts.length-1]},n[h].lineStarts.length-1,n[h].buffer.length);this.a.push(n[h]),l=this.S(l,O)}this.h=new s(1),this.j={lineNumber:0,value:""},this.y()}normalizeEOL(n){const a=q,i=a-Math.floor(a/3),l=i*2;let h="",p=0;const O=[];if(this.iterate(this.root,R=>{const g=this.R(R),I=g.length;if(p<=i||p+I<l)return h+=g,p+=I,!0;const E=h.replace(/\r\n|\r|\n/g,n);return O.push(new M(E,S(E))),h=g,p=I,!0}),p>0){const R=h.replace(/\r\n|\r|\n/g,n);O.push(new M(R,S(R)))}this.create(O,n,!0)}getEOL(){return this.d}setEOL(n){this.d=n,this.e=this.d.length,this.normalizeEOL(n)}createSnapshot(n){return new f(this,n)}equal(n){if(this.getLength()!==n.getLength()||this.getLineCount()!==n.getLineCount())return!1;const a=0;return this.iterate(this.root,l=>{if(l===L.SENTINEL)return!0;const h=this.R(l),p=h.length,O=n.G(a),R=n.G(a+p),g=n.getValueInRange2(O,R);return h===g})}getOffsetAt(n,a){let i=0,l=this.root;for(;l!==L.SENTINEL;)if(l.left!==L.SENTINEL&&l.lf_left+1>=n)l=l.left;else{if(l.lf_left+l.piece.lineFeedCnt+1>=n)return i+=l.size_left,i+=this.B(l,n-l.lf_left-2)+a-1;n-=l.lf_left+l.piece.lineFeedCnt,i+=l.size_left+l.piece.length,l=l.right}return i}getPositionAt(n){n=Math.floor(n),n=Math.max(0,n);let a=this.root,i=0;const l=n;for(;a!==L.SENTINEL;)if(a.size_left!==0&&a.size_left>=n)a=a.left;else if(a.size_left+a.piece.length>=n){const h=this.A(a,n-a.size_left);if(i+=a.lf_left+h.index,h.index===0){const p=this.getOffsetAt(i+1,1),O=l-p;return new B.Position(i+1,O+1)}return new B.Position(i+1,h.remainder+1)}else if(n-=a.size_left+a.piece.length,i+=a.lf_left+a.piece.lineFeedCnt,a.right===L.SENTINEL){const h=this.getOffsetAt(i+1,1),p=l-n-h;return new B.Position(i+1,p+1)}else a=a.right;return new B.Position(1,1)}getValueInRange(n,a){if(n.startLineNumber===n.endLineNumber&&n.startColumn===n.endColumn)return"";const i=this.H(n.startLineNumber,n.startColumn),l=this.H(n.endLineNumber,n.endColumn),h=this.getValueInRange2(i,l);return a?a!==this.d||!this.f?h.replace(/\r\n|\r|\n/g,a):a===this.getEOL()&&this.f?h:h.replace(/\r\n|\r|\n/g,a):h}getValueInRange2(n,a){if(n.node===a.node){const O=n.node,R=this.a[O.piece.bufferIndex].buffer,g=this.u(O.piece.bufferIndex,O.piece.start);return R.substring(g+n.remainder,g+a.remainder)}let i=n.node;const l=this.a[i.piece.bufferIndex].buffer,h=this.u(i.piece.bufferIndex,i.piece.start);let p=l.substring(h+n.remainder,h+i.piece.length);for(i=i.next();i!==L.SENTINEL;){const O=this.a[i.piece.bufferIndex].buffer,R=this.u(i.piece.bufferIndex,i.piece.start);if(i===a.node){p+=O.substring(R,R+a.remainder);break}else p+=O.substr(R,i.piece.length);i=i.next()}return p}getLinesContent(){const n=[];let a=0,i="",l=!1;return this.iterate(this.root,h=>{if(h===L.SENTINEL)return!0;const p=h.piece;let O=p.length;if(O===0)return!0;const R=this.a[p.bufferIndex].buffer,g=this.a[p.bufferIndex].lineStarts,I=p.start.line,E=p.end.line;let d=g[I]+p.start.column;if(l&&(R.charCodeAt(d)===10&&(d++,O--),n[a++]=i,i="",l=!1,O===0))return!0;if(I===E)return!this.f&&R.charCodeAt(d+O-1)===13?(l=!0,i+=R.substr(d,O-1)):i+=R.substr(d,O),!0;i+=this.f?R.substring(d,Math.max(d,g[I+1]-this.e)):R.substring(d,g[I+1]).replace(/(\r\n|\r|\n)$/,""),n[a++]=i;for(let P=I+1;P<E;P++)i=this.f?R.substring(g[P],g[P+1]-this.e):R.substring(g[P],g[P+1]).replace(/(\r\n|\r|\n)$/,""),n[a++]=i;return!this.f&&R.charCodeAt(g[E]+p.end.column-1)===13?(l=!0,p.end.column===0?a--:i=R.substr(g[E],p.end.column-1)):i=R.substr(g[E],p.end.column),!0}),l&&(n[a++]=i,i=""),n[a++]=i,n}getLength(){return this.c}getLineCount(){return this.b}getLineContent(n){return this.j.lineNumber===n?this.j.value:(this.j.lineNumber=n,n===this.b?this.j.value=this.getLineRawContent(n):this.f?this.j.value=this.getLineRawContent(n,this.e):this.j.value=this.getLineRawContent(n).replace(/(\r\n|\r|\n)$/,""),this.j.value)}l(n){if(n.remainder===n.node.piece.length){const a=n.node.next();if(!a)return 0;const i=this.a[a.piece.bufferIndex],l=this.u(a.piece.bufferIndex,a.piece.start);return i.buffer.charCodeAt(l)}else{const a=this.a[n.node.piece.bufferIndex],l=this.u(n.node.piece.bufferIndex,n.node.piece.start)+n.remainder;return a.buffer.charCodeAt(l)}}getLineCharCode(n,a){const i=this.H(n,a+1);return this.l(i)}getLineLength(n){if(n===this.getLineCount()){const a=this.getOffsetAt(n,1);return this.getLength()-a}return this.getOffsetAt(n+1,1)-this.getOffsetAt(n,1)-this.e}getCharCode(n){const a=this.G(n);return this.l(a)}findMatchesInNode(n,a,i,l,h,p,O,R,g,I,E){const d=this.a[n.piece.bufferIndex],P=this.u(n.piece.bufferIndex,n.piece.start),V=this.u(n.piece.bufferIndex,h),K=this.u(n.piece.bufferIndex,p);let Q;const X={line:0,column:0};let Y,Z;a._wordSeparators?(Y=d.buffer.substring(V,K),Z=se=>se+V,a.reset(0)):(Y=d.buffer,Z=se=>se,a.reset(V));do if(Q=a.next(Y),Q){if(Z(Q.index)>=K)return I;this.s(n,Z(Q.index)-P,X);const se=this.t(n.piece.bufferIndex,h,X),G=X.line===h.line?X.column-h.column+l:X.column+1,e=G+Q[0].length;if(E[I++]=(0,C.createFindMatch)(new $.Range(i+se,G,i+se,e),Q,R),Z(Q.index)+Q[0].length>=K||I>=g)return I}while(Q);return I}findMatchesLineByLine(n,a,i,l){const h=[];let p=0;const O=new C.Searcher(a.wordSeparators,a.regex);let R=this.H(n.startLineNumber,n.startColumn);if(R===null)return[];const g=this.H(n.endLineNumber,n.endColumn);if(g===null)return[];let I=this.s(R.node,R.remainder);const E=this.s(g.node,g.remainder);if(R.node===g.node)return this.findMatchesInNode(R.node,O,n.startLineNumber,n.startColumn,I,E,a,i,l,p,h),h;let d=n.startLineNumber,P=R.node;for(;P!==g.node;){const K=this.t(P.piece.bufferIndex,I,P.piece.end);if(K>=1){const X=this.a[P.piece.bufferIndex].lineStarts,Y=this.u(P.piece.bufferIndex,P.piece.start),Z=X[I.line+K],se=d===n.startLineNumber?n.startColumn:1;if(p=this.findMatchesInNode(P,O,d,se,I,this.s(P,Z-Y),a,i,l,p,h),p>=l)return h;d+=K}const Q=d===n.startLineNumber?n.startColumn-1:0;if(d===n.endLineNumber){const X=this.getLineContent(d).substring(Q,n.endColumn-1);return p=this.n(a,O,X,n.endLineNumber,Q,p,h,i,l),h}if(p=this.n(a,O,this.getLineContent(d).substr(Q),d,Q,p,h,i,l),p>=l)return h;d++,R=this.H(d,1),P=R.node,I=this.s(R.node,R.remainder)}if(d===n.endLineNumber){const K=d===n.startLineNumber?n.startColumn-1:0,Q=this.getLineContent(d).substring(K,n.endColumn-1);return p=this.n(a,O,Q,n.endLineNumber,K,p,h,i,l),h}const V=d===n.startLineNumber?n.startColumn:1;return p=this.findMatchesInNode(g.node,O,d,V,I,E,a,i,l,p,h),h}n(n,a,i,l,h,p,O,R,g){const I=n.wordSeparators;if(!R&&n.simpleSearch){const d=n.simpleSearch,P=d.length,V=i.length;let K=-P;for(;(K=i.indexOf(d,K+P))!==-1;)if((!I||(0,C.isValidMatch)(I,i,V,K,P))&&(O[p++]=new U.FindMatch(new $.Range(l,K+1+h,l,K+1+P+h),null),p>=g))return p;return p}let E;a.reset(0);do if(E=a.next(i),E&&(O[p++]=(0,C.createFindMatch)(new $.Range(l,E.index+1+h,l,E.index+1+E[0].length+h),E,R),p>=g))return p;while(E);return p}insert(n,a,i=!1){if(this.f=this.f&&i,this.j.lineNumber=0,this.j.value="",this.root!==L.SENTINEL){const{node:l,remainder:h,nodeStartOffset:p}=this.G(n),O=l.piece,R=O.bufferIndex,g=this.s(l,h);if(l.piece.bufferIndex===0&&O.end.line===this.g.line&&O.end.column===this.g.column&&p+O.length===n&&a.length<q){this.F(l,a),this.y();return}if(p===n)this.o(a,l),this.h.validate(n);else if(p+l.piece.length>n){const I=[];let E=new w(O.bufferIndex,g,O.end,this.t(O.bufferIndex,g,O.end),this.u(R,O.end)-this.u(R,g));if(this.K()&&this.M(a)&&this.I(l,h)===10){const K={line:E.start.line+1,column:0};E=new w(E.bufferIndex,K,E.end,this.t(E.bufferIndex,K,E.end),E.length-1),a+=`
`}if(this.K()&&this.L(a))if(this.I(l,h-1)===13){const K=this.s(l,h-1);this.C(l,K),a="\r"+a,l.piece.length===0&&I.push(l)}else this.C(l,g);else this.C(l,g);const d=this.w(a);E.length>0&&this.S(l,E);let P=l;for(let V=0;V<d.length;V++)P=this.S(P,d[V]);this.v(I)}else this.q(a,l)}else{const l=this.w(a);let h=this.T(null,l[0]);for(let p=1;p<l.length;p++)h=this.S(h,l[p])}this.y()}delete(n,a){if(this.j.lineNumber=0,this.j.value="",a<=0||this.root===L.SENTINEL)return;const i=this.G(n),l=this.G(n+a),h=i.node,p=l.node;if(h===p){const d=this.s(h,i.remainder),P=this.s(h,l.remainder);if(i.nodeStartOffset===n){if(a===h.piece.length){const V=h.next();(0,L.rbDelete)(this,h),this.N(V),this.y();return}this.D(h,P),this.h.validate(n),this.N(h),this.y();return}if(i.nodeStartOffset+h.piece.length===n+a){this.C(h,d),this.O(h),this.y();return}this.E(h,d,P),this.y();return}const O=[],R=this.s(h,i.remainder);this.C(h,R),this.h.validate(n),h.piece.length===0&&O.push(h);const g=this.s(p,l.remainder);this.D(p,g),p.piece.length===0&&O.push(p);const I=h.next();for(let d=I;d!==L.SENTINEL&&d!==p;d=d.next())O.push(d);const E=h.piece.length===0?h.prev():h;this.v(O),this.O(E),this.y()}o(n,a){const i=[];if(this.K()&&this.M(n)&&this.L(a)){const p=a.piece,O={line:p.start.line+1,column:0},R=new w(p.bufferIndex,O,p.end,this.t(p.bufferIndex,O,p.end),p.length-1);a.piece=R,n+=`
`,(0,L.updateTreeMetadata)(this,a,-1,-1),a.piece.length===0&&i.push(a)}const l=this.w(n);let h=this.T(a,l[l.length-1]);for(let p=l.length-2;p>=0;p--)h=this.T(h,l[p]);this.N(h),this.v(i)}q(n,a){this.Q(n,a)&&(n+=`
`);const i=this.w(n),l=this.S(a,i[0]);let h=l;for(let p=1;p<i.length;p++)h=this.S(h,i[p]);this.N(l)}s(n,a,i){const l=n.piece,h=n.piece.bufferIndex,p=this.a[h].lineStarts,R=p[l.start.line]+l.start.column+a;let g=l.start.line,I=l.end.line,E=0,d=0,P=0;for(;g<=I&&(E=g+(I-g)/2|0,P=p[E],E!==I);)if(d=p[E+1],R<P)I=E-1;else if(R>=d)g=E+1;else break;return i?(i.line=E,i.column=R-P,null):{line:E,column:R-P}}t(n,a,i){if(i.column===0)return i.line-a.line;const l=this.a[n].lineStarts;if(i.line===l.length-1)return i.line-a.line;const h=l[i.line+1],p=l[i.line]+i.column;if(h>p+1)return i.line-a.line;const O=p-1;return this.a[n].buffer.charCodeAt(O)===13?i.line-a.line+1:i.line-a.line}u(n,a){return this.a[n].lineStarts[a.line]+a.column}v(n){for(let a=0;a<n.length;a++)(0,L.rbDelete)(this,n[a])}w(n){if(n.length>q){const I=[];for(;n.length>q;){const d=n.charCodeAt(q-1);let P;d===13||d>=55296&&d<=56319?(P=n.substring(0,q-1),n=n.substring(q-1)):(P=n.substring(0,q),n=n.substring(q));const V=S(P);I.push(new w(this.a.length,{line:0,column:0},{line:V.length-1,column:P.length-V[V.length-1]},V.length-1,P.length)),this.a.push(new M(P,V))}const E=S(n);return I.push(new w(this.a.length,{line:0,column:0},{line:E.length-1,column:n.length-E[E.length-1]},E.length-1,n.length)),this.a.push(new M(n,E)),I}let a=this.a[0].buffer.length;const i=S(n,!1);let l=this.g;if(this.a[0].lineStarts[this.a[0].lineStarts.length-1]===a&&a!==0&&this.L(n)&&this.M(this.a[0].buffer)){this.g={line:this.g.line,column:this.g.column+1},l=this.g;for(let I=0;I<i.length;I++)i[I]+=a+1;this.a[0].lineStarts=this.a[0].lineStarts.concat(i.slice(1)),this.a[0].buffer+="_"+n,a+=1}else{if(a!==0)for(let I=0;I<i.length;I++)i[I]+=a;this.a[0].lineStarts=this.a[0].lineStarts.concat(i.slice(1)),this.a[0].buffer+=n}const h=this.a[0].buffer.length,p=this.a[0].lineStarts.length-1,O=h-this.a[0].lineStarts[p],R={line:p,column:O},g=new w(0,l,R,this.t(0,l,R),h-a);return this.g=R,[g]}getLinesRawContent(){return this.U(this.root)}getLineRawContent(n,a=0){let i=this.root,l="";const h=this.h.get2(n);if(h){i=h.node;const p=this.B(i,n-h.nodeStartLineNumber-1),O=this.a[i.piece.bufferIndex].buffer,R=this.u(i.piece.bufferIndex,i.piece.start);if(h.nodeStartLineNumber+i.piece.lineFeedCnt===n)l=O.substring(R+p,R+i.piece.length);else{const g=this.B(i,n-h.nodeStartLineNumber);return O.substring(R+p,R+g-a)}}else{let p=0;const O=n;for(;i!==L.SENTINEL;)if(i.left!==L.SENTINEL&&i.lf_left>=n-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>n-1){const R=this.B(i,n-i.lf_left-2),g=this.B(i,n-i.lf_left-1),I=this.a[i.piece.bufferIndex].buffer,E=this.u(i.piece.bufferIndex,i.piece.start);return p+=i.size_left,this.h.set({node:i,nodeStartOffset:p,nodeStartLineNumber:O-(n-1-i.lf_left)}),I.substring(E+R,E+g-a)}else if(i.lf_left+i.piece.lineFeedCnt===n-1){const R=this.B(i,n-i.lf_left-2),g=this.a[i.piece.bufferIndex].buffer,I=this.u(i.piece.bufferIndex,i.piece.start);l=g.substring(I+R,I+i.piece.length);break}else n-=i.lf_left+i.piece.lineFeedCnt,p+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==L.SENTINEL;){const p=this.a[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const O=this.B(i,0),R=this.u(i.piece.bufferIndex,i.piece.start);return l+=p.substring(R,R+O-a),l}else{const O=this.u(i.piece.bufferIndex,i.piece.start);l+=p.substr(O,i.piece.length)}i=i.next()}return l}y(){let n=this.root,a=1,i=0;for(;n!==L.SENTINEL;)a+=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right;this.b=a,this.c=i,this.h.validate(this.c)}A(n,a){const i=n.piece,l=this.s(n,a),h=l.line-i.start.line;if(this.u(i.bufferIndex,i.end)-this.u(i.bufferIndex,i.start)===a){const p=this.t(n.piece.bufferIndex,i.start,l);if(p!==h)return{index:p,remainder:0}}return{index:h,remainder:l.column}}B(n,a){if(a<0)return 0;const i=n.piece,l=this.a[i.bufferIndex].lineStarts,h=i.start.line+a+1;return h>i.end.line?l[i.end.line]+i.end.column-l[i.start.line]-i.start.column:l[h]-l[i.start.line]-i.start.column}C(n,a){const i=n.piece,l=i.lineFeedCnt,h=this.u(i.bufferIndex,i.end),p=a,O=this.u(i.bufferIndex,p),R=this.t(i.bufferIndex,i.start,p),g=R-l,I=O-h,E=i.length+I;n.piece=new w(i.bufferIndex,i.start,p,R,E),(0,L.updateTreeMetadata)(this,n,I,g)}D(n,a){const i=n.piece,l=i.lineFeedCnt,h=this.u(i.bufferIndex,i.start),p=a,O=this.t(i.bufferIndex,p,i.end),R=this.u(i.bufferIndex,p),g=O-l,I=h-R,E=i.length+I;n.piece=new w(i.bufferIndex,p,i.end,O,E),(0,L.updateTreeMetadata)(this,n,I,g)}E(n,a,i){const l=n.piece,h=l.start,p=l.end,O=l.length,R=l.lineFeedCnt,g=a,I=this.t(l.bufferIndex,l.start,g),E=this.u(l.bufferIndex,a)-this.u(l.bufferIndex,h);n.piece=new w(l.bufferIndex,l.start,g,I,E),(0,L.updateTreeMetadata)(this,n,E-O,I-R);const d=new w(l.bufferIndex,i,p,this.t(l.bufferIndex,i,p),this.u(l.bufferIndex,p)-this.u(l.bufferIndex,i)),P=this.S(n,d);this.N(P)}F(n,a){this.Q(a,n)&&(a+=`
`);const i=this.K()&&this.L(a)&&this.M(n),l=this.a[0].buffer.length;this.a[0].buffer+=a;const h=S(a,!1);for(let P=0;P<h.length;P++)h[P]+=l;if(i){const P=this.a[0].lineStarts[this.a[0].lineStarts.length-2];this.a[0].lineStarts.pop(),this.g={line:this.g.line-1,column:l-P}}this.a[0].lineStarts=this.a[0].lineStarts.concat(h.slice(1));const p=this.a[0].lineStarts.length-1,O=this.a[0].buffer.length-this.a[0].lineStarts[p],R={line:p,column:O},g=n.piece.length+a.length,I=n.piece.lineFeedCnt,E=this.t(0,n.piece.start,R),d=E-I;n.piece=new w(n.piece.bufferIndex,n.piece.start,R,E,g),this.g=R,(0,L.updateTreeMetadata)(this,n,a.length,d)}G(n){let a=this.root;const i=this.h.get(n);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:n-i.nodeStartOffset};let l=0;for(;a!==L.SENTINEL;)if(a.size_left>n)a=a.left;else if(a.size_left+a.piece.length>=n){l+=a.size_left;const h={node:a,remainder:n-a.size_left,nodeStartOffset:l};return this.h.set(h),h}else n-=a.size_left+a.piece.length,l+=a.size_left+a.piece.length,a=a.right;return null}H(n,a){let i=this.root,l=0;for(;i!==L.SENTINEL;)if(i.left!==L.SENTINEL&&i.lf_left>=n-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>n-1){const h=this.B(i,n-i.lf_left-2),p=this.B(i,n-i.lf_left-1);return l+=i.size_left,{node:i,remainder:Math.min(h+a-1,p),nodeStartOffset:l}}else if(i.lf_left+i.piece.lineFeedCnt===n-1){const h=this.B(i,n-i.lf_left-2);if(h+a-1<=i.piece.length)return{node:i,remainder:h+a-1,nodeStartOffset:l};a-=i.piece.length-h;break}else n-=i.lf_left+i.piece.lineFeedCnt,l+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==L.SENTINEL;){if(i.piece.lineFeedCnt>0){const h=this.B(i,0),p=this.J(i);return{node:i,remainder:Math.min(a-1,h),nodeStartOffset:p}}else if(i.piece.length>=a-1){const h=this.J(i);return{node:i,remainder:a-1,nodeStartOffset:h}}else a-=i.piece.length;i=i.next()}return null}I(n,a){if(n.piece.lineFeedCnt<1)return-1;const i=this.a[n.piece.bufferIndex],l=this.u(n.piece.bufferIndex,n.piece.start)+a;return i.buffer.charCodeAt(l)}J(n){if(!n)return 0;let a=n.size_left;for(;n!==this.root;)n.parent.right===n&&(a+=n.parent.size_left+n.parent.piece.length),n=n.parent;return a}K(){return!(this.f&&this.d===`
`)}L(n){if(typeof n=="string")return n.charCodeAt(0)===10;if(n===L.SENTINEL||n.piece.lineFeedCnt===0)return!1;const a=n.piece,i=this.a[a.bufferIndex].lineStarts,l=a.start.line,h=i[l]+a.start.column;return l===i.length-1||i[l+1]>h+1?!1:this.a[a.bufferIndex].buffer.charCodeAt(h)===10}M(n){return typeof n=="string"?n.charCodeAt(n.length-1)===13:n===L.SENTINEL||n.piece.lineFeedCnt===0?!1:this.I(n,n.piece.length-1)===13}N(n){if(this.K()&&this.L(n)){const a=n.prev();this.M(a)&&this.P(a,n)}}O(n){if(this.K()&&this.M(n)){const a=n.next();this.L(a)&&this.P(n,a)}}P(n,a){const i=[],l=this.a[n.piece.bufferIndex].lineStarts;let h;n.piece.end.column===0?h={line:n.piece.end.line-1,column:l[n.piece.end.line]-l[n.piece.end.line-1]-1}:h={line:n.piece.end.line,column:n.piece.end.column-1};const p=n.piece.length-1,O=n.piece.lineFeedCnt-1;n.piece=new w(n.piece.bufferIndex,n.piece.start,h,O,p),(0,L.updateTreeMetadata)(this,n,-1,-1),n.piece.length===0&&i.push(n);const R={line:a.piece.start.line+1,column:0},g=a.piece.length-1,I=this.t(a.piece.bufferIndex,R,a.piece.end);a.piece=new w(a.piece.bufferIndex,R,a.piece.end,I,g),(0,L.updateTreeMetadata)(this,a,-1,-1),a.piece.length===0&&i.push(a);const E=this.w(`\r
`);this.S(n,E[0]);for(let d=0;d<i.length;d++)(0,L.rbDelete)(this,i[d])}Q(n,a){if(this.K()&&this.M(n)){const i=a.next();if(this.L(i)){if(n+=`
`,i.piece.length===1)(0,L.rbDelete)(this,i);else{const l=i.piece,h={line:l.start.line+1,column:0},p=l.length-1,O=this.t(l.bufferIndex,h,l.end);i.piece=new w(l.bufferIndex,h,l.end,O,p),(0,L.updateTreeMetadata)(this,i,-1,-1)}return!0}}return!1}iterate(n,a){if(n===L.SENTINEL)return a(L.SENTINEL);const i=this.iterate(n.left,a);return i&&a(n)&&this.iterate(n.right,a)}R(n){if(n===L.SENTINEL)return"";const a=this.a[n.piece.bufferIndex],i=n.piece,l=this.u(i.bufferIndex,i.start),h=this.u(i.bufferIndex,i.end);return a.buffer.substring(l,h)}getPieceContent(n){const a=this.a[n.bufferIndex],i=this.u(n.bufferIndex,n.start),l=this.u(n.bufferIndex,n.end);return a.buffer.substring(i,l)}S(n,a){const i=new L.TreeNode(a,1);if(i.left=L.SENTINEL,i.right=L.SENTINEL,i.parent=L.SENTINEL,i.size_left=0,i.lf_left=0,this.root===L.SENTINEL)this.root=i,i.color=0;else if(n.right===L.SENTINEL)n.right=i,i.parent=n;else{const h=(0,L.leftest)(n.right);h.left=i,i.parent=h}return(0,L.fixInsert)(this,i),i}T(n,a){const i=new L.TreeNode(a,1);if(i.left=L.SENTINEL,i.right=L.SENTINEL,i.parent=L.SENTINEL,i.size_left=0,i.lf_left=0,this.root===L.SENTINEL)this.root=i,i.color=0;else if(n.left===L.SENTINEL)n.left=i,i.parent=n;else{const l=(0,L.righttest)(n.left);l.right=i,i.parent=l}return(0,L.fixInsert)(this,i),i}U(n){let a="";return this.iterate(n,i=>(a+=this.R(i),!0)),a}}t.PieceTreeBase=r}),define(te[26],ne([0,1,21,3,12,25,11,16,24,7]),function(ee,t,B,$,U,L,C,q,F,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PieceTreeTextBuffer=void 0;class S extends m.Disposable{constructor(w,M,f,s,r,o,n){super(),this.k=this.B(new B.Emitter),this.onDidChangeContent=this.k.event,this.f=M,this.j=!o,this.g=s,this.h=r,this.c=new C.PieceTreeBase(w,f,n)}equals(w){return!(w instanceof S)||this.f!==w.f||this.getEOL()!==w.getEOL()?!1:this.c.equal(w.c)}mightContainRTL(){return this.g}mightContainUnusualLineTerminators(){return this.h}resetMightContainUnusualLineTerminators(){this.h=!1}mightContainNonBasicASCII(){return this.j}getBOM(){return this.f}getEOL(){return this.c.getEOL()}createSnapshot(w){return this.c.createSnapshot(w?this.f:"")}getOffsetAt(w,M){return this.c.getOffsetAt(w,M)}getPositionAt(w){return this.c.getPositionAt(w)}getRangeAt(w,M){const f=w+M,s=this.getPositionAt(w),r=this.getPositionAt(f);return new U.Range(s.lineNumber,s.column,r.lineNumber,r.column)}getValueInRange(w,M=0){if(w.isEmpty())return"";const f=this.l(M);return this.c.getValueInRange(w,f)}getValueLengthInRange(w,M=0){if(w.isEmpty())return 0;if(w.startLineNumber===w.endLineNumber)return w.endColumn-w.startColumn;const f=this.getOffsetAt(w.startLineNumber,w.startColumn),s=this.getOffsetAt(w.endLineNumber,w.endColumn);let r=0;const o=this.l(M),n=this.getEOL();if(o.length!==n.length){const a=o.length-n.length,i=w.endLineNumber-w.startLineNumber;r=a*i}return s-f+r}getCharacterCountInRange(w,M=0){if(this.j){let f=0;const s=w.startLineNumber,r=w.endLineNumber;for(let o=s;o<=r;o++){const n=this.getLineContent(o),a=o===s?w.startColumn-1:0,i=o===r?w.endColumn-1:n.length;for(let l=a;l<i;l++)$.isHighSurrogate(n.charCodeAt(l))?(f=f+1,l=l+1):f=f+1}return f+=this.l(M).length*(r-s),f}return this.getValueLengthInRange(w,M)}getLength(){return this.c.getLength()}getLineCount(){return this.c.getLineCount()}getLinesContent(){return this.c.getLinesContent()}getLineContent(w){return this.c.getLineContent(w)}getLineCharCode(w,M){return this.c.getLineCharCode(w,M)}getCharCode(w){return this.c.getCharCode(w)}getLineLength(w){return this.c.getLineLength(w)}getLineMinColumn(w){return 1}getLineMaxColumn(w){return this.getLineLength(w)+1}getLineFirstNonWhitespaceColumn(w){const M=$.firstNonWhitespaceIndex(this.getLineContent(w));return M===-1?0:M+1}getLineLastNonWhitespaceColumn(w){const M=$.lastNonWhitespaceIndex(this.getLineContent(w));return M===-1?0:M+2}l(w){switch(w){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(w){this.c.setEOL(w)}applyEdits(w,M,f){let s=this.g,r=this.h,o=this.j,n=!0,a=[];for(let g=0;g<w.length;g++){const I=w[g];n&&I._isTracked&&(n=!1);const E=I.range;if(I.text){let Q=!0;o||(Q=!$.isBasicASCII(I.text),o=Q),!s&&Q&&(s=$.containsRTL(I.text)),!r&&Q&&(r=$.containsUnusualLineTerminators(I.text))}let d="",P=0,V=0,K=0;if(I.text){let Q;[P,V,K,Q]=(0,q.countEOL)(I.text);const X=this.getEOL();Q===0||Q===(X===`\r
`?2:1)?d=I.text:d=I.text.replace(/\r\n|\r|\n/g,X)}a[g]={sortIndex:g,identifier:I.identifier||null,range:E,rangeOffset:this.getOffsetAt(E.startLineNumber,E.startColumn),rangeLength:this.getValueLengthInRange(E),text:d,eolCount:P,firstLineLength:V,lastLineLength:K,forceMoveMarkers:Boolean(I.forceMoveMarkers),isAutoWhitespaceEdit:I.isAutoWhitespaceEdit||!1}}a.sort(S.p);let i=!1;for(let g=0,I=a.length-1;g<I;g++){const E=a[g].range.getEndPosition(),d=a[g+1].range.getStartPosition();if(d.isBeforeOrEqual(E)){if(d.isBefore(E))throw new Error("Overlapping ranges are not allowed!");i=!0}}n&&(a=this.m(a));const l=f||M?S._getInverseEditRanges(a):[],h=[];if(M)for(let g=0;g<a.length;g++){const I=a[g],E=l[g];if(I.isAutoWhitespaceEdit&&I.range.isEmpty())for(let d=E.startLineNumber;d<=E.endLineNumber;d++){let P="";d===E.startLineNumber&&(P=this.getLineContent(I.range.startLineNumber),$.firstNonWhitespaceIndex(P)!==-1)||h.push({lineNumber:d,oldContent:P})}}let p=null;if(f){let g=0;p=[];for(let I=0;I<a.length;I++){const E=a[I],d=l[I],P=this.getValueInRange(E.range),V=E.rangeOffset+g;g+=E.text.length-P.length,p[I]={sortIndex:E.sortIndex,identifier:E.identifier,range:d,text:P,textChange:new F.TextChange(E.rangeOffset,P,V,E.text)}}i||p.sort((I,E)=>I.sortIndex-E.sortIndex)}this.g=s,this.h=r,this.j=o;const O=this.n(a);let R=null;if(M&&h.length>0){h.sort((g,I)=>I.lineNumber-g.lineNumber),R=[];for(let g=0,I=h.length;g<I;g++){const E=h[g].lineNumber;if(g>0&&h[g-1].lineNumber===E)continue;const d=h[g].oldContent,P=this.getLineContent(E);P.length===0||P===d||$.firstNonWhitespaceIndex(P)!==-1||R.push(E)}}return this.k.fire(),new L.ApplyEditsResult(p,O,R)}m(w){return w.length<1e3?w:[this._toSingleEditOperation(w)]}_toSingleEditOperation(w){let M=!1;const f=w[0].range,s=w[w.length-1].range,r=new U.Range(f.startLineNumber,f.startColumn,s.endLineNumber,s.endColumn);let o=f.startLineNumber,n=f.startColumn;const a=[];for(let O=0,R=w.length;O<R;O++){const g=w[O],I=g.range;M=M||g.forceMoveMarkers,a.push(this.getValueInRange(new U.Range(o,n,I.startLineNumber,I.startColumn))),g.text.length>0&&a.push(g.text),o=I.endLineNumber,n=I.endColumn}const i=a.join(""),[l,h,p]=(0,q.countEOL)(i);return{sortIndex:0,identifier:w[0].identifier,range:r,rangeOffset:this.getOffsetAt(r.startLineNumber,r.startColumn),rangeLength:this.getValueLengthInRange(r,0),text:i,eolCount:l,firstLineLength:h,lastLineLength:p,forceMoveMarkers:M,isAutoWhitespaceEdit:!1}}n(w){w.sort(S.s);const M=[];for(let f=0;f<w.length;f++){const s=w[f],r=s.range.startLineNumber,o=s.range.startColumn,n=s.range.endLineNumber,a=s.range.endColumn;if(r===n&&o===a&&s.text.length===0)continue;s.text?(this.c.delete(s.rangeOffset,s.rangeLength),this.c.insert(s.rangeOffset,s.text,!0)):this.c.delete(s.rangeOffset,s.rangeLength);const i=new U.Range(r,o,n,a);M.push({range:i,rangeLength:s.rangeLength,text:s.text,rangeOffset:s.rangeOffset,forceMoveMarkers:s.forceMoveMarkers})}return M}findMatchesLineByLine(w,M,f,s){return this.c.findMatchesLineByLine(w,M,f,s)}getPieceTree(){return this.c}static _getInverseEditRange(w,M){const f=w.startLineNumber,s=w.startColumn,[r,o,n]=(0,q.countEOL)(M);let a;if(M.length>0){const i=r+1;i===1?a=new U.Range(f,s,f,s+o):a=new U.Range(f,s,f+i-1,n+1)}else a=new U.Range(f,s,f,s);return a}static _getInverseEditRanges(w){const M=[];let f=0,s=0,r=null;for(let o=0,n=w.length;o<n;o++){const a=w[o];let i,l;r?r.range.endLineNumber===a.range.startLineNumber?(i=f,l=s+(a.range.startColumn-r.range.endColumn)):(i=f+(a.range.startLineNumber-r.range.endLineNumber),l=a.range.startColumn):(i=a.range.startLineNumber,l=a.range.startColumn);let h;if(a.text.length>0){const p=a.eolCount+1;p===1?h=new U.Range(i,l,i,l+a.firstLineLength):h=new U.Range(i,l,i+p-1,a.lastLineLength+1)}else h=new U.Range(i,l,i,l);f=h.endLineNumber,s=h.endColumn,M.push(h),r=a}return M}static p(w,M){const f=U.Range.compareRangesUsingEnds(w.range,M.range);return f===0?w.sortIndex-M.sortIndex:f}static s(w,M){const f=U.Range.compareRangesUsingEnds(w.range,M.range);return f===0?M.sortIndex-w.sortIndex:-f}}t.PieceTreeTextBuffer=S}),define(te[27],ne([0,1,3,11,26]),function(ee,t,B,$,U){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PieceTreeTextBufferBuilder=void 0;class L{constructor(F,m,S,D,w,M,f,s,r){this.a=F,this.b=m,this.c=S,this.d=D,this.e=w,this.f=M,this.g=f,this.h=s,this.j=r}k(F){const m=this.c+this.d+this.e,S=this.c+this.e;return m===0?F===1?`
`:`\r
`:S>m/2?`\r
`:`
`}create(F){const m=this.k(F),S=this.a;if(this.j&&(m===`\r
`&&(this.c>0||this.d>0)||m===`
`&&(this.c>0||this.e>0)))for(let w=0,M=S.length;w<M;w++){const f=S[w].buffer.replace(/\r\n|\r|\n/g,m),s=(0,$.createLineStartsFast)(f);S[w]=new $.StringBuffer(f,s)}const D=new U.PieceTreeTextBuffer(S,this.b,m,this.f,this.g,this.h,this.j);return{textBuffer:D,disposable:D}}getFirstLineText(F){return this.a[0].buffer.substr(0,F).split(/\r\n|\r|\n/)[0]}}class C{constructor(){this.a=[],this.b="",this.c=!1,this.d=0,this.e=[],this.f=0,this.g=0,this.h=0,this.j=!1,this.k=!1,this.l=!0}acceptChunk(F){if(F.length===0)return;this.a.length===0&&B.startsWithUTF8BOM(F)&&(this.b=B.UTF8_BOM_CHARACTER,F=F.substr(1));const m=F.charCodeAt(F.length-1);m===13||m>=55296&&m<=56319?(this.m(F.substr(0,F.length-1),!1),this.c=!0,this.d=m):(this.m(F,!1),this.c=!1,this.d=m)}m(F,m){!m&&F.length===0||(this.c?this.n(String.fromCharCode(this.d)+F):this.n(F))}n(F){const m=(0,$.createLineStarts)(this.e,F);this.a.push(new $.StringBuffer(F,m.lineStarts)),this.f+=m.cr,this.g+=m.lf,this.h+=m.crlf,m.isBasicASCII||(this.l=!1,this.j||(this.j=B.containsRTL(F)),this.k||(this.k=B.containsUnusualLineTerminators(F)))}finish(F=!0){return this.o(),new L(this.a,this.b,this.f,this.g,this.h,this.j,this.k,this.l,F)}o(){if(this.a.length===0&&this.m("",!0),this.c){this.c=!1;const F=this.a[this.a.length-1];F.buffer+=String.fromCharCode(this.d);const m=(0,$.createLineStartsFast)(F.buffer);F.lineStarts=m,this.d===13&&this.f++}}}t.PieceTreeTextBufferBuilder=C}),define(te[28],ne([0,1,5]),function(ee,t,B){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scanner=t.TokenType=void 0;var $;(function(L){L[L.LParen=0]="LParen",L[L.RParen=1]="RParen",L[L.Neg=2]="Neg",L[L.Eq=3]="Eq",L[L.NotEq=4]="NotEq",L[L.Lt=5]="Lt",L[L.LtEq=6]="LtEq",L[L.Gt=7]="Gt",L[L.GtEq=8]="GtEq",L[L.RegexOp=9]="RegexOp",L[L.RegexStr=10]="RegexStr",L[L.True=11]="True",L[L.False=12]="False",L[L.In=13]="In",L[L.Not=14]="Not",L[L.And=15]="And",L[L.Or=16]="Or",L[L.Str=17]="Str",L[L.QuotedStr=18]="QuotedStr",L[L.Error=19]="Error",L[L.EOF=20]="EOF"})($=t.TokenType||(t.TokenType={}));class U{constructor(){this.c="",this.d=0,this.e=0,this.f=[],this.g=[],this.m=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static reportError(C){if(C.type!==19)throw(0,B.illegalArgument)(`expected an error token but got ${JSON.stringify(C)}`);switch(C.lexeme){case"=":return`Unexpected token '${C.lexeme}' at offset ${C.offset}. Did you mean '==' or '=~'?`;case"&":return`Unexpected token '${C.lexeme}' at offset ${C.offset}. Did you mean '&&'?`;case"|":return`Unexpected token '${C.lexeme}' at offset ${C.offset}. Did you mean '||'?`;default:{const q=C.lexeme;return q&&q.length>1&&q.startsWith("'")?`Unexpected token '${C.lexeme}' at offset ${C.offset}. Did you forget to close the string?`:q&&q.length>1&&q.endsWith("'")?`Unexpected token '${C.lexeme}' at offset ${C.offset}. Did you forget to open the string?`:`Unexpected token '${C.lexeme}' at offset ${C.offset}`}}}static getLexeme(C){switch(C.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return"==";case 4:return"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return C.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return C.lexeme;case 18:return C.lexeme;case 19:return C.lexeme;case 20:return"EOF";default:throw(0,B.illegalState)(`unhandled token type: ${JSON.stringify(C)}; have you forgotten to add a case?`)}}get errorTokens(){return this.g}reset(C){return this.c=C,this.d=0,this.e=0,this.f=[],this.g=[],this}scan(){for(;!this.r();)switch(this.d=this.e,this.i()){case 40:this.k(0);break;case 41:this.k(1);break;case 33:this.k(this.h(61)?4:2);break;case 39:this.o();break;case 47:this.q();break;case 61:this.h(61)?this.k(3):this.h(126)?this.k(9):this.l();break;case 60:this.k(this.h(61)?6:5);break;case 62:this.k(this.h(61)?8:7);break;case 38:this.h(38)?this.k(15):this.l();break;case 124:this.h(124)?this.k(16):this.l();break;case 32:case 13:case 9:case 10:case 160:break;default:this.n()}return this.d=this.e,this.k(20),Array.from(this.f)}h(C){return this.r()||this.c.charCodeAt(this.e)!==C?!1:(this.e++,!0)}i(){return this.c.charCodeAt(this.e++)}j(){return this.r()?0:this.c.charCodeAt(this.e)}k(C){this.f.push({type:C,offset:this.d})}l(){const C={type:19,offset:this.d,lexeme:this.c.substring(this.d,this.e)};this.g.push(C),this.f.push(C)}n(){this.m.lastIndex=this.d;const C=this.m.exec(this.c);if(C){this.e=this.d+C[0].length;const q=this.c.substring(this.d,this.e),F=U.b.get(q);F?this.k(F):this.f.push({type:17,lexeme:q,offset:this.d})}}o(){for(;this.j()!==39&&!this.r();)this.i();if(this.r()){this.l();return}this.i(),this.f.push({type:18,lexeme:this.c.substring(this.d+1,this.e-1),offset:this.d+1})}q(){let C=this.e,q=!1,F=!1;for(;;){if(C>=this.c.length){this.e=C,this.l();return}const S=this.c.charCodeAt(C);if(q)q=!1;else if(S===47&&!F){C++;break}else S===91?F=!0:S===92?q=!0:S===93&&(F=!1);C++}for(;C<this.c.length&&U.a.has(this.c.charCodeAt(C));)C++;this.e=C;const m=this.c.substring(this.d,this.e);this.f.push({type:10,lexeme:m,offset:this.d})}r(){return this.e>=this.c.length}}U.a=new Set(["i","g","s","m","y","u"].map(L=>L.charCodeAt(0))),U.b=new Map([["not",14],["in",13],["false",12],["true",11]]),t.Scanner=U}),define(te[29],ne([0,1]),function(ee,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refineServiceDecorator=t.createDecorator=t.IInstantiationService=t._util=void 0;var B;(function(C){C.serviceIds=new Map,C.DI_TARGET="$di$target",C.DI_DEPENDENCIES="$di$dependencies";function q(F){return F[C.DI_DEPENDENCIES]||[]}C.getServiceDependencies=q})(B=t._util||(t._util={})),t.IInstantiationService=U("instantiationService");function $(C,q,F){q[B.DI_TARGET]===q?q[B.DI_DEPENDENCIES].push({id:C,index:F}):(q[B.DI_DEPENDENCIES]=[{id:C,index:F}],q[B.DI_TARGET]=q)}function U(C){if(B.serviceIds.has(C))return B.serviceIds.get(C);const q=function(F,m,S){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");$(q,F,S)};return q.toString=()=>C,B.serviceIds.set(C,q),q}t.createDecorator=U;function L(C){return C}t.refineServiceDecorator=L}),define(te[30],ne([0,1,2,3,28,29]),function(ee,t,B,$,U,L){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.implies=t.IContextKeyService=t.RawContextKey=t.ContextKeyNotRegexExpr=t.ContextKeyRegexExpr=t.ContextKeySmallerEqualsExpr=t.ContextKeySmallerExpr=t.ContextKeyGreaterEqualsExpr=t.ContextKeyGreaterExpr=t.ContextKeyNotExpr=t.ContextKeyNotEqualsExpr=t.ContextKeyNotInExpr=t.ContextKeyInExpr=t.ContextKeyEqualsExpr=t.ContextKeyDefinedExpr=t.ContextKeyTrueExpr=t.ContextKeyFalseExpr=t.expressionsAreEqualWithConstantSubstitution=t.Parser=t.ContextKeyExpr=t.ContextKeyExprType=void 0;const C=new Map;C.set("false",!1),C.set("true",!0),C.set("isMac",B.isMacintosh),C.set("isLinux",B.isLinux),C.set("isWindows",B.isWindows),C.set("isWeb",B.isWeb),C.set("isMacNative",B.isMacintosh&&!B.isWeb),C.set("isEdge",B.isEdge),C.set("isFirefox",B.isFirefox),C.set("isChrome",B.isChrome),C.set("isSafari",B.isSafari);const q=Object.prototype.hasOwnProperty;var F;(function(G){G[G.False=0]="False",G[G.True=1]="True",G[G.Defined=2]="Defined",G[G.Not=3]="Not",G[G.Equals=4]="Equals",G[G.NotEquals=5]="NotEquals",G[G.And=6]="And",G[G.Regex=7]="Regex",G[G.NotRegex=8]="NotRegex",G[G.Or=9]="Or",G[G.In=10]="In",G[G.NotIn=11]="NotIn",G[G.Greater=12]="Greater",G[G.GreaterEquals=13]="GreaterEquals",G[G.Smaller=14]="Smaller",G[G.SmallerEquals=15]="SmallerEquals"})(F=t.ContextKeyExprType||(t.ContextKeyExprType={}));class m{static false(){return f.INSTANCE}static true(){return s.INSTANCE}static has(e){return r.create(e)}static equals(e,u){return o.create(e,u)}static notEquals(e,u){return i.create(e,u)}static regex(e,u){return I.create(e,u)}static in(e,u){return n.create(e,u)}static notIn(e,u){return a.create(e,u)}static not(e){return l.create(e)}static and(...e){return P.create(e,null,!0)}static or(...e){return V.create(e,null,!0)}static greater(e,u){return p.create(e,u)}static greaterEquals(e,u){return O.create(e,u)}static smaller(e,u){return R.create(e,u)}static smallerEquals(e,u){return g.create(e,u)}static deserializeOrErrorNew(e){if(!e)return{type:"error",lexingErrors:[],parsingErrors:[]};const u=new D,T=u.parse(e);return T===void 0?{type:"error",lexingErrors:u.lexingErrors.map(b=>U.Scanner.reportError(b)),parsingErrors:u.parsingErrors}:{type:"ok",expr:T}}static deserialize(e){if(!!e)return this.c(e)}static c(e){const u=e.split("||");return V.create(u.map(T=>this.d(T)),null,!0)}static d(e){const u=e.split("&&");return P.create(u.map(T=>this.f(T)),null,!0)}static f(e){if(e=e.trim(),e.indexOf("!=")>=0){const u=e.split("!=");return i.create(u[0].trim(),this.g(u[1]))}if(e.indexOf("==")>=0){const u=e.split("==");return o.create(u[0].trim(),this.g(u[1]))}if(e.indexOf("=~")>=0){const u=e.split("=~");return I.create(u[0].trim(),this.h(u[1]))}if(e.indexOf(" not in ")>=0){const u=e.split(" not in ");return a.create(u[0].trim(),this.g(u[1]))}if(e.indexOf(" in ")>=0){const u=e.split(" in ");return n.create(u[0].trim(),this.g(u[1]))}if(/^[^<=>]+>=[^<=>]+$/.test(e)){const u=e.split(">=");return O.create(u[0].trim(),u[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(e)){const u=e.split(">");return p.create(u[0].trim(),u[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(e)){const u=e.split("<=");return g.create(u[0].trim(),u[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(e)){const u=e.split("<");return R.create(u[0].trim(),u[1].trim())}return/^\!\s*/.test(e)?l.create(e.substr(1).trim()):r.create(e)}static g(e){if(e=e.trim(),e==="true")return!0;if(e==="false")return!1;const u=/^'([^']*)'$/.exec(e);return u?u[1].trim():e}static h(e){if((0,$.isFalsyOrWhitespace)(e))return null;const u=e.indexOf("/"),T=e.lastIndexOf("/");if(u===T||u<0)return null;const b=e.slice(u+1,T),k=e[T+1]==="i"?"i":"";try{return new RegExp(b,k)}catch{return null}}}t.ContextKeyExpr=m;class S extends Error{}class D{constructor(){this.c=new U.Scanner,this.d=[],this.f=0,this.g=[]}get lexingErrors(){return this.c.errorTokens}get parsingErrors(){return this.g}parse(e){if(e===""){this.g.push("Expected an expression but got an empty string");return}this.d=this.c.reset(e).scan(),this.f=0,this.g=[];try{const u=this.h();if(!this.D())throw this.z(this.C());return u}catch(u){if(!(u instanceof S)){const T=this.C();this.g.push(`Unexpected error: ${u} for token ${U.Scanner.getLexeme(T)} at offset ${T.offset}.`)}return}}h(){return this.k()}k(){const e=[this.l()];for(;this.v(16);){const u=this.l();e.push(u)}return e.length===1?e[0]:m.or(...e)}l(){const e=[this.o()];for(;this.v(15);){const u=this.o();e.push(u)}return e.length===1?e[0]:m.and(...e)}o(){if(this.v(2)){const e=this.C();switch(e.type){case 17:return this.w(),m.not(e.lexeme);case 11:return this.w(),m.false();case 12:return this.w(),m.true();default:throw this.y("KEY, 'true', or 'false'",e)}}return this.s()}s(){const e=this.C();switch(e.type){case 11:return this.w(),m.true();case 12:return this.w(),m.false();case 0:{this.w();const u=this.h();return this.x(1,"')'"),u}case 17:{const u=e.lexeme;if(this.w(),this.v(9)){const b=this.C();switch(b.type){case 10:case 19:{const k=[b.lexeme];this.w();let N=this.C(),j=0;for(let c=0;c<b.lexeme.length;c++)b.lexeme.charCodeAt(c)===40?j++:b.lexeme.charCodeAt(c)===41&&j--;for(;!this.D()&&N.type!==15&&N.type!==16;){switch(N.type){case 0:j++;break;case 1:j--;break;case 10:case 18:for(let c=0;c<N.lexeme.length;c++)N.lexeme.charCodeAt(c)===40?j++:b.lexeme.charCodeAt(c)===41&&j--}if(j<0)break;k.push(U.Scanner.getLexeme(N)),this.w(),N=this.C()}const z=k.join(""),x=z.lastIndexOf("/"),J=x===z.length-1?void 0:z.substring(x+1),y=new RegExp(z.substring(1,x),J);return m.regex(u,y)}case 18:{const k=b.lexeme;this.w();let N=null;if(!(0,$.isFalsyOrWhitespace)(k)){const j=k.indexOf("/"),z=k.lastIndexOf("/");if(j!==z&&j>=0){const x=k.slice(j+1,z),J=k[z+1]==="i"?"i":"";try{N=new RegExp(x,J)}catch{}}}if(N===null)throw this.y("REGEX",b);return I.create(u,N)}default:throw this.y("REGEX",this.C())}}if(this.v(14)){this.x(13,"'in' after 'not'");const b=this.t();return m.notIn(u,b)}switch(this.C().type){case 3:{this.w();const b=this.t();switch(b){case"true":return m.has(u);case"false":return m.not(u);default:return m.equals(u,b)}}case 4:{this.w();const b=this.t();switch(b){case"true":return m.not(u);case"false":return m.has(u);default:return m.notEquals(u,b)}}case 5:return this.w(),R.create(u,this.t());case 6:return this.w(),g.create(u,this.t());case 7:return this.w(),p.create(u,this.t());case 8:return this.w(),O.create(u,this.t());case 13:return this.w(),m.in(u,this.t());default:return m.has(u)}}default:throw this.y("'true', 'false', '(', KEY, KEY '=~' regex, KEY [ ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value ]",this.C())}}t(){const e=this.C();switch(e.type){case 17:case 18:return this.w(),e.lexeme;case 11:return this.w(),"true";case 12:return this.w(),"false";case 13:return this.w(),"in";default:return""}}u(){return this.d[this.f-1]}v(e){return this.B(e)?(this.w(),!0):!1}w(){return this.D()||this.f++,this.u()}x(e,u){if(this.B(e))return this.w();throw this.y(u,this.C())}y(e,u){return this.A(`Expected ${e} but got '${U.Scanner.getLexeme(u)}' at offset ${u.offset}.`)}z(e){return this.A(`Unexpected '${U.Scanner.getLexeme(e)}' at offset ${e.offset}.`)}A(e){return this.g.push(e),new S}B(e){return this.C().type===e}C(){return this.d[this.f]}D(){return this.C().type===20}}t.Parser=D;function w(G,e){const u=G?G.substituteConstants():void 0,T=e?e.substituteConstants():void 0;return!u&&!T?!0:!u||!T?!1:u.equals(T)}t.expressionsAreEqualWithConstantSubstitution=w;function M(G,e){return G.cmp(e)}class f{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}map(e){return this}negate(){return s.INSTANCE}}f.INSTANCE=new f,t.ContextKeyFalseExpr=f;class s{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}map(e){return this}negate(){return f.INSTANCE}}s.INSTANCE=new s,t.ContextKeyTrueExpr=s;class r{static create(e,u=null){const T=C.get(e);return typeof T=="boolean"?T?s.INSTANCE:f.INSTANCE:new r(e,u)}constructor(e,u){this.key=e,this.c=u,this.type=2}cmp(e){return e.type!==this.type?this.type-e.type:Q(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=C.get(this.key);return typeof e=="boolean"?e?s.INSTANCE:f.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(e){return e.mapDefined(this.key)}negate(){return this.c||(this.c=l.create(this.key,this)),this.c}}t.ContextKeyDefinedExpr=r;class o{static create(e,u,T=null){if(typeof u=="boolean")return u?r.create(e,T):l.create(e,T);const b=C.get(e);return typeof b=="boolean"?u===(b?"true":"false")?s.INSTANCE:f.INSTANCE:new o(e,u,T)}constructor(e,u,T){this.c=e,this.d=u,this.f=T,this.type=4}cmp(e){return e.type!==this.type?this.type-e.type:X(this.c,this.d,e.c,e.d)}equals(e){return e.type===this.type?this.c===e.c&&this.d===e.d:!1}substituteConstants(){const e=C.get(this.c);if(typeof e=="boolean"){const u=e?"true":"false";return this.d===u?s.INSTANCE:f.INSTANCE}return this}evaluate(e){return e.getValue(this.c)==this.d}serialize(){return`${this.c} == '${this.d}'`}keys(){return[this.c]}map(e){return e.mapEquals(this.c,this.d)}negate(){return this.f||(this.f=i.create(this.c,this.d,this)),this.f}}t.ContextKeyEqualsExpr=o;class n{static create(e,u){return new n(e,u)}constructor(e,u){this.d=e,this.f=u,this.type=10,this.c=null}cmp(e){return e.type!==this.type?this.type-e.type:X(this.d,this.f,e.d,e.f)}equals(e){return e.type===this.type?this.d===e.d&&this.f===e.f:!1}substituteConstants(){return this}evaluate(e){const u=e.getValue(this.f),T=e.getValue(this.d);return Array.isArray(u)?u.includes(T):typeof T=="string"&&typeof u=="object"&&u!==null?q.call(u,T):!1}serialize(){return`${this.d} in '${this.f}'`}keys(){return[this.d,this.f]}map(e){return e.mapIn(this.d,this.f)}negate(){return this.c||(this.c=a.create(this.d,this.f)),this.c}}t.ContextKeyInExpr=n;class a{static create(e,u){return new a(e,u)}constructor(e,u){this.d=e,this.f=u,this.type=11,this.c=n.create(e,u)}cmp(e){return e.type!==this.type?this.type-e.type:this.c.cmp(e.c)}equals(e){return e.type===this.type?this.c.equals(e.c):!1}substituteConstants(){return this}evaluate(e){return!this.c.evaluate(e)}serialize(){return`${this.d} not in '${this.f}'`}keys(){return this.c.keys()}map(e){return e.mapNotIn(this.d,this.f)}negate(){return this.c}}t.ContextKeyNotInExpr=a;class i{static create(e,u,T=null){if(typeof u=="boolean")return u?l.create(e,T):r.create(e,T);const b=C.get(e);return typeof b=="boolean"?u===(b?"true":"false")?f.INSTANCE:s.INSTANCE:new i(e,u,T)}constructor(e,u,T){this.c=e,this.d=u,this.f=T,this.type=5}cmp(e){return e.type!==this.type?this.type-e.type:X(this.c,this.d,e.c,e.d)}equals(e){return e.type===this.type?this.c===e.c&&this.d===e.d:!1}substituteConstants(){const e=C.get(this.c);if(typeof e=="boolean"){const u=e?"true":"false";return this.d===u?f.INSTANCE:s.INSTANCE}return this}evaluate(e){return e.getValue(this.c)!=this.d}serialize(){return`${this.c} != '${this.d}'`}keys(){return[this.c]}map(e){return e.mapNotEquals(this.c,this.d)}negate(){return this.f||(this.f=o.create(this.c,this.d,this)),this.f}}t.ContextKeyNotEqualsExpr=i;class l{static create(e,u=null){const T=C.get(e);return typeof T=="boolean"?T?f.INSTANCE:s.INSTANCE:new l(e,u)}constructor(e,u){this.c=e,this.d=u,this.type=3}cmp(e){return e.type!==this.type?this.type-e.type:Q(this.c,e.c)}equals(e){return e.type===this.type?this.c===e.c:!1}substituteConstants(){const e=C.get(this.c);return typeof e=="boolean"?e?f.INSTANCE:s.INSTANCE:this}evaluate(e){return!e.getValue(this.c)}serialize(){return`!${this.c}`}keys(){return[this.c]}map(e){return e.mapNot(this.c)}negate(){return this.d||(this.d=r.create(this.c,this)),this.d}}t.ContextKeyNotExpr=l;function h(G,e){if(typeof G=="string"){const u=parseFloat(G);isNaN(u)||(G=u)}return typeof G=="string"||typeof G=="number"?e(G):f.INSTANCE}class p{static create(e,u,T=null){return h(u,b=>new p(e,b,T))}constructor(e,u,T){this.c=e,this.d=u,this.f=T,this.type=12}cmp(e){return e.type!==this.type?this.type-e.type:X(this.c,this.d,e.c,e.d)}equals(e){return e.type===this.type?this.c===e.c&&this.d===e.d:!1}substituteConstants(){return this}evaluate(e){return typeof this.d=="string"?!1:parseFloat(e.getValue(this.c))>this.d}serialize(){return`${this.c} > ${this.d}`}keys(){return[this.c]}map(e){return e.mapGreater(this.c,this.d)}negate(){return this.f||(this.f=g.create(this.c,this.d,this)),this.f}}t.ContextKeyGreaterExpr=p;class O{static create(e,u,T=null){return h(u,b=>new O(e,b,T))}constructor(e,u,T){this.c=e,this.d=u,this.f=T,this.type=13}cmp(e){return e.type!==this.type?this.type-e.type:X(this.c,this.d,e.c,e.d)}equals(e){return e.type===this.type?this.c===e.c&&this.d===e.d:!1}substituteConstants(){return this}evaluate(e){return typeof this.d=="string"?!1:parseFloat(e.getValue(this.c))>=this.d}serialize(){return`${this.c} >= ${this.d}`}keys(){return[this.c]}map(e){return e.mapGreaterEquals(this.c,this.d)}negate(){return this.f||(this.f=R.create(this.c,this.d,this)),this.f}}t.ContextKeyGreaterEqualsExpr=O;class R{static create(e,u,T=null){return h(u,b=>new R(e,b,T))}constructor(e,u,T){this.c=e,this.d=u,this.f=T,this.type=14}cmp(e){return e.type!==this.type?this.type-e.type:X(this.c,this.d,e.c,e.d)}equals(e){return e.type===this.type?this.c===e.c&&this.d===e.d:!1}substituteConstants(){return this}evaluate(e){return typeof this.d=="string"?!1:parseFloat(e.getValue(this.c))<this.d}serialize(){return`${this.c} < ${this.d}`}keys(){return[this.c]}map(e){return e.mapSmaller(this.c,this.d)}negate(){return this.f||(this.f=O.create(this.c,this.d,this)),this.f}}t.ContextKeySmallerExpr=R;class g{static create(e,u,T=null){return h(u,b=>new g(e,b,T))}constructor(e,u,T){this.c=e,this.d=u,this.f=T,this.type=15}cmp(e){return e.type!==this.type?this.type-e.type:X(this.c,this.d,e.c,e.d)}equals(e){return e.type===this.type?this.c===e.c&&this.d===e.d:!1}substituteConstants(){return this}evaluate(e){return typeof this.d=="string"?!1:parseFloat(e.getValue(this.c))<=this.d}serialize(){return`${this.c} <= ${this.d}`}keys(){return[this.c]}map(e){return e.mapSmallerEquals(this.c,this.d)}negate(){return this.f||(this.f=p.create(this.c,this.d,this)),this.f}}t.ContextKeySmallerEqualsExpr=g;class I{static create(e,u){return new I(e,u)}constructor(e,u){this.d=e,this.f=u,this.type=7,this.c=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.d<e.d)return-1;if(this.d>e.d)return 1;const u=this.f?this.f.source:"",T=e.f?e.f.source:"";return u<T?-1:u>T?1:0}equals(e){if(e.type===this.type){const u=this.f?this.f.source:"",T=e.f?e.f.source:"";return this.d===e.d&&u===T}return!1}substituteConstants(){return this}evaluate(e){const u=e.getValue(this.d);return this.f?this.f.test(u):!1}serialize(){const e=this.f?`/${this.f.source}/${this.f.flags}`:"/invalid/";return`${this.d} =~ ${e}`}keys(){return[this.d]}map(e){return e.mapRegex(this.d,this.f)}negate(){return this.c||(this.c=E.create(this)),this.c}}t.ContextKeyRegexExpr=I;class E{static create(e){return new E(e)}constructor(e){this.c=e,this.type=8}cmp(e){return e.type!==this.type?this.type-e.type:this.c.cmp(e.c)}equals(e){return e.type===this.type?this.c.equals(e.c):!1}substituteConstants(){return this}evaluate(e){return!this.c.evaluate(e)}serialize(){throw new Error("Method not implemented.")}keys(){return this.c.keys()}map(e){return new E(this.c.map(e))}negate(){return this.c}}t.ContextKeyNotRegexExpr=E;function d(G){let e=null;for(let u=0,T=G.length;u<T;u++){const b=G[u].substituteConstants();if(G[u]!==b&&e===null){e=[];for(let k=0;k<u;k++)e[k]=G[k]}e!==null&&(e[u]=b)}return e===null?G:e}class P{static create(e,u,T){return P.d(e,u,T)}constructor(e,u){this.expr=e,this.c=u,this.type=6}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let u=0,T=this.expr.length;u<T;u++){const b=M(this.expr[u],e.expr[u]);if(b!==0)return b}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let u=0,T=this.expr.length;u<T;u++)if(!this.expr[u].equals(e.expr[u]))return!1;return!0}return!1}substituteConstants(){const e=d(this.expr);return e===this.expr?this:P.create(e,this.c,!1)}evaluate(e){for(let u=0,T=this.expr.length;u<T;u++)if(!this.expr[u].evaluate(e))return!1;return!0}static d(e,u,T){const b=[];let k=!1;for(const N of e)if(!!N){if(N.type===1){k=!0;continue}if(N.type===0)return f.INSTANCE;if(N.type===6){b.push(...N.expr);continue}b.push(N)}if(b.length===0&&k)return s.INSTANCE;if(b.length!==0){if(b.length===1)return b[0];b.sort(M);for(let N=1;N<b.length;N++)b[N-1].equals(b[N])&&(b.splice(N,1),N--);if(b.length===1)return b[0];for(;b.length>1;){const N=b[b.length-1];if(N.type!==9)break;b.pop();const j=b.pop(),z=b.length===0,x=V.create(N.expr.map(J=>P.create([J,j],null,T)),null,z);x&&(b.push(x),b.sort(M))}if(b.length===1)return b[0];if(T){for(let N=0;N<b.length;N++)for(let j=N+1;j<b.length;j++)if(b[N].negate().equals(b[j]))return f.INSTANCE;if(b.length===1)return b[0]}return new P(b,u)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(const u of this.expr)e.push(...u.keys());return e}map(e){return new P(this.expr.map(u=>u.map(e)),null)}negate(){if(!this.c){const e=[];for(const u of this.expr)e.push(u.negate());this.c=V.create(e,this,!0)}return this.c}}class V{static create(e,u,T){return V.d(e,u,T)}constructor(e,u){this.expr=e,this.c=u,this.type=9}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let u=0,T=this.expr.length;u<T;u++){const b=M(this.expr[u],e.expr[u]);if(b!==0)return b}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let u=0,T=this.expr.length;u<T;u++)if(!this.expr[u].equals(e.expr[u]))return!1;return!0}return!1}substituteConstants(){const e=d(this.expr);return e===this.expr?this:V.create(e,this.c,!1)}evaluate(e){for(let u=0,T=this.expr.length;u<T;u++)if(this.expr[u].evaluate(e))return!0;return!1}static d(e,u,T){let b=[],k=!1;if(e){for(let N=0,j=e.length;N<j;N++){const z=e[N];if(!!z){if(z.type===0){k=!0;continue}if(z.type===1)return s.INSTANCE;if(z.type===9){b=b.concat(z.expr);continue}b.push(z)}}if(b.length===0&&k)return f.INSTANCE;b.sort(M)}if(b.length!==0){if(b.length===1)return b[0];for(let N=1;N<b.length;N++)b[N-1].equals(b[N])&&(b.splice(N,1),N--);if(b.length===1)return b[0];if(T){for(let N=0;N<b.length;N++)for(let j=N+1;j<b.length;j++)if(b[N].negate().equals(b[j]))return s.INSTANCE;if(b.length===1)return b[0]}return new V(b,u)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(const u of this.expr)e.push(...u.keys());return e}map(e){return new V(this.expr.map(u=>u.map(e)),null)}negate(){if(!this.c){const e=[];for(const u of this.expr)e.push(u.negate());for(;e.length>1;){const u=e.shift(),T=e.shift(),b=[];for(const k of se(u))for(const N of se(T))b.push(P.create([k,N],null,!1));e.unshift(V.create(b,null,!1))}this.c=V.create(e,this,!0)}return this.c}}class K extends r{static all(){return K.d.values()}constructor(e,u,T){super(e,null),this.f=u,typeof T=="object"?K.d.push({...T,key:e}):T!==!0&&K.d.push({key:e,description:T,type:u!=null?typeof u:void 0})}bindTo(e){return e.createKey(this.key,this.f)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return o.create(this.key,e)}notEqualsTo(e){return i.create(this.key,e)}}K.d=[],t.RawContextKey=K,t.IContextKeyService=(0,L.createDecorator)("contextKeyService");function Q(G,e){return G<e?-1:G>e?1:0}function X(G,e,u,T){return G<u?-1:G>u?1:e<T?-1:e>T?1:0}function Y(G,e){if(G.type===0||e.type===1)return!0;if(G.type===9)return e.type===9?Z(G.expr,e.expr):!1;if(e.type===9){for(const u of e.expr)if(Y(G,u))return!0;return!1}if(G.type===6){if(e.type===6)return Z(e.expr,G.expr);for(const u of G.expr)if(Y(u,e))return!0;return!1}return G.equals(e)}t.implies=Y;function Z(G,e){let u=0,T=0;for(;u<G.length&&T<e.length;){const b=G[u].cmp(e[T]);if(b<0)return!1;b===0&&u++,T++}return u===G.length}function se(G){return G.type===9?G.expr:[G]}}),define(te[31],ne([0,1,6,22,37,18,9,4,2,30]),function(ee,t,B,$,U,L,C,q,F,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compressOutputItemStreams=t.isTextStreamMime=t.NotebookWorkingCopyTypeIdentifier=t.CellStatusbarAlignment=t.NotebookSetting=t.notebookDocumentFilterMatch=t.isDocumentExcludePattern=t.NotebookEditorPriority=t.NOTEBOOK_EDITOR_CURSOR_BOUNDARY=t.diff=t.MimeTypeDisplayOrder=t.CellUri=t.CellEditType=t.SelectionStateType=t.NotebookCellsChangeType=t.RendererMessagingSpec=t.NotebookRendererMatch=t.NotebookCellExecutionState=t.NotebookRunState=t.RENDERER_NOT_AVAILABLE=t.RENDERER_EQUIVALENT_EXTENSIONS=t.ACCESSIBLE_NOTEBOOK_DISPLAY_ORDER=t.NOTEBOOK_DISPLAY_ORDER=t.CellKind=t.INTERACTIVE_WINDOW_EDITOR_ID=t.NOTEBOOK_DIFF_EDITOR_ID=t.NOTEBOOK_EDITOR_ID=void 0,t.NOTEBOOK_EDITOR_ID="workbench.editor.notebook",t.NOTEBOOK_DIFF_EDITOR_ID="workbench.editor.notebookTextDiffEditor",t.INTERACTIVE_WINDOW_EDITOR_ID="workbench.editor.interactive";var S;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(S=t.CellKind||(t.CellKind={})),t.NOTEBOOK_DISPLAY_ORDER=["application/json","application/javascript","text/html","image/svg+xml",L.Mimes.latex,L.Mimes.markdown,"image/png","image/jpeg",L.Mimes.text],t.ACCESSIBLE_NOTEBOOK_DISPLAY_ORDER=[L.Mimes.latex,L.Mimes.markdown,"application/json",L.Mimes.text,"text/html","image/svg+xml","image/png","image/jpeg"],t.RENDERER_EQUIVALENT_EXTENSIONS=new Map([["ms-toolsai.jupyter",new Set(["jupyter-notebook","interactive"])],["ms-toolsai.jupyter-renderers",new Set(["jupyter-notebook","interactive"])]]),t.RENDERER_NOT_AVAILABLE="_notAvailable";var D;(function(e){e[e.Running=1]="Running",e[e.Idle=2]="Idle"})(D=t.NotebookRunState||(t.NotebookRunState={}));var w;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(w=t.NotebookCellExecutionState||(t.NotebookCellExecutionState={}));var M;(function(e){e[e.WithHardKernelDependency=0]="WithHardKernelDependency",e[e.WithOptionalKernelDependency=1]="WithOptionalKernelDependency",e[e.Pure=2]="Pure",e[e.Never=3]="Never"})(M=t.NotebookRendererMatch||(t.NotebookRendererMatch={}));var f;(function(e){e.Always="always",e.Never="never",e.Optional="optional"})(f=t.RendererMessagingSpec||(t.RendererMessagingSpec={}));var s;(function(e){e[e.ModelChange=1]="ModelChange",e[e.Move=2]="Move",e[e.ChangeCellLanguage=5]="ChangeCellLanguage",e[e.Initialize=6]="Initialize",e[e.ChangeCellMetadata=7]="ChangeCellMetadata",e[e.Output=8]="Output",e[e.OutputItem=9]="OutputItem",e[e.ChangeCellContent=10]="ChangeCellContent",e[e.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",e[e.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",e[e.ChangeCellMime=13]="ChangeCellMime",e[e.Unknown=100]="Unknown"})(s=t.NotebookCellsChangeType||(t.NotebookCellsChangeType={}));var r;(function(e){e[e.Handle=0]="Handle",e[e.Index=1]="Index"})(r=t.SelectionStateType||(t.SelectionStateType={}));var o;(function(e){e[e.Replace=1]="Replace",e[e.Output=2]="Output",e[e.Metadata=3]="Metadata",e[e.CellLanguage=4]="CellLanguage",e[e.DocumentMetadata=5]="DocumentMetadata",e[e.Move=6]="Move",e[e.OutputItems=7]="OutputItems",e[e.PartialMetadata=8]="PartialMetadata",e[e.PartialInternalMetadata=9]="PartialInternalMetadata"})(o=t.CellEditType||(t.CellEditType={}));var n;(function(e){e.scheme=C.Schemas.vscodeNotebookCell;const u=["W","X","Y","Z","a","b","c","d","e","f"],T=new RegExp(`^[${u.join("")}]+`),b=7;function k(y,c){const v=c.toString(b),W=`${v.length<u.length?u[v.length-1]:"z"}${v}s${(0,B.encodeBase64)(B.VSBuffer.fromString(y.scheme),!0,!0)}`;return y.with({scheme:e.scheme,fragment:W})}e.generate=k;function N(y){if(y.scheme!==e.scheme)return;const c=y.fragment.indexOf("s");if(c<0)return;const v=parseInt(y.fragment.substring(0,c).replace(T,""),b),A=(0,B.decodeBase64)(y.fragment.substring(c+1)).toString();if(!isNaN(v))return{handle:v,notebook:y.with({scheme:A,fragment:null})}}e.parse=N;function j(y,c){return y.with({scheme:C.Schemas.vscodeNotebookCellOutput,fragment:`op${c??""},${y.scheme!==C.Schemas.file?y.scheme:""}`})}e.generateCellOutputUri=j;function z(y){if(y.scheme!==C.Schemas.vscodeNotebookCellOutput)return;const c=/^op([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})?\,(.*)$/i.exec(y.fragment);if(!c)return;const v=c[1]&&c[1]!==""?c[1]:void 0,A=c[2];return{outputId:v,notebook:y.with({scheme:A||C.Schemas.file,fragment:null})}}e.parseCellOutputUri=z;function x(y,c,v){return e.generate(y,c).with({scheme:v})}e.generateCellPropertyUri=x;function J(y,c){if(y.scheme===c)return e.parse(y.with({scheme:e.scheme}))}e.parseCellPropertyUri=J})(n=t.CellUri||(t.CellUri={}));const a=e=>F.isWindows?e.replace(/\//g,"\\"):e;class i{constructor(u=[],T=t.NOTEBOOK_DISPLAY_ORDER){this.e=T,this.d=[...new Set(u)].map(b=>({pattern:b,matches:$.parse(a(b))}))}sort(u){const T=new Map(U.Iterable.map(u,k=>[k,a(k)]));let b=[];for(const{matches:k}of this.d)for(const[N,j]of T)if(k(j)){b.push(N),T.delete(N);break}return T.size&&(b=b.concat([...T.keys()].sort((k,N)=>this.e.indexOf(k)-this.e.indexOf(N)))),b}prioritize(u,T){const b=this.f(u);if(b===-1){this.d.unshift({pattern:u,matches:$.parse(a(u))});return}const k=new Set(T.map(j=>this.f(j,b)));k.delete(-1);const N=Array.from(k).sort();this.d.splice(b+1,0,...N.map(j=>this.d[j]));for(let j=N.length-1;j>=0;j--)this.d.splice(N[j],1)}toArray(){return this.d.map(u=>u.pattern)}f(u,T=this.d.length){const b=a(u);for(let k=0;k<T;k++)if(this.d[k].matches(b))return k;return-1}}t.MimeTypeDisplayOrder=i;function l(e,u,T,b=(k,N)=>k===N){const k=[];function N(x,J,y){if(J===0&&y.length===0)return;const c=k[k.length-1];c&&c.start+c.deleteCount===x?(c.deleteCount+=J,c.toInsert.push(...y)):k.push({start:x,deleteCount:J,toInsert:y})}let j=0,z=0;for(;;){if(j===e.length){N(j,0,u.slice(z));break}if(z===u.length){N(j,e.length-j,[]);break}const x=e[j],J=u[z];if(b(x,J)){j+=1,z+=1;continue}T(J)?(N(j,1,[]),j+=1):(N(j,0,[J]),z+=1)}return k}t.diff=l,t.NOTEBOOK_EDITOR_CURSOR_BOUNDARY=new m.RawContextKey("notebookEditorCursorAtBoundary","none");var h;(function(e){e.default="default",e.option="option"})(h=t.NotebookEditorPriority||(t.NotebookEditorPriority={}));function p(e){const u=e;return!!((typeof u.include=="string"||$.isRelativePattern(u.include))&&(typeof u.exclude=="string"||$.isRelativePattern(u.exclude)))}t.isDocumentExcludePattern=p;function O(e,u,T){if(Array.isArray(e.viewType)&&e.viewType.indexOf(u)>=0||e.viewType===u)return!0;if(e.filenamePattern){const b=p(e.filenamePattern)?e.filenamePattern.include:e.filenamePattern,k=p(e.filenamePattern)?e.filenamePattern.exclude:void 0;if($.match(b,(0,q.basename)(T.fsPath).toLowerCase()))return!(k&&$.match(k,(0,q.basename)(T.fsPath).toLowerCase()))}return!1}t.notebookDocumentFilterMatch=O,t.NotebookSetting={displayOrder:"notebook.displayOrder",cellToolbarLocation:"notebook.cellToolbarLocation",cellToolbarVisibility:"notebook.cellToolbarVisibility",showCellStatusBar:"notebook.showCellStatusBar",textDiffEditorPreview:"notebook.diff.enablePreview",experimentalInsertToolbarAlignment:"notebook.experimental.insertToolbarAlignment",compactView:"notebook.compactView",focusIndicator:"notebook.cellFocusIndicator",insertToolbarLocation:"notebook.insertToolbarLocation",globalToolbar:"notebook.globalToolbar",undoRedoPerCell:"notebook.undoRedoPerCell",consolidatedOutputButton:"notebook.consolidatedOutputButton",showFoldingControls:"notebook.showFoldingControls",dragAndDropEnabled:"notebook.dragAndDropEnabled",cellEditorOptionsCustomizations:"notebook.editorOptionsCustomizations",consolidatedRunButton:"notebook.consolidatedRunButton",openGettingStarted:"notebook.experimental.openGettingStarted",textOutputLineLimit:"notebook.output.textLineLimit",globalToolbarShowLabel:"notebook.globalToolbarShowLabel",markupFontSize:"notebook.markup.fontSize",interactiveWindowCollapseCodeCells:"interactiveWindow.collapseCellInputCode",outputLineHeight:"notebook.outputLineHeight",outputFontSize:"notebook.outputFontSize",outputFontFamily:"notebook.outputFontFamily",kernelPickerType:"notebook.kernelPicker.type",outputScrolling:"notebook.experimental.outputScrolling",outputWordWrap:"notebook.output.wordWrap",logging:"notebook.logging"};var R;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(R=t.CellStatusbarAlignment||(t.CellStatusbarAlignment={}));class g{static create(u){return`${g.d}${u}`}static parse(u){if(u.startsWith(g.d))return u.substring(g.d.length)}}g.d="notebook/",t.NotebookWorkingCopyTypeIdentifier=g;function I(e){return["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes(e)}t.isTextStreamMime=I;const E=new TextDecoder;function d(e){const u=[];let T=!1;for(const b of e)(u.length===0||T)&&(u.push(b),T=!0);return Q(u),G(B.VSBuffer.concat(u.map(b=>B.VSBuffer.wrap(b))))}t.compressOutputItemStreams=d;const P=`${String.fromCharCode(27)}[A`,V=P.split("").map(e=>e.charCodeAt(0)),K=10;function Q(e){e.forEach((u,T)=>{if(T===0||u.length<P.length)return;const b=e[T-1],k=u.subarray(0,P.length);if(k[0]===V[0]&&k[1]===V[1]&&k[2]===V[2]){const N=b.lastIndexOf(K);if(N===-1)return;e[T-1]=b.subarray(0,N),e[T]=u.subarray(P.length)}})}function X(e){let u=e;do e=u,u=e.replace(/[^\n]\x08/gm,"");while(u.length<e.length);return e}function Y(e){for(e=e.replace(/\r+\n/gm,`
`);e.search(/\r[^$]/g)>-1;){const u=e.match(/^(.*)\r+/m)[1];let T=e.match(/\r+(.*)$/m)[1];T=T+u.slice(T.length,u.length),e=e.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,T)}return e}const Z="\b".charCodeAt(0),se="\r".charCodeAt(0);function G(e){return!e.buffer.includes(Z)&&!e.buffer.includes(se)?e:B.VSBuffer.fromString(Y(X(E.decode(e.buffer))))}}),define(te[38],ne([0,1,39,40,10,27,31,12]),function(ee,t,B,$,U,L,C,q){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create=t.NotebookEditorSimpleWorker=void 0;function F(f){let s=(0,$.numberHash)(104579,0);for(let r=0;r<f.buffer.length;r++)s=(0,$.doHash)(f.buffer[r],s);return s}class m{get textBuffer(){if(this.a)return this.a;const s=new L.PieceTreeTextBufferBuilder;s.acceptChunk(Array.isArray(this.d)?this.d.join(`
`):this.d);const r=s.finish(!0);return this.a=r.create(1).textBuffer,this.a}primaryKey(){return this.b===void 0&&(this.b=(0,$.hash)(this.getValue())),this.b}constructor(s,r,o,n,a,i,l){this.handle=s,this.d=r,this.language=o,this.cellKind=n,this.outputs=a,this.metadata=i,this.internalMetadata=l,this.b=null,this.c=null}getFullModelRange(){const s=this.textBuffer.getLineCount();return new q.Range(1,1,s,this.textBuffer.getLineLength(s)+1)}getValue(){const s=this.getFullModelRange();return this.textBuffer.getValueInRange(s,1)}getComparisonValue(){return this.b!==null?this.b:(this.c=(0,$.hash)([(0,$.hash)(this.language),(0,$.hash)(this.getValue()),this.metadata,this.internalMetadata,this.outputs.map(s=>({outputs:s.outputs.map(r=>({mime:r.mime,data:F(r.data)})),metadata:s.metadata}))]),this.c)}getHashValue(){return this.c!==null?this.c:(this.c=(0,$.hash)([(0,$.hash)(this.getValue()),this.language,this.metadata,this.internalMetadata]),this.c)}}class S{constructor(s,r,o){this.uri=s,this.cells=r,this.metadata=o}acceptModelChanged(s){s.rawEvents.forEach(r=>{if(r.kind===C.NotebookCellsChangeType.ModelChange)this._spliceNotebookCells(r.changes);else if(r.kind===C.NotebookCellsChangeType.Move){const o=this.cells.splice(r.index,1);this.cells.splice(r.newIdx,0,...o)}else if(r.kind===C.NotebookCellsChangeType.Output){const o=this.cells[r.index];o.outputs=r.outputs}else if(r.kind===C.NotebookCellsChangeType.ChangeCellLanguage){this.a(r.index);const o=this.cells[r.index];o.language=r.language}else if(r.kind===C.NotebookCellsChangeType.ChangeCellMetadata){this.a(r.index);const o=this.cells[r.index];o.metadata=r.metadata}else if(r.kind===C.NotebookCellsChangeType.ChangeCellInternalMetadata){this.a(r.index);const o=this.cells[r.index];o.internalMetadata=r.internalMetadata}})}a(s){if(s<0||s>=this.cells.length)throw new Error(`Illegal index ${s}. Cells length: ${this.cells.length}`)}_spliceNotebookCells(s){s.reverse().forEach(r=>{const n=r[2].map(a=>new m(a.handle,a.source,a.language,a.cellKind,a.outputs,a.metadata));this.cells.splice(r[0],r[1],...n)})}}class D{constructor(s){this.textModel=s}getElements(){const s=new Int32Array(this.textModel.cells.length);for(let r=0;r<this.textModel.cells.length;r++)s[r]=this.textModel.cells[r].getComparisonValue();return s}getCellHash(s){const r=Array.isArray(s.source)?s.source.join(`
`):s.source;return(0,$.hash)([(0,$.hash)(r),s.metadata])}}class w{constructor(){this.a=Object.create(null)}dispose(){}acceptNewModel(s,r){this.a[s]=new S(U.URI.parse(s),r.cells.map(o=>new m(o.handle,o.source,o.language,o.cellKind,o.outputs,o.metadata)),r.metadata)}acceptModelChanged(s,r){this.a[s]?.acceptModelChanged(r)}acceptRemovedModel(s){!this.a[s]||delete this.a[s]}computeDiff(s,r){const o=this.b(s),n=this.b(r);return{cellsDiff:new B.LcsDiff(new D(o),new D(n)).ComputeDiff(!1)}}b(s){return this.a[s]}}t.NotebookEditorSimpleWorker=w;function M(f){return new w}t.create=M})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/ee2b180d582a7f601fa6ecfdad8d9fd269ab1884/core/vs/workbench/contrib/notebook/common/services/notebookSimpleWorker.js.map
